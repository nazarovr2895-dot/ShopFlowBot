function _v(e,t){for(var s=0;s<t.length;s++){const r=t[s];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();function Ap(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Lp={exports:{}},Gi={},Rp={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Na=Symbol.for("react.element"),Nv=Symbol.for("react.portal"),wv=Symbol.for("react.fragment"),Sv=Symbol.for("react.strict_mode"),kv=Symbol.for("react.profiler"),Cv=Symbol.for("react.provider"),Ev=Symbol.for("react.context"),Pv=Symbol.for("react.forward_ref"),Tv=Symbol.for("react.suspense"),Av=Symbol.for("react.memo"),Lv=Symbol.for("react.lazy"),Uu=Symbol.iterator;function Rv(e){return e===null||typeof e!="object"?null:(e=Uu&&e[Uu]||e["@@iterator"],typeof e=="function"?e:null)}var Op={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Mp=Object.assign,Dp={};function mr(e,t,s){this.props=e,this.context=t,this.refs=Dp,this.updater=s||Op}mr.prototype.isReactComponent={};mr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};mr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $p(){}$p.prototype=mr.prototype;function Nc(e,t,s){this.props=e,this.context=t,this.refs=Dp,this.updater=s||Op}var wc=Nc.prototype=new $p;wc.constructor=Nc;Mp(wc,mr.prototype);wc.isPureReactComponent=!0;var Bu=Array.isArray,Ip=Object.prototype.hasOwnProperty,Sc={current:null},zp={key:!0,ref:!0,__self:!0,__source:!0};function Fp(e,t,s){var r,a={},i=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)Ip.call(t,r)&&!zp.hasOwnProperty(r)&&(a[r]=t[r]);var o=arguments.length-2;if(o===1)a.children=s;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)a[r]===void 0&&(a[r]=o[r]);return{$$typeof:Na,type:e,key:i,ref:l,props:a,_owner:Sc.current}}function Ov(e,t){return{$$typeof:Na,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function kc(e){return typeof e=="object"&&e!==null&&e.$$typeof===Na}function Mv(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var qu=/\/+/g;function kl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Mv(""+e.key):t.toString(36)}function ei(e,t,s,r,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Na:case Nv:l=!0}}if(l)return l=e,a=a(l),e=r===""?"."+kl(l,0):r,Bu(a)?(s="",e!=null&&(s=e.replace(qu,"$&/")+"/"),ei(a,t,s,"",function(d){return d})):a!=null&&(kc(a)&&(a=Ov(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(qu,"$&/")+"/")+e)),t.push(a)),1;if(l=0,r=r===""?".":r+":",Bu(e))for(var o=0;o<e.length;o++){i=e[o];var c=r+kl(i,o);l+=ei(i,t,s,c,a)}else if(c=Rv(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=r+kl(i,o++),l+=ei(i,t,s,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Ra(e,t,s){if(e==null)return e;var r=[],a=0;return ei(e,r,"","",function(i){return t.call(s,i,a++)}),r}function Dv(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var wt={current:null},ti={transition:null},$v={ReactCurrentDispatcher:wt,ReactCurrentBatchConfig:ti,ReactCurrentOwner:Sc};function Wp(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:Ra,forEach:function(e,t,s){Ra(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return Ra(e,function(){t++}),t},toArray:function(e){return Ra(e,function(t){return t})||[]},only:function(e){if(!kc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ke.Component=mr;ke.Fragment=wv;ke.Profiler=kv;ke.PureComponent=Nc;ke.StrictMode=Sv;ke.Suspense=Tv;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$v;ke.act=Wp;ke.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Mp({},e.props),a=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=Sc.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)Ip.call(t,c)&&!zp.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=s;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];r.children=o}return{$$typeof:Na,type:e.type,key:a,ref:i,props:r,_owner:l}};ke.createContext=function(e){return e={$$typeof:Ev,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Cv,_context:e},e.Consumer=e};ke.createElement=Fp;ke.createFactory=function(e){var t=Fp.bind(null,e);return t.type=e,t};ke.createRef=function(){return{current:null}};ke.forwardRef=function(e){return{$$typeof:Pv,render:e}};ke.isValidElement=kc;ke.lazy=function(e){return{$$typeof:Lv,_payload:{_status:-1,_result:e},_init:Dv}};ke.memo=function(e,t){return{$$typeof:Av,type:e,compare:t===void 0?null:t}};ke.startTransition=function(e){var t=ti.transition;ti.transition={};try{e()}finally{ti.transition=t}};ke.unstable_act=Wp;ke.useCallback=function(e,t){return wt.current.useCallback(e,t)};ke.useContext=function(e){return wt.current.useContext(e)};ke.useDebugValue=function(){};ke.useDeferredValue=function(e){return wt.current.useDeferredValue(e)};ke.useEffect=function(e,t){return wt.current.useEffect(e,t)};ke.useId=function(){return wt.current.useId()};ke.useImperativeHandle=function(e,t,s){return wt.current.useImperativeHandle(e,t,s)};ke.useInsertionEffect=function(e,t){return wt.current.useInsertionEffect(e,t)};ke.useLayoutEffect=function(e,t){return wt.current.useLayoutEffect(e,t)};ke.useMemo=function(e,t){return wt.current.useMemo(e,t)};ke.useReducer=function(e,t,s){return wt.current.useReducer(e,t,s)};ke.useRef=function(e){return wt.current.useRef(e)};ke.useState=function(e){return wt.current.useState(e)};ke.useSyncExternalStore=function(e,t,s){return wt.current.useSyncExternalStore(e,t,s)};ke.useTransition=function(){return wt.current.useTransition()};ke.version="18.3.1";Rp.exports=ke;var u=Rp.exports;const Iv=Ap(u),zv=_v({__proto__:null,default:Iv},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fv=u,Wv=Symbol.for("react.element"),Uv=Symbol.for("react.fragment"),Bv=Object.prototype.hasOwnProperty,qv=Fv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Vv={key:!0,ref:!0,__self:!0,__source:!0};function Up(e,t,s){var r,a={},i=null,l=null;s!==void 0&&(i=""+s),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)Bv.call(t,r)&&!Vv.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:Wv,type:e,key:i,ref:l,props:a,_owner:qv.current}}Gi.Fragment=Uv;Gi.jsx=Up;Gi.jsxs=Up;Lp.exports=Gi;var n=Lp.exports,Bp={exports:{}},zt={},qp={exports:{}},Vp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,P){var w=D.length;D.push(P);e:for(;0<w;){var T=w-1>>>1,B=D[T];if(0<a(B,P))D[T]=P,D[w]=B,w=T;else break e}}function s(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var P=D[0],w=D.pop();if(w!==P){D[0]=w;e:for(var T=0,B=D.length,q=B>>>1;T<q;){var ve=2*(T+1)-1,ze=D[ve],we=ve+1,be=D[we];if(0>a(ze,w))we<B&&0>a(be,ze)?(D[T]=be,D[we]=w,T=we):(D[T]=ze,D[ve]=w,T=ve);else if(we<B&&0>a(be,w))D[T]=be,D[we]=w,T=we;else break e}}return P}function a(D,P){var w=D.sortIndex-P.sortIndex;return w!==0?w:D.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],d=[],h=1,g=null,m=3,_=!1,j=!1,S=!1,N=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(D){for(var P=s(d);P!==null;){if(P.callback===null)r(d);else if(P.startTime<=D)r(d),P.sortIndex=P.expirationTime,t(c,P);else break;P=s(d)}}function x(D){if(S=!1,v(D),!j)if(s(c)!==null)j=!0,ne(C);else{var P=s(d);P!==null&&J(x,P.startTime-D)}}function C(D,P){j=!1,S&&(S=!1,f(E),E=-1),_=!0;var w=m;try{for(v(P),g=s(c);g!==null&&(!(g.expirationTime>P)||D&&!A());){var T=g.callback;if(typeof T=="function"){g.callback=null,m=g.priorityLevel;var B=T(g.expirationTime<=P);P=e.unstable_now(),typeof B=="function"?g.callback=B:g===s(c)&&r(c),v(P)}else r(c);g=s(c)}if(g!==null)var q=!0;else{var ve=s(d);ve!==null&&J(x,ve.startTime-P),q=!1}return q}finally{g=null,m=w,_=!1}}var M=!1,O=null,E=-1,W=5,z=-1;function A(){return!(e.unstable_now()-z<W)}function G(){if(O!==null){var D=e.unstable_now();z=D;var P=!0;try{P=O(!0,D)}finally{P?H():(M=!1,O=null)}}else M=!1}var H;if(typeof p=="function")H=function(){p(G)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Y=V.port2;V.port1.onmessage=G,H=function(){Y.postMessage(null)}}else H=function(){N(G,0)};function ne(D){O=D,M||(M=!0,H())}function J(D,P){E=N(function(){D(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){j||_||(j=!0,ne(C))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return s(c)},e.unstable_next=function(D){switch(m){case 1:case 2:case 3:var P=3;break;default:P=m}var w=m;m=P;try{return D()}finally{m=w}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,P){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var w=m;m=D;try{return P()}finally{m=w}},e.unstable_scheduleCallback=function(D,P,w){var T=e.unstable_now();switch(typeof w=="object"&&w!==null?(w=w.delay,w=typeof w=="number"&&0<w?T+w:T):w=T,D){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=w+B,D={id:h++,callback:P,priorityLevel:D,startTime:w,expirationTime:B,sortIndex:-1},w>T?(D.sortIndex=w,t(d,D),s(c)===null&&D===s(d)&&(S?(f(E),E=-1):S=!0,J(x,w-T))):(D.sortIndex=B,t(c,D),j||_||(j=!0,ne(C))),D},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(D){var P=m;return function(){var w=m;m=P;try{return D.apply(this,arguments)}finally{m=w}}}})(Vp);qp.exports=Vp;var Hv=qp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qv=u,It=Hv;function Q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hp=new Set,na={};function Ns(e,t){nr(e,t),nr(e+"Capture",t)}function nr(e,t){for(na[e]=t,e=0;e<t.length;e++)Hp.add(t[e])}var Sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),po=Object.prototype.hasOwnProperty,Gv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vu={},Hu={};function Yv(e){return po.call(Hu,e)?!0:po.call(Vu,e)?!1:Gv.test(e)?Hu[e]=!0:(Vu[e]=!0,!1)}function Kv(e,t,s,r){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Jv(e,t,s,r){if(t===null||typeof t>"u"||Kv(e,t,s,r))return!0;if(r)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function St(e,t,s,r,a,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ht[e]=new St(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ht[t]=new St(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ht[e]=new St(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ht[e]=new St(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ht[e]=new St(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ht[e]=new St(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ht[e]=new St(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ht[e]=new St(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ht[e]=new St(e,5,!1,e.toLowerCase(),null,!1,!1)});var Cc=/[\-:]([a-z])/g;function Ec(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Cc,Ec);ht[t]=new St(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Cc,Ec);ht[t]=new St(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Cc,Ec);ht[t]=new St(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ht[e]=new St(e,1,!1,e.toLowerCase(),null,!1,!1)});ht.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ht[e]=new St(e,1,!1,e.toLowerCase(),null,!0,!0)});function Pc(e,t,s,r){var a=ht.hasOwnProperty(t)?ht[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Jv(t,s,a,r)&&(s=null),r||a===null?Yv(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):a.mustUseProperty?e[a.propertyName]=s===null?a.type===3?!1:"":s:(t=a.attributeName,r=a.attributeNamespace,s===null?e.removeAttribute(t):(a=a.type,s=a===3||a===4&&s===!0?"":""+s,r?e.setAttributeNS(r,t,s):e.setAttribute(t,s))))}var Pn=Qv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Oa=Symbol.for("react.element"),Ds=Symbol.for("react.portal"),$s=Symbol.for("react.fragment"),Tc=Symbol.for("react.strict_mode"),mo=Symbol.for("react.profiler"),Qp=Symbol.for("react.provider"),Gp=Symbol.for("react.context"),Ac=Symbol.for("react.forward_ref"),ho=Symbol.for("react.suspense"),fo=Symbol.for("react.suspense_list"),Lc=Symbol.for("react.memo"),Rn=Symbol.for("react.lazy"),Yp=Symbol.for("react.offscreen"),Qu=Symbol.iterator;function Sr(e){return e===null||typeof e!="object"?null:(e=Qu&&e[Qu]||e["@@iterator"],typeof e=="function"?e:null)}var Ke=Object.assign,Cl;function Ir(e){if(Cl===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);Cl=t&&t[1]||""}return`
`+Cl+e}var El=!1;function Pl(e,t){if(!e||El)return"";El=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=r.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var c=`
`+a[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{El=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Ir(e):""}function Xv(e){switch(e.tag){case 5:return Ir(e.type);case 16:return Ir("Lazy");case 13:return Ir("Suspense");case 19:return Ir("SuspenseList");case 0:case 2:case 15:return e=Pl(e.type,!1),e;case 11:return e=Pl(e.type.render,!1),e;case 1:return e=Pl(e.type,!0),e;default:return""}}function vo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $s:return"Fragment";case Ds:return"Portal";case mo:return"Profiler";case Tc:return"StrictMode";case ho:return"Suspense";case fo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Gp:return(e.displayName||"Context")+".Consumer";case Qp:return(e._context.displayName||"Context")+".Provider";case Ac:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Lc:return t=e.displayName||null,t!==null?t:vo(e.type)||"Memo";case Rn:t=e._payload,e=e._init;try{return vo(e(t))}catch{}}return null}function Zv(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vo(t);case 8:return t===Tc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Kn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Kp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function eg(e){var t=Kp(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,i=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){r=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ma(e){e._valueTracker||(e._valueTracker=eg(e))}function Jp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),r="";return e&&(r=Kp(e)?e.checked?"true":"false":e.value),e=r,e!==s?(t.setValue(e),!0):!1}function yi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function go(e,t){var s=t.checked;return Ke({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Gu(e,t){var s=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;s=Kn(t.value!=null?t.value:s),e._wrapperState={initialChecked:r,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Xp(e,t){t=t.checked,t!=null&&Pc(e,"checked",t,!1)}function xo(e,t){Xp(e,t);var s=Kn(t.value),r=t.type;if(s!=null)r==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?yo(e,t.type,s):t.hasOwnProperty("defaultValue")&&yo(e,t.type,Kn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Yu(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function yo(e,t,s){(t!=="number"||yi(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var zr=Array.isArray;function Gs(e,t,s,r){if(e=e.options,t){t={};for(var a=0;a<s.length;a++)t["$"+s[a]]=!0;for(s=0;s<e.length;s++)a=t.hasOwnProperty("$"+e[s].value),e[s].selected!==a&&(e[s].selected=a),a&&r&&(e[s].defaultSelected=!0)}else{for(s=""+Kn(s),t=null,a=0;a<e.length;a++){if(e[a].value===s){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function jo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Ke({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ku(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(Q(92));if(zr(s)){if(1<s.length)throw Error(Q(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:Kn(s)}}function Zp(e,t){var s=Kn(t.value),r=Kn(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),r!=null&&(e.defaultValue=""+r)}function Ju(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function em(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?em(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Da,tm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,s,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Da=Da||document.createElement("div"),Da.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Da.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function sa(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Qr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tg=["Webkit","ms","Moz","O"];Object.keys(Qr).forEach(function(e){tg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Qr[t]=Qr[e]})});function nm(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||Qr.hasOwnProperty(e)&&Qr[e]?(""+t).trim():t+"px"}function sm(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var r=s.indexOf("--")===0,a=nm(s,t[s],r);s==="float"&&(s="cssFloat"),r?e.setProperty(s,a):e[s]=a}}var ng=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _o(e,t){if(t){if(ng[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Q(62))}}function No(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wo=null;function Rc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var So=null,Ys=null,Ks=null;function Xu(e){if(e=ka(e)){if(typeof So!="function")throw Error(Q(280));var t=e.stateNode;t&&(t=Zi(t),So(e.stateNode,e.type,t))}}function rm(e){Ys?Ks?Ks.push(e):Ks=[e]:Ys=e}function am(){if(Ys){var e=Ys,t=Ks;if(Ks=Ys=null,Xu(e),t)for(e=0;e<t.length;e++)Xu(t[e])}}function im(e,t){return e(t)}function lm(){}var Tl=!1;function om(e,t,s){if(Tl)return e(t,s);Tl=!0;try{return im(e,t,s)}finally{Tl=!1,(Ys!==null||Ks!==null)&&(lm(),am())}}function ra(e,t){var s=e.stateNode;if(s===null)return null;var r=Zi(s);if(r===null)return null;s=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(Q(231,t,typeof s));return s}var ko=!1;if(Sn)try{var kr={};Object.defineProperty(kr,"passive",{get:function(){ko=!0}}),window.addEventListener("test",kr,kr),window.removeEventListener("test",kr,kr)}catch{ko=!1}function sg(e,t,s,r,a,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(s,d)}catch(h){this.onError(h)}}var Gr=!1,ji=null,bi=!1,Co=null,rg={onError:function(e){Gr=!0,ji=e}};function ag(e,t,s,r,a,i,l,o,c){Gr=!1,ji=null,sg.apply(rg,arguments)}function ig(e,t,s,r,a,i,l,o,c){if(ag.apply(this,arguments),Gr){if(Gr){var d=ji;Gr=!1,ji=null}else throw Error(Q(198));bi||(bi=!0,Co=d)}}function ws(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function cm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Zu(e){if(ws(e)!==e)throw Error(Q(188))}function lg(e){var t=e.alternate;if(!t){if(t=ws(e),t===null)throw Error(Q(188));return t!==e?null:e}for(var s=e,r=t;;){var a=s.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){s=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===s)return Zu(a),e;if(i===r)return Zu(a),t;i=i.sibling}throw Error(Q(188))}if(s.return!==r.return)s=a,r=i;else{for(var l=!1,o=a.child;o;){if(o===s){l=!0,s=a,r=i;break}if(o===r){l=!0,r=a,s=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===s){l=!0,s=i,r=a;break}if(o===r){l=!0,r=i,s=a;break}o=o.sibling}if(!l)throw Error(Q(189))}}if(s.alternate!==r)throw Error(Q(190))}if(s.tag!==3)throw Error(Q(188));return s.stateNode.current===s?e:t}function um(e){return e=lg(e),e!==null?dm(e):null}function dm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=dm(e);if(t!==null)return t;e=e.sibling}return null}var pm=It.unstable_scheduleCallback,ed=It.unstable_cancelCallback,og=It.unstable_shouldYield,cg=It.unstable_requestPaint,et=It.unstable_now,ug=It.unstable_getCurrentPriorityLevel,Oc=It.unstable_ImmediatePriority,mm=It.unstable_UserBlockingPriority,_i=It.unstable_NormalPriority,dg=It.unstable_LowPriority,hm=It.unstable_IdlePriority,Yi=null,pn=null;function pg(e){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(Yi,e,void 0,(e.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:fg,mg=Math.log,hg=Math.LN2;function fg(e){return e>>>=0,e===0?32:31-(mg(e)/hg|0)|0}var $a=64,Ia=4194304;function Fr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ni(e,t){var s=e.pendingLanes;if(s===0)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,l=s&268435455;if(l!==0){var o=l&~a;o!==0?r=Fr(o):(i&=l,i!==0&&(r=Fr(i)))}else l=s&~a,l!==0?r=Fr(l):i!==0&&(r=Fr(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(r&4&&(r|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)s=31-rn(t),a=1<<s,r|=e[s],t&=~a;return r}function vg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gg(e,t){for(var s=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-rn(i),o=1<<l,c=a[l];c===-1?(!(o&s)||o&r)&&(a[l]=vg(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function Eo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function fm(){var e=$a;return $a<<=1,!($a&4194240)&&($a=64),e}function Al(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function wa(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-rn(t),e[t]=s}function xg(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<s;){var a=31-rn(s),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,s&=~i}}function Mc(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var r=31-rn(s),a=1<<r;a&t|e[r]&t&&(e[r]|=t),s&=~a}}var $e=0;function vm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var gm,Dc,xm,ym,jm,Po=!1,za=[],Fn=null,Wn=null,Un=null,aa=new Map,ia=new Map,Mn=[],yg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function td(e,t){switch(e){case"focusin":case"focusout":Fn=null;break;case"dragenter":case"dragleave":Wn=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":aa.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ia.delete(t.pointerId)}}function Cr(e,t,s,r,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:s,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},t!==null&&(t=ka(t),t!==null&&Dc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function jg(e,t,s,r,a){switch(t){case"focusin":return Fn=Cr(Fn,e,t,s,r,a),!0;case"dragenter":return Wn=Cr(Wn,e,t,s,r,a),!0;case"mouseover":return Un=Cr(Un,e,t,s,r,a),!0;case"pointerover":var i=a.pointerId;return aa.set(i,Cr(aa.get(i)||null,e,t,s,r,a)),!0;case"gotpointercapture":return i=a.pointerId,ia.set(i,Cr(ia.get(i)||null,e,t,s,r,a)),!0}return!1}function bm(e){var t=us(e.target);if(t!==null){var s=ws(t);if(s!==null){if(t=s.tag,t===13){if(t=cm(s),t!==null){e.blockedOn=t,jm(e.priority,function(){xm(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ni(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=To(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var r=new s.constructor(s.type,s);wo=r,s.target.dispatchEvent(r),wo=null}else return t=ka(s),t!==null&&Dc(t),e.blockedOn=s,!1;t.shift()}return!0}function nd(e,t,s){ni(e)&&s.delete(t)}function bg(){Po=!1,Fn!==null&&ni(Fn)&&(Fn=null),Wn!==null&&ni(Wn)&&(Wn=null),Un!==null&&ni(Un)&&(Un=null),aa.forEach(nd),ia.forEach(nd)}function Er(e,t){e.blockedOn===t&&(e.blockedOn=null,Po||(Po=!0,It.unstable_scheduleCallback(It.unstable_NormalPriority,bg)))}function la(e){function t(a){return Er(a,e)}if(0<za.length){Er(za[0],e);for(var s=1;s<za.length;s++){var r=za[s];r.blockedOn===e&&(r.blockedOn=null)}}for(Fn!==null&&Er(Fn,e),Wn!==null&&Er(Wn,e),Un!==null&&Er(Un,e),aa.forEach(t),ia.forEach(t),s=0;s<Mn.length;s++)r=Mn[s],r.blockedOn===e&&(r.blockedOn=null);for(;0<Mn.length&&(s=Mn[0],s.blockedOn===null);)bm(s),s.blockedOn===null&&Mn.shift()}var Js=Pn.ReactCurrentBatchConfig,wi=!0;function _g(e,t,s,r){var a=$e,i=Js.transition;Js.transition=null;try{$e=1,$c(e,t,s,r)}finally{$e=a,Js.transition=i}}function Ng(e,t,s,r){var a=$e,i=Js.transition;Js.transition=null;try{$e=4,$c(e,t,s,r)}finally{$e=a,Js.transition=i}}function $c(e,t,s,r){if(wi){var a=To(e,t,s,r);if(a===null)Wl(e,t,r,Si,s),td(e,r);else if(jg(a,e,t,s,r))r.stopPropagation();else if(td(e,r),t&4&&-1<yg.indexOf(e)){for(;a!==null;){var i=ka(a);if(i!==null&&gm(i),i=To(e,t,s,r),i===null&&Wl(e,t,r,Si,s),i===a)break;a=i}a!==null&&r.stopPropagation()}else Wl(e,t,r,null,s)}}var Si=null;function To(e,t,s,r){if(Si=null,e=Rc(r),e=us(e),e!==null)if(t=ws(e),t===null)e=null;else if(s=t.tag,s===13){if(e=cm(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Si=e,null}function _m(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ug()){case Oc:return 1;case mm:return 4;case _i:case dg:return 16;case hm:return 536870912;default:return 16}default:return 16}}var $n=null,Ic=null,si=null;function Nm(){if(si)return si;var e,t=Ic,s=t.length,r,a="value"in $n?$n.value:$n.textContent,i=a.length;for(e=0;e<s&&t[e]===a[e];e++);var l=s-e;for(r=1;r<=l&&t[s-r]===a[i-r];r++);return si=a.slice(e,1<r?1-r:void 0)}function ri(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fa(){return!0}function sd(){return!1}function Ft(e){function t(s,r,a,i,l){this._reactName=s,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(s=e[o],this[o]=s?s(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Fa:sd,this.isPropagationStopped=sd,this}return Ke(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Fa)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Fa)},persist:function(){},isPersistent:Fa}),t}var hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zc=Ft(hr),Sa=Ke({},hr,{view:0,detail:0}),wg=Ft(Sa),Ll,Rl,Pr,Ki=Ke({},Sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Pr&&(Pr&&e.type==="mousemove"?(Ll=e.screenX-Pr.screenX,Rl=e.screenY-Pr.screenY):Rl=Ll=0,Pr=e),Ll)},movementY:function(e){return"movementY"in e?e.movementY:Rl}}),rd=Ft(Ki),Sg=Ke({},Ki,{dataTransfer:0}),kg=Ft(Sg),Cg=Ke({},Sa,{relatedTarget:0}),Ol=Ft(Cg),Eg=Ke({},hr,{animationName:0,elapsedTime:0,pseudoElement:0}),Pg=Ft(Eg),Tg=Ke({},hr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ag=Ft(Tg),Lg=Ke({},hr,{data:0}),ad=Ft(Lg),Rg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Og={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Mg[e])?!!t[e]:!1}function Fc(){return Dg}var $g=Ke({},Sa,{key:function(e){if(e.key){var t=Rg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ri(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Og[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fc,charCode:function(e){return e.type==="keypress"?ri(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ri(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ig=Ft($g),zg=Ke({},Ki,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),id=Ft(zg),Fg=Ke({},Sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fc}),Wg=Ft(Fg),Ug=Ke({},hr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bg=Ft(Ug),qg=Ke({},Ki,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Vg=Ft(qg),Hg=[9,13,27,32],Wc=Sn&&"CompositionEvent"in window,Yr=null;Sn&&"documentMode"in document&&(Yr=document.documentMode);var Qg=Sn&&"TextEvent"in window&&!Yr,wm=Sn&&(!Wc||Yr&&8<Yr&&11>=Yr),ld=" ",od=!1;function Sm(e,t){switch(e){case"keyup":return Hg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function km(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Is=!1;function Gg(e,t){switch(e){case"compositionend":return km(t);case"keypress":return t.which!==32?null:(od=!0,ld);case"textInput":return e=t.data,e===ld&&od?null:e;default:return null}}function Yg(e,t){if(Is)return e==="compositionend"||!Wc&&Sm(e,t)?(e=Nm(),si=Ic=$n=null,Is=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return wm&&t.locale!=="ko"?null:t.data;default:return null}}var Kg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Kg[e.type]:t==="textarea"}function Cm(e,t,s,r){rm(r),t=ki(t,"onChange"),0<t.length&&(s=new zc("onChange","change",null,s,r),e.push({event:s,listeners:t}))}var Kr=null,oa=null;function Jg(e){Im(e,0)}function Ji(e){var t=Ws(e);if(Jp(t))return e}function Xg(e,t){if(e==="change")return t}var Em=!1;if(Sn){var Ml;if(Sn){var Dl="oninput"in document;if(!Dl){var ud=document.createElement("div");ud.setAttribute("oninput","return;"),Dl=typeof ud.oninput=="function"}Ml=Dl}else Ml=!1;Em=Ml&&(!document.documentMode||9<document.documentMode)}function dd(){Kr&&(Kr.detachEvent("onpropertychange",Pm),oa=Kr=null)}function Pm(e){if(e.propertyName==="value"&&Ji(oa)){var t=[];Cm(t,oa,e,Rc(e)),om(Jg,t)}}function Zg(e,t,s){e==="focusin"?(dd(),Kr=t,oa=s,Kr.attachEvent("onpropertychange",Pm)):e==="focusout"&&dd()}function ex(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ji(oa)}function tx(e,t){if(e==="click")return Ji(t)}function nx(e,t){if(e==="input"||e==="change")return Ji(t)}function sx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ln=typeof Object.is=="function"?Object.is:sx;function ca(e,t){if(ln(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var a=s[r];if(!po.call(t,a)||!ln(e[a],t[a]))return!1}return!0}function pd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function md(e,t){var s=pd(e);e=0;for(var r;s;){if(s.nodeType===3){if(r=e+s.textContent.length,e<=t&&r>=t)return{node:s,offset:t-e};e=r}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=pd(s)}}function Tm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Tm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Am(){for(var e=window,t=yi();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=yi(e.document)}return t}function Uc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function rx(e){var t=Am(),s=e.focusedElem,r=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&Tm(s.ownerDocument.documentElement,s)){if(r!==null&&Uc(s)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=s.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=md(s,i);var l=md(s,r);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ax=Sn&&"documentMode"in document&&11>=document.documentMode,zs=null,Ao=null,Jr=null,Lo=!1;function hd(e,t,s){var r=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Lo||zs==null||zs!==yi(r)||(r=zs,"selectionStart"in r&&Uc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Jr&&ca(Jr,r)||(Jr=r,r=ki(Ao,"onSelect"),0<r.length&&(t=new zc("onSelect","select",null,t,s),e.push({event:t,listeners:r}),t.target=zs)))}function Wa(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Fs={animationend:Wa("Animation","AnimationEnd"),animationiteration:Wa("Animation","AnimationIteration"),animationstart:Wa("Animation","AnimationStart"),transitionend:Wa("Transition","TransitionEnd")},$l={},Lm={};Sn&&(Lm=document.createElement("div").style,"AnimationEvent"in window||(delete Fs.animationend.animation,delete Fs.animationiteration.animation,delete Fs.animationstart.animation),"TransitionEvent"in window||delete Fs.transitionend.transition);function Xi(e){if($l[e])return $l[e];if(!Fs[e])return e;var t=Fs[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Lm)return $l[e]=t[s];return e}var Rm=Xi("animationend"),Om=Xi("animationiteration"),Mm=Xi("animationstart"),Dm=Xi("transitionend"),$m=new Map,fd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xn(e,t){$m.set(e,t),Ns(t,[e])}for(var Il=0;Il<fd.length;Il++){var zl=fd[Il],ix=zl.toLowerCase(),lx=zl[0].toUpperCase()+zl.slice(1);Xn(ix,"on"+lx)}Xn(Rm,"onAnimationEnd");Xn(Om,"onAnimationIteration");Xn(Mm,"onAnimationStart");Xn("dblclick","onDoubleClick");Xn("focusin","onFocus");Xn("focusout","onBlur");Xn(Dm,"onTransitionEnd");nr("onMouseEnter",["mouseout","mouseover"]);nr("onMouseLeave",["mouseout","mouseover"]);nr("onPointerEnter",["pointerout","pointerover"]);nr("onPointerLeave",["pointerout","pointerover"]);Ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ns("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ox=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wr));function vd(e,t,s){var r=e.type||"unknown-event";e.currentTarget=s,ig(r,t,void 0,e),e.currentTarget=null}function Im(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var r=e[s],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var l=r.length-1;0<=l;l--){var o=r[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;vd(a,o,d),i=c}else for(l=0;l<r.length;l++){if(o=r[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;vd(a,o,d),i=c}}}if(bi)throw e=Co,bi=!1,Co=null,e}function qe(e,t){var s=t[$o];s===void 0&&(s=t[$o]=new Set);var r=e+"__bubble";s.has(r)||(zm(t,e,2,!1),s.add(r))}function Fl(e,t,s){var r=0;t&&(r|=4),zm(s,e,r,t)}var Ua="_reactListening"+Math.random().toString(36).slice(2);function ua(e){if(!e[Ua]){e[Ua]=!0,Hp.forEach(function(s){s!=="selectionchange"&&(ox.has(s)||Fl(s,!1,e),Fl(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ua]||(t[Ua]=!0,Fl("selectionchange",!1,t))}}function zm(e,t,s,r){switch(_m(t)){case 1:var a=_g;break;case 4:a=Ng;break;default:a=$c}s=a.bind(null,t,s,e),a=void 0,!ko||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,s,{capture:!0,passive:a}):e.addEventListener(t,s,!0):a!==void 0?e.addEventListener(t,s,{passive:a}):e.addEventListener(t,s,!1)}function Wl(e,t,s,r,a){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var o=r.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=r.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;l=l.return}for(;o!==null;){if(l=us(o),l===null)return;if(c=l.tag,c===5||c===6){r=i=l;continue e}o=o.parentNode}}r=r.return}om(function(){var d=i,h=Rc(s),g=[];e:{var m=$m.get(e);if(m!==void 0){var _=zc,j=e;switch(e){case"keypress":if(ri(s)===0)break e;case"keydown":case"keyup":_=Ig;break;case"focusin":j="focus",_=Ol;break;case"focusout":j="blur",_=Ol;break;case"beforeblur":case"afterblur":_=Ol;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=rd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=kg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=Wg;break;case Rm:case Om:case Mm:_=Pg;break;case Dm:_=Bg;break;case"scroll":_=wg;break;case"wheel":_=Vg;break;case"copy":case"cut":case"paste":_=Ag;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=id}var S=(t&4)!==0,N=!S&&e==="scroll",f=S?m!==null?m+"Capture":null:m;S=[];for(var p=d,v;p!==null;){v=p;var x=v.stateNode;if(v.tag===5&&x!==null&&(v=x,f!==null&&(x=ra(p,f),x!=null&&S.push(da(p,x,v)))),N)break;p=p.return}0<S.length&&(m=new _(m,j,null,s,h),g.push({event:m,listeners:S}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",m&&s!==wo&&(j=s.relatedTarget||s.fromElement)&&(us(j)||j[kn]))break e;if((_||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,_?(j=s.relatedTarget||s.toElement,_=d,j=j?us(j):null,j!==null&&(N=ws(j),j!==N||j.tag!==5&&j.tag!==6)&&(j=null)):(_=null,j=d),_!==j)){if(S=rd,x="onMouseLeave",f="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(S=id,x="onPointerLeave",f="onPointerEnter",p="pointer"),N=_==null?m:Ws(_),v=j==null?m:Ws(j),m=new S(x,p+"leave",_,s,h),m.target=N,m.relatedTarget=v,x=null,us(h)===d&&(S=new S(f,p+"enter",j,s,h),S.target=v,S.relatedTarget=N,x=S),N=x,_&&j)t:{for(S=_,f=j,p=0,v=S;v;v=As(v))p++;for(v=0,x=f;x;x=As(x))v++;for(;0<p-v;)S=As(S),p--;for(;0<v-p;)f=As(f),v--;for(;p--;){if(S===f||f!==null&&S===f.alternate)break t;S=As(S),f=As(f)}S=null}else S=null;_!==null&&gd(g,m,_,S,!1),j!==null&&N!==null&&gd(g,N,j,S,!0)}}e:{if(m=d?Ws(d):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var C=Xg;else if(cd(m))if(Em)C=nx;else{C=ex;var M=Zg}else(_=m.nodeName)&&_.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(C=tx);if(C&&(C=C(e,d))){Cm(g,C,s,h);break e}M&&M(e,m,d),e==="focusout"&&(M=m._wrapperState)&&M.controlled&&m.type==="number"&&yo(m,"number",m.value)}switch(M=d?Ws(d):window,e){case"focusin":(cd(M)||M.contentEditable==="true")&&(zs=M,Ao=d,Jr=null);break;case"focusout":Jr=Ao=zs=null;break;case"mousedown":Lo=!0;break;case"contextmenu":case"mouseup":case"dragend":Lo=!1,hd(g,s,h);break;case"selectionchange":if(ax)break;case"keydown":case"keyup":hd(g,s,h)}var O;if(Wc)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Is?Sm(e,s)&&(E="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(E="onCompositionStart");E&&(wm&&s.locale!=="ko"&&(Is||E!=="onCompositionStart"?E==="onCompositionEnd"&&Is&&(O=Nm()):($n=h,Ic="value"in $n?$n.value:$n.textContent,Is=!0)),M=ki(d,E),0<M.length&&(E=new ad(E,e,null,s,h),g.push({event:E,listeners:M}),O?E.data=O:(O=km(s),O!==null&&(E.data=O)))),(O=Qg?Gg(e,s):Yg(e,s))&&(d=ki(d,"onBeforeInput"),0<d.length&&(h=new ad("onBeforeInput","beforeinput",null,s,h),g.push({event:h,listeners:d}),h.data=O))}Im(g,t)})}function da(e,t,s){return{instance:e,listener:t,currentTarget:s}}function ki(e,t){for(var s=t+"Capture",r=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=ra(e,s),i!=null&&r.unshift(da(e,i,a)),i=ra(e,t),i!=null&&r.push(da(e,i,a))),e=e.return}return r}function As(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function gd(e,t,s,r,a){for(var i=t._reactName,l=[];s!==null&&s!==r;){var o=s,c=o.alternate,d=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&d!==null&&(o=d,a?(c=ra(s,i),c!=null&&l.unshift(da(s,c,o))):a||(c=ra(s,i),c!=null&&l.push(da(s,c,o)))),s=s.return}l.length!==0&&e.push({event:t,listeners:l})}var cx=/\r\n?/g,ux=/\u0000|\uFFFD/g;function xd(e){return(typeof e=="string"?e:""+e).replace(cx,`
`).replace(ux,"")}function Ba(e,t,s){if(t=xd(t),xd(e)!==t&&s)throw Error(Q(425))}function Ci(){}var Ro=null,Oo=null;function Mo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Do=typeof setTimeout=="function"?setTimeout:void 0,dx=typeof clearTimeout=="function"?clearTimeout:void 0,yd=typeof Promise=="function"?Promise:void 0,px=typeof queueMicrotask=="function"?queueMicrotask:typeof yd<"u"?function(e){return yd.resolve(null).then(e).catch(mx)}:Do;function mx(e){setTimeout(function(){throw e})}function Ul(e,t){var s=t,r=0;do{var a=s.nextSibling;if(e.removeChild(s),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(r===0){e.removeChild(a),la(t);return}r--}else s!=="$"&&s!=="$?"&&s!=="$!"||r++;s=a}while(s);la(t)}function Bn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function jd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var fr=Math.random().toString(36).slice(2),dn="__reactFiber$"+fr,pa="__reactProps$"+fr,kn="__reactContainer$"+fr,$o="__reactEvents$"+fr,hx="__reactListeners$"+fr,fx="__reactHandles$"+fr;function us(e){var t=e[dn];if(t)return t;for(var s=e.parentNode;s;){if(t=s[kn]||s[dn]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=jd(e);e!==null;){if(s=e[dn])return s;e=jd(e)}return t}e=s,s=e.parentNode}return null}function ka(e){return e=e[dn]||e[kn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ws(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Q(33))}function Zi(e){return e[pa]||null}var Io=[],Us=-1;function Zn(e){return{current:e}}function Ve(e){0>Us||(e.current=Io[Us],Io[Us]=null,Us--)}function Ue(e,t){Us++,Io[Us]=e.current,e.current=t}var Jn={},xt=Zn(Jn),At=Zn(!1),gs=Jn;function sr(e,t){var s=e.type.contextTypes;if(!s)return Jn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in s)a[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Lt(e){return e=e.childContextTypes,e!=null}function Ei(){Ve(At),Ve(xt)}function bd(e,t,s){if(xt.current!==Jn)throw Error(Q(168));Ue(xt,t),Ue(At,s)}function Fm(e,t,s){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return s;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(Q(108,Zv(e)||"Unknown",a));return Ke({},s,r)}function Pi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Jn,gs=xt.current,Ue(xt,e),Ue(At,At.current),!0}function _d(e,t,s){var r=e.stateNode;if(!r)throw Error(Q(169));s?(e=Fm(e,t,gs),r.__reactInternalMemoizedMergedChildContext=e,Ve(At),Ve(xt),Ue(xt,e)):Ve(At),Ue(At,s)}var jn=null,el=!1,Bl=!1;function Wm(e){jn===null?jn=[e]:jn.push(e)}function vx(e){el=!0,Wm(e)}function es(){if(!Bl&&jn!==null){Bl=!0;var e=0,t=$e;try{var s=jn;for($e=1;e<s.length;e++){var r=s[e];do r=r(!0);while(r!==null)}jn=null,el=!1}catch(a){throw jn!==null&&(jn=jn.slice(e+1)),pm(Oc,es),a}finally{$e=t,Bl=!1}}return null}var Bs=[],qs=0,Ti=null,Ai=0,Bt=[],qt=0,xs=null,bn=1,_n="";function is(e,t){Bs[qs++]=Ai,Bs[qs++]=Ti,Ti=e,Ai=t}function Um(e,t,s){Bt[qt++]=bn,Bt[qt++]=_n,Bt[qt++]=xs,xs=e;var r=bn;e=_n;var a=32-rn(r)-1;r&=~(1<<a),s+=1;var i=32-rn(t)+a;if(30<i){var l=a-a%5;i=(r&(1<<l)-1).toString(32),r>>=l,a-=l,bn=1<<32-rn(t)+a|s<<a|r,_n=i+e}else bn=1<<i|s<<a|r,_n=e}function Bc(e){e.return!==null&&(is(e,1),Um(e,1,0))}function qc(e){for(;e===Ti;)Ti=Bs[--qs],Bs[qs]=null,Ai=Bs[--qs],Bs[qs]=null;for(;e===xs;)xs=Bt[--qt],Bt[qt]=null,_n=Bt[--qt],Bt[qt]=null,bn=Bt[--qt],Bt[qt]=null}var $t=null,Dt=null,He=!1,tn=null;function Bm(e,t){var s=Ht(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function Nd(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,$t=e,Dt=Bn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,$t=e,Dt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=xs!==null?{id:bn,overflow:_n}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=Ht(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,$t=e,Dt=null,!0):!1;default:return!1}}function zo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Fo(e){if(He){var t=Dt;if(t){var s=t;if(!Nd(e,t)){if(zo(e))throw Error(Q(418));t=Bn(s.nextSibling);var r=$t;t&&Nd(e,t)?Bm(r,s):(e.flags=e.flags&-4097|2,He=!1,$t=e)}}else{if(zo(e))throw Error(Q(418));e.flags=e.flags&-4097|2,He=!1,$t=e}}}function wd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;$t=e}function qa(e){if(e!==$t)return!1;if(!He)return wd(e),He=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Mo(e.type,e.memoizedProps)),t&&(t=Dt)){if(zo(e))throw qm(),Error(Q(418));for(;t;)Bm(e,t),t=Bn(t.nextSibling)}if(wd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){Dt=Bn(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}Dt=null}}else Dt=$t?Bn(e.stateNode.nextSibling):null;return!0}function qm(){for(var e=Dt;e;)e=Bn(e.nextSibling)}function rr(){Dt=$t=null,He=!1}function Vc(e){tn===null?tn=[e]:tn.push(e)}var gx=Pn.ReactCurrentBatchConfig;function Tr(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(Q(309));var r=s.stateNode}if(!r)throw Error(Q(147,e));var a=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(Q(284));if(!s._owner)throw Error(Q(290,e))}return e}function Va(e,t){throw e=Object.prototype.toString.call(t),Error(Q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Sd(e){var t=e._init;return t(e._payload)}function Vm(e){function t(f,p){if(e){var v=f.deletions;v===null?(f.deletions=[p],f.flags|=16):v.push(p)}}function s(f,p){if(!e)return null;for(;p!==null;)t(f,p),p=p.sibling;return null}function r(f,p){for(f=new Map;p!==null;)p.key!==null?f.set(p.key,p):f.set(p.index,p),p=p.sibling;return f}function a(f,p){return f=Qn(f,p),f.index=0,f.sibling=null,f}function i(f,p,v){return f.index=v,e?(v=f.alternate,v!==null?(v=v.index,v<p?(f.flags|=2,p):v):(f.flags|=2,p)):(f.flags|=1048576,p)}function l(f){return e&&f.alternate===null&&(f.flags|=2),f}function o(f,p,v,x){return p===null||p.tag!==6?(p=Kl(v,f.mode,x),p.return=f,p):(p=a(p,v),p.return=f,p)}function c(f,p,v,x){var C=v.type;return C===$s?h(f,p,v.props.children,x,v.key):p!==null&&(p.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Rn&&Sd(C)===p.type)?(x=a(p,v.props),x.ref=Tr(f,p,v),x.return=f,x):(x=di(v.type,v.key,v.props,null,f.mode,x),x.ref=Tr(f,p,v),x.return=f,x)}function d(f,p,v,x){return p===null||p.tag!==4||p.stateNode.containerInfo!==v.containerInfo||p.stateNode.implementation!==v.implementation?(p=Jl(v,f.mode,x),p.return=f,p):(p=a(p,v.children||[]),p.return=f,p)}function h(f,p,v,x,C){return p===null||p.tag!==7?(p=fs(v,f.mode,x,C),p.return=f,p):(p=a(p,v),p.return=f,p)}function g(f,p,v){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Kl(""+p,f.mode,v),p.return=f,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Oa:return v=di(p.type,p.key,p.props,null,f.mode,v),v.ref=Tr(f,null,p),v.return=f,v;case Ds:return p=Jl(p,f.mode,v),p.return=f,p;case Rn:var x=p._init;return g(f,x(p._payload),v)}if(zr(p)||Sr(p))return p=fs(p,f.mode,v,null),p.return=f,p;Va(f,p)}return null}function m(f,p,v,x){var C=p!==null?p.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return C!==null?null:o(f,p,""+v,x);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Oa:return v.key===C?c(f,p,v,x):null;case Ds:return v.key===C?d(f,p,v,x):null;case Rn:return C=v._init,m(f,p,C(v._payload),x)}if(zr(v)||Sr(v))return C!==null?null:h(f,p,v,x,null);Va(f,v)}return null}function _(f,p,v,x,C){if(typeof x=="string"&&x!==""||typeof x=="number")return f=f.get(v)||null,o(p,f,""+x,C);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Oa:return f=f.get(x.key===null?v:x.key)||null,c(p,f,x,C);case Ds:return f=f.get(x.key===null?v:x.key)||null,d(p,f,x,C);case Rn:var M=x._init;return _(f,p,v,M(x._payload),C)}if(zr(x)||Sr(x))return f=f.get(v)||null,h(p,f,x,C,null);Va(p,x)}return null}function j(f,p,v,x){for(var C=null,M=null,O=p,E=p=0,W=null;O!==null&&E<v.length;E++){O.index>E?(W=O,O=null):W=O.sibling;var z=m(f,O,v[E],x);if(z===null){O===null&&(O=W);break}e&&O&&z.alternate===null&&t(f,O),p=i(z,p,E),M===null?C=z:M.sibling=z,M=z,O=W}if(E===v.length)return s(f,O),He&&is(f,E),C;if(O===null){for(;E<v.length;E++)O=g(f,v[E],x),O!==null&&(p=i(O,p,E),M===null?C=O:M.sibling=O,M=O);return He&&is(f,E),C}for(O=r(f,O);E<v.length;E++)W=_(O,f,E,v[E],x),W!==null&&(e&&W.alternate!==null&&O.delete(W.key===null?E:W.key),p=i(W,p,E),M===null?C=W:M.sibling=W,M=W);return e&&O.forEach(function(A){return t(f,A)}),He&&is(f,E),C}function S(f,p,v,x){var C=Sr(v);if(typeof C!="function")throw Error(Q(150));if(v=C.call(v),v==null)throw Error(Q(151));for(var M=C=null,O=p,E=p=0,W=null,z=v.next();O!==null&&!z.done;E++,z=v.next()){O.index>E?(W=O,O=null):W=O.sibling;var A=m(f,O,z.value,x);if(A===null){O===null&&(O=W);break}e&&O&&A.alternate===null&&t(f,O),p=i(A,p,E),M===null?C=A:M.sibling=A,M=A,O=W}if(z.done)return s(f,O),He&&is(f,E),C;if(O===null){for(;!z.done;E++,z=v.next())z=g(f,z.value,x),z!==null&&(p=i(z,p,E),M===null?C=z:M.sibling=z,M=z);return He&&is(f,E),C}for(O=r(f,O);!z.done;E++,z=v.next())z=_(O,f,E,z.value,x),z!==null&&(e&&z.alternate!==null&&O.delete(z.key===null?E:z.key),p=i(z,p,E),M===null?C=z:M.sibling=z,M=z);return e&&O.forEach(function(G){return t(f,G)}),He&&is(f,E),C}function N(f,p,v,x){if(typeof v=="object"&&v!==null&&v.type===$s&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Oa:e:{for(var C=v.key,M=p;M!==null;){if(M.key===C){if(C=v.type,C===$s){if(M.tag===7){s(f,M.sibling),p=a(M,v.props.children),p.return=f,f=p;break e}}else if(M.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Rn&&Sd(C)===M.type){s(f,M.sibling),p=a(M,v.props),p.ref=Tr(f,M,v),p.return=f,f=p;break e}s(f,M);break}else t(f,M);M=M.sibling}v.type===$s?(p=fs(v.props.children,f.mode,x,v.key),p.return=f,f=p):(x=di(v.type,v.key,v.props,null,f.mode,x),x.ref=Tr(f,p,v),x.return=f,f=x)}return l(f);case Ds:e:{for(M=v.key;p!==null;){if(p.key===M)if(p.tag===4&&p.stateNode.containerInfo===v.containerInfo&&p.stateNode.implementation===v.implementation){s(f,p.sibling),p=a(p,v.children||[]),p.return=f,f=p;break e}else{s(f,p);break}else t(f,p);p=p.sibling}p=Jl(v,f.mode,x),p.return=f,f=p}return l(f);case Rn:return M=v._init,N(f,p,M(v._payload),x)}if(zr(v))return j(f,p,v,x);if(Sr(v))return S(f,p,v,x);Va(f,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,p!==null&&p.tag===6?(s(f,p.sibling),p=a(p,v),p.return=f,f=p):(s(f,p),p=Kl(v,f.mode,x),p.return=f,f=p),l(f)):s(f,p)}return N}var ar=Vm(!0),Hm=Vm(!1),Li=Zn(null),Ri=null,Vs=null,Hc=null;function Qc(){Hc=Vs=Ri=null}function Gc(e){var t=Li.current;Ve(Li),e._currentValue=t}function Wo(e,t,s){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===s)break;e=e.return}}function Xs(e,t){Ri=e,Hc=Vs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Tt=!0),e.firstContext=null)}function Gt(e){var t=e._currentValue;if(Hc!==e)if(e={context:e,memoizedValue:t,next:null},Vs===null){if(Ri===null)throw Error(Q(308));Vs=e,Ri.dependencies={lanes:0,firstContext:e}}else Vs=Vs.next=e;return t}var ds=null;function Yc(e){ds===null?ds=[e]:ds.push(e)}function Qm(e,t,s,r){var a=t.interleaved;return a===null?(s.next=s,Yc(t)):(s.next=a.next,a.next=s),t.interleaved=s,Cn(e,r)}function Cn(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var On=!1;function Kc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function wn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function qn(e,t,s){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Oe&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Cn(e,s)}return a=r.interleaved,a===null?(t.next=t,Yc(r)):(t.next=a.next,a.next=t),r.interleaved=t,Cn(e,s)}function ai(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,s|=r,t.lanes=s,Mc(e,s)}}function kd(e,t){var s=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,s===r)){var a=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var l={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?a=i=l:i=i.next=l,s=s.next}while(s!==null);i===null?a=i=t:i=i.next=t}else a=i=t;s={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Oi(e,t,s,r){var a=e.updateQueue;On=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var h=e.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==l&&(o===null?h.firstBaseUpdate=d:o.next=d,h.lastBaseUpdate=c))}if(i!==null){var g=a.baseState;l=0,h=d=c=null,o=i;do{var m=o.lane,_=o.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:_,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var j=e,S=o;switch(m=t,_=s,S.tag){case 1:if(j=S.payload,typeof j=="function"){g=j.call(_,g,m);break e}g=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=S.payload,m=typeof j=="function"?j.call(_,g,m):j,m==null)break e;g=Ke({},g,m);break e;case 2:On=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,m=a.effects,m===null?a.effects=[o]:m.push(o))}else _={eventTime:_,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(d=h=_,c=g):h=h.next=_,l|=m;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;m=o,o=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(h===null&&(c=g),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=h,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);js|=l,e.lanes=l,e.memoizedState=g}}function Cd(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=s,typeof a!="function")throw Error(Q(191,a));a.call(r)}}}var Ca={},mn=Zn(Ca),ma=Zn(Ca),ha=Zn(Ca);function ps(e){if(e===Ca)throw Error(Q(174));return e}function Jc(e,t){switch(Ue(ha,t),Ue(ma,e),Ue(mn,Ca),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:bo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=bo(t,e)}Ve(mn),Ue(mn,t)}function ir(){Ve(mn),Ve(ma),Ve(ha)}function Ym(e){ps(ha.current);var t=ps(mn.current),s=bo(t,e.type);t!==s&&(Ue(ma,e),Ue(mn,s))}function Xc(e){ma.current===e&&(Ve(mn),Ve(ma))}var Qe=Zn(0);function Mi(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ql=[];function Zc(){for(var e=0;e<ql.length;e++)ql[e]._workInProgressVersionPrimary=null;ql.length=0}var ii=Pn.ReactCurrentDispatcher,Vl=Pn.ReactCurrentBatchConfig,ys=0,Ge=null,it=null,ct=null,Di=!1,Xr=!1,fa=0,xx=0;function ft(){throw Error(Q(321))}function eu(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!ln(e[s],t[s]))return!1;return!0}function tu(e,t,s,r,a,i){if(ys=i,Ge=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ii.current=e===null||e.memoizedState===null?_x:Nx,e=s(r,a),Xr){i=0;do{if(Xr=!1,fa=0,25<=i)throw Error(Q(301));i+=1,ct=it=null,t.updateQueue=null,ii.current=wx,e=s(r,a)}while(Xr)}if(ii.current=$i,t=it!==null&&it.next!==null,ys=0,ct=it=Ge=null,Di=!1,t)throw Error(Q(300));return e}function nu(){var e=fa!==0;return fa=0,e}function un(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?Ge.memoizedState=ct=e:ct=ct.next=e,ct}function Yt(){if(it===null){var e=Ge.alternate;e=e!==null?e.memoizedState:null}else e=it.next;var t=ct===null?Ge.memoizedState:ct.next;if(t!==null)ct=t,it=e;else{if(e===null)throw Error(Q(310));it=e,e={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},ct===null?Ge.memoizedState=ct=e:ct=ct.next=e}return ct}function va(e,t){return typeof t=="function"?t(e):t}function Hl(e){var t=Yt(),s=t.queue;if(s===null)throw Error(Q(311));s.lastRenderedReducer=e;var r=it,a=r.baseQueue,i=s.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}r.baseQueue=a=i,s.pending=null}if(a!==null){i=a.next,r=r.baseState;var o=l=null,c=null,d=i;do{var h=d.lane;if((ys&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var g={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=g,l=r):c=c.next=g,Ge.lanes|=h,js|=h}d=d.next}while(d!==null&&d!==i);c===null?l=r:c.next=o,ln(r,t.memoizedState)||(Tt=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=c,s.lastRenderedState=r}if(e=s.interleaved,e!==null){a=e;do i=a.lane,Ge.lanes|=i,js|=i,a=a.next;while(a!==e)}else a===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Ql(e){var t=Yt(),s=t.queue;if(s===null)throw Error(Q(311));s.lastRenderedReducer=e;var r=s.dispatch,a=s.pending,i=t.memoizedState;if(a!==null){s.pending=null;var l=a=a.next;do i=e(i,l.action),l=l.next;while(l!==a);ln(i,t.memoizedState)||(Tt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),s.lastRenderedState=i}return[i,r]}function Km(){}function Jm(e,t){var s=Ge,r=Yt(),a=t(),i=!ln(r.memoizedState,a);if(i&&(r.memoizedState=a,Tt=!0),r=r.queue,su(eh.bind(null,s,r,e),[e]),r.getSnapshot!==t||i||ct!==null&&ct.memoizedState.tag&1){if(s.flags|=2048,ga(9,Zm.bind(null,s,r,a,t),void 0,null),ut===null)throw Error(Q(349));ys&30||Xm(s,t,a)}return a}function Xm(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Ge.updateQueue,t===null?(t={lastEffect:null,stores:null},Ge.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Zm(e,t,s,r){t.value=s,t.getSnapshot=r,th(t)&&nh(e)}function eh(e,t,s){return s(function(){th(t)&&nh(e)})}function th(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!ln(e,s)}catch{return!0}}function nh(e){var t=Cn(e,1);t!==null&&an(t,e,1,-1)}function Ed(e){var t=un();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:e},t.queue=e,e=e.dispatch=bx.bind(null,Ge,e),[t.memoizedState,e]}function ga(e,t,s,r){return e={tag:e,create:t,destroy:s,deps:r,next:null},t=Ge.updateQueue,t===null?(t={lastEffect:null,stores:null},Ge.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(r=s.next,s.next=e,e.next=r,t.lastEffect=e)),e}function sh(){return Yt().memoizedState}function li(e,t,s,r){var a=un();Ge.flags|=e,a.memoizedState=ga(1|t,s,void 0,r===void 0?null:r)}function tl(e,t,s,r){var a=Yt();r=r===void 0?null:r;var i=void 0;if(it!==null){var l=it.memoizedState;if(i=l.destroy,r!==null&&eu(r,l.deps)){a.memoizedState=ga(t,s,i,r);return}}Ge.flags|=e,a.memoizedState=ga(1|t,s,i,r)}function Pd(e,t){return li(8390656,8,e,t)}function su(e,t){return tl(2048,8,e,t)}function rh(e,t){return tl(4,2,e,t)}function ah(e,t){return tl(4,4,e,t)}function ih(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function lh(e,t,s){return s=s!=null?s.concat([e]):null,tl(4,4,ih.bind(null,t,e),s)}function ru(){}function oh(e,t){var s=Yt();t=t===void 0?null:t;var r=s.memoizedState;return r!==null&&t!==null&&eu(t,r[1])?r[0]:(s.memoizedState=[e,t],e)}function ch(e,t){var s=Yt();t=t===void 0?null:t;var r=s.memoizedState;return r!==null&&t!==null&&eu(t,r[1])?r[0]:(e=e(),s.memoizedState=[e,t],e)}function uh(e,t,s){return ys&21?(ln(s,t)||(s=fm(),Ge.lanes|=s,js|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Tt=!0),e.memoizedState=s)}function yx(e,t){var s=$e;$e=s!==0&&4>s?s:4,e(!0);var r=Vl.transition;Vl.transition={};try{e(!1),t()}finally{$e=s,Vl.transition=r}}function dh(){return Yt().memoizedState}function jx(e,t,s){var r=Hn(e);if(s={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null},ph(e))mh(t,s);else if(s=Qm(e,t,s,r),s!==null){var a=_t();an(s,e,r,a),hh(s,t,r)}}function bx(e,t,s){var r=Hn(e),a={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null};if(ph(e))mh(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,s);if(a.hasEagerState=!0,a.eagerState=o,ln(o,l)){var c=t.interleaved;c===null?(a.next=a,Yc(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}s=Qm(e,t,a,r),s!==null&&(a=_t(),an(s,e,r,a),hh(s,t,r))}}function ph(e){var t=e.alternate;return e===Ge||t!==null&&t===Ge}function mh(e,t){Xr=Di=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function hh(e,t,s){if(s&4194240){var r=t.lanes;r&=e.pendingLanes,s|=r,t.lanes=s,Mc(e,s)}}var $i={readContext:Gt,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},_x={readContext:Gt,useCallback:function(e,t){return un().memoizedState=[e,t===void 0?null:t],e},useContext:Gt,useEffect:Pd,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,li(4194308,4,ih.bind(null,t,e),s)},useLayoutEffect:function(e,t){return li(4194308,4,e,t)},useInsertionEffect:function(e,t){return li(4,2,e,t)},useMemo:function(e,t){var s=un();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var r=un();return t=s!==void 0?s(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=jx.bind(null,Ge,e),[r.memoizedState,e]},useRef:function(e){var t=un();return e={current:e},t.memoizedState=e},useState:Ed,useDebugValue:ru,useDeferredValue:function(e){return un().memoizedState=e},useTransition:function(){var e=Ed(!1),t=e[0];return e=yx.bind(null,e[1]),un().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var r=Ge,a=un();if(He){if(s===void 0)throw Error(Q(407));s=s()}else{if(s=t(),ut===null)throw Error(Q(349));ys&30||Xm(r,t,s)}a.memoizedState=s;var i={value:s,getSnapshot:t};return a.queue=i,Pd(eh.bind(null,r,i,e),[e]),r.flags|=2048,ga(9,Zm.bind(null,r,i,s,t),void 0,null),s},useId:function(){var e=un(),t=ut.identifierPrefix;if(He){var s=_n,r=bn;s=(r&~(1<<32-rn(r)-1)).toString(32)+s,t=":"+t+"R"+s,s=fa++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=xx++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Nx={readContext:Gt,useCallback:oh,useContext:Gt,useEffect:su,useImperativeHandle:lh,useInsertionEffect:rh,useLayoutEffect:ah,useMemo:ch,useReducer:Hl,useRef:sh,useState:function(){return Hl(va)},useDebugValue:ru,useDeferredValue:function(e){var t=Yt();return uh(t,it.memoizedState,e)},useTransition:function(){var e=Hl(va)[0],t=Yt().memoizedState;return[e,t]},useMutableSource:Km,useSyncExternalStore:Jm,useId:dh,unstable_isNewReconciler:!1},wx={readContext:Gt,useCallback:oh,useContext:Gt,useEffect:su,useImperativeHandle:lh,useInsertionEffect:rh,useLayoutEffect:ah,useMemo:ch,useReducer:Ql,useRef:sh,useState:function(){return Ql(va)},useDebugValue:ru,useDeferredValue:function(e){var t=Yt();return it===null?t.memoizedState=e:uh(t,it.memoizedState,e)},useTransition:function(){var e=Ql(va)[0],t=Yt().memoizedState;return[e,t]},useMutableSource:Km,useSyncExternalStore:Jm,useId:dh,unstable_isNewReconciler:!1};function Zt(e,t){if(e&&e.defaultProps){t=Ke({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function Uo(e,t,s,r){t=e.memoizedState,s=s(r,t),s=s==null?t:Ke({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var nl={isMounted:function(e){return(e=e._reactInternals)?ws(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var r=_t(),a=Hn(e),i=wn(r,a);i.payload=t,s!=null&&(i.callback=s),t=qn(e,i,a),t!==null&&(an(t,e,a,r),ai(t,e,a))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var r=_t(),a=Hn(e),i=wn(r,a);i.tag=1,i.payload=t,s!=null&&(i.callback=s),t=qn(e,i,a),t!==null&&(an(t,e,a,r),ai(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=_t(),r=Hn(e),a=wn(s,r);a.tag=2,t!=null&&(a.callback=t),t=qn(e,a,r),t!==null&&(an(t,e,r,s),ai(t,e,r))}};function Td(e,t,s,r,a,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,l):t.prototype&&t.prototype.isPureReactComponent?!ca(s,r)||!ca(a,i):!0}function fh(e,t,s){var r=!1,a=Jn,i=t.contextType;return typeof i=="object"&&i!==null?i=Gt(i):(a=Lt(t)?gs:xt.current,r=t.contextTypes,i=(r=r!=null)?sr(e,a):Jn),t=new t(s,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=nl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Ad(e,t,s,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,r),t.state!==e&&nl.enqueueReplaceState(t,t.state,null)}function Bo(e,t,s,r){var a=e.stateNode;a.props=s,a.state=e.memoizedState,a.refs={},Kc(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Gt(i):(i=Lt(t)?gs:xt.current,a.context=sr(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Uo(e,t,i,s),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&nl.enqueueReplaceState(a,a.state,null),Oi(e,s,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function lr(e,t){try{var s="",r=t;do s+=Xv(r),r=r.return;while(r);var a=s}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Gl(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function qo(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var Sx=typeof WeakMap=="function"?WeakMap:Map;function vh(e,t,s){s=wn(-1,s),s.tag=3,s.payload={element:null};var r=t.value;return s.callback=function(){zi||(zi=!0,ec=r),qo(e,t)},s}function gh(e,t,s){s=wn(-1,s),s.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;s.payload=function(){return r(a)},s.callback=function(){qo(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){qo(e,t),typeof r!="function"&&(Vn===null?Vn=new Set([this]):Vn.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),s}function Ld(e,t,s){var r=e.pingCache;if(r===null){r=e.pingCache=new Sx;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(s)||(a.add(s),e=zx.bind(null,e,t,s),t.then(e,e))}function Rd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Od(e,t,s,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=wn(-1,1),t.tag=2,qn(s,t,1))),s.lanes|=1),e)}var kx=Pn.ReactCurrentOwner,Tt=!1;function bt(e,t,s,r){t.child=e===null?Hm(t,null,s,r):ar(t,e.child,s,r)}function Md(e,t,s,r,a){s=s.render;var i=t.ref;return Xs(t,a),r=tu(e,t,s,r,i,a),s=nu(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,En(e,t,a)):(He&&s&&Bc(t),t.flags|=1,bt(e,t,r,a),t.child)}function Dd(e,t,s,r,a){if(e===null){var i=s.type;return typeof i=="function"&&!pu(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=i,xh(e,t,i,r,a)):(e=di(s.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var l=i.memoizedProps;if(s=s.compare,s=s!==null?s:ca,s(l,r)&&e.ref===t.ref)return En(e,t,a)}return t.flags|=1,e=Qn(i,r),e.ref=t.ref,e.return=t,t.child=e}function xh(e,t,s,r,a){if(e!==null){var i=e.memoizedProps;if(ca(i,r)&&e.ref===t.ref)if(Tt=!1,t.pendingProps=r=i,(e.lanes&a)!==0)e.flags&131072&&(Tt=!0);else return t.lanes=e.lanes,En(e,t,a)}return Vo(e,t,s,r,a)}function yh(e,t,s){var r=t.pendingProps,a=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(Qs,Mt),Mt|=s;else{if(!(s&1073741824))return e=i!==null?i.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ue(Qs,Mt),Mt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:s,Ue(Qs,Mt),Mt|=r}else i!==null?(r=i.baseLanes|s,t.memoizedState=null):r=s,Ue(Qs,Mt),Mt|=r;return bt(e,t,a,s),t.child}function jh(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Vo(e,t,s,r,a){var i=Lt(s)?gs:xt.current;return i=sr(t,i),Xs(t,a),s=tu(e,t,s,r,i,a),r=nu(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,En(e,t,a)):(He&&r&&Bc(t),t.flags|=1,bt(e,t,s,a),t.child)}function $d(e,t,s,r,a){if(Lt(s)){var i=!0;Pi(t)}else i=!1;if(Xs(t,a),t.stateNode===null)oi(e,t),fh(t,s,r),Bo(t,s,r,a),r=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,d=s.contextType;typeof d=="object"&&d!==null?d=Gt(d):(d=Lt(s)?gs:xt.current,d=sr(t,d));var h=s.getDerivedStateFromProps,g=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function";g||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==r||c!==d)&&Ad(t,l,r,d),On=!1;var m=t.memoizedState;l.state=m,Oi(t,r,l,a),c=t.memoizedState,o!==r||m!==c||At.current||On?(typeof h=="function"&&(Uo(t,s,h,r),c=t.memoizedState),(o=On||Td(t,s,o,r,m,c,d))?(g||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),l.props=r,l.state=c,l.context=d,r=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,Gm(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:Zt(t.type,o),l.props=d,g=t.pendingProps,m=l.context,c=s.contextType,typeof c=="object"&&c!==null?c=Gt(c):(c=Lt(s)?gs:xt.current,c=sr(t,c));var _=s.getDerivedStateFromProps;(h=typeof _=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==g||m!==c)&&Ad(t,l,r,c),On=!1,m=t.memoizedState,l.state=m,Oi(t,r,l,a);var j=t.memoizedState;o!==g||m!==j||At.current||On?(typeof _=="function"&&(Uo(t,s,_,r),j=t.memoizedState),(d=On||Td(t,s,d,r,m,j,c)||!1)?(h||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,j,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,j,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=j),l.props=r,l.state=j,l.context=c,r=d):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return Ho(e,t,s,r,i,a)}function Ho(e,t,s,r,a,i){jh(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return a&&_d(t,s,!1),En(e,t,i);r=t.stateNode,kx.current=t;var o=l&&typeof s.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=ar(t,e.child,null,i),t.child=ar(t,null,o,i)):bt(e,t,o,i),t.memoizedState=r.state,a&&_d(t,s,!0),t.child}function bh(e){var t=e.stateNode;t.pendingContext?bd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&bd(e,t.context,!1),Jc(e,t.containerInfo)}function Id(e,t,s,r,a){return rr(),Vc(a),t.flags|=256,bt(e,t,s,r),t.child}var Qo={dehydrated:null,treeContext:null,retryLane:0};function Go(e){return{baseLanes:e,cachePool:null,transitions:null}}function _h(e,t,s){var r=t.pendingProps,a=Qe.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ue(Qe,a&1),e===null)return Fo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,i?(r=t.mode,i=t.child,l={mode:"hidden",children:l},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=al(l,r,0,null),e=fs(e,r,s,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Go(s),t.memoizedState=Qo,e):au(t,l));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return Cx(e,t,l,r,o,a,s);if(i){i=r.fallback,l=t.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:r.children};return!(l&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Qn(a,c),r.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=Qn(o,i):(i=fs(i,l,s,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,l=e.child.memoizedState,l=l===null?Go(s):{baseLanes:l.baseLanes|s,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~s,t.memoizedState=Qo,r}return i=e.child,e=i.sibling,r=Qn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=s),r.return=t,r.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=r,t.memoizedState=null,r}function au(e,t){return t=al({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ha(e,t,s,r){return r!==null&&Vc(r),ar(t,e.child,null,s),e=au(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Cx(e,t,s,r,a,i,l){if(s)return t.flags&256?(t.flags&=-257,r=Gl(Error(Q(422))),Ha(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=al({mode:"visible",children:r.children},a,0,null),i=fs(i,a,l,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&ar(t,e.child,null,l),t.child.memoizedState=Go(l),t.memoizedState=Qo,i);if(!(t.mode&1))return Ha(e,t,l,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(Q(419)),r=Gl(i,r,void 0),Ha(e,t,l,r)}if(o=(l&e.childLanes)!==0,Tt||o){if(r=ut,r!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Cn(e,a),an(r,e,a,-1))}return du(),r=Gl(Error(Q(421))),Ha(e,t,l,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Fx.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Dt=Bn(a.nextSibling),$t=t,He=!0,tn=null,e!==null&&(Bt[qt++]=bn,Bt[qt++]=_n,Bt[qt++]=xs,bn=e.id,_n=e.overflow,xs=t),t=au(t,r.children),t.flags|=4096,t)}function zd(e,t,s){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Wo(e.return,t,s)}function Yl(e,t,s,r,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=s,i.tailMode=a)}function Nh(e,t,s){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(bt(e,t,r.children,s),r=Qe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zd(e,s,t);else if(e.tag===19)zd(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ue(Qe,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(s=t.child,a=null;s!==null;)e=s.alternate,e!==null&&Mi(e)===null&&(a=s),s=s.sibling;s=a,s===null?(a=t.child,t.child=null):(a=s.sibling,s.sibling=null),Yl(t,!1,a,s,i);break;case"backwards":for(s=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Mi(e)===null){t.child=a;break}e=a.sibling,a.sibling=s,s=a,a=e}Yl(t,!0,s,null,i);break;case"together":Yl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function oi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function En(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),js|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Q(153));if(t.child!==null){for(e=t.child,s=Qn(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Qn(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Ex(e,t,s){switch(t.tag){case 3:bh(t),rr();break;case 5:Ym(t);break;case 1:Lt(t.type)&&Pi(t);break;case 4:Jc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ue(Li,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ue(Qe,Qe.current&1),t.flags|=128,null):s&t.child.childLanes?_h(e,t,s):(Ue(Qe,Qe.current&1),e=En(e,t,s),e!==null?e.sibling:null);Ue(Qe,Qe.current&1);break;case 19:if(r=(s&t.childLanes)!==0,e.flags&128){if(r)return Nh(e,t,s);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ue(Qe,Qe.current),r)break;return null;case 22:case 23:return t.lanes=0,yh(e,t,s)}return En(e,t,s)}var wh,Yo,Sh,kh;wh=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Yo=function(){};Sh=function(e,t,s,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,ps(mn.current);var i=null;switch(s){case"input":a=go(e,a),r=go(e,r),i=[];break;case"select":a=Ke({},a,{value:void 0}),r=Ke({},r,{value:void 0}),i=[];break;case"textarea":a=jo(e,a),r=jo(e,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ci)}_o(s,r);var l;s=null;for(d in a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var o=a[d];for(l in o)o.hasOwnProperty(l)&&(s||(s={}),s[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(na.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(o=a!=null?a[d]:void 0,r.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(s||(s={}),s[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(s||(s={}),s[l]=c[l])}else s||(i||(i=[]),i.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(na.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&qe("scroll",e),i||o===c||(i=[])):(i=i||[]).push(d,c))}s&&(i=i||[]).push("style",s);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};kh=function(e,t,s,r){s!==r&&(t.flags|=4)};function Ar(e,t){if(!He)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function vt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,r=0;if(t)for(var a=e.child;a!==null;)s|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)s|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=s,t}function Px(e,t,s){var r=t.pendingProps;switch(qc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(t),null;case 1:return Lt(t.type)&&Ei(),vt(t),null;case 3:return r=t.stateNode,ir(),Ve(At),Ve(xt),Zc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(qa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,tn!==null&&(sc(tn),tn=null))),Yo(e,t),vt(t),null;case 5:Xc(t);var a=ps(ha.current);if(s=t.type,e!==null&&t.stateNode!=null)Sh(e,t,s,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Q(166));return vt(t),null}if(e=ps(mn.current),qa(t)){r=t.stateNode,s=t.type;var i=t.memoizedProps;switch(r[dn]=t,r[pa]=i,e=(t.mode&1)!==0,s){case"dialog":qe("cancel",r),qe("close",r);break;case"iframe":case"object":case"embed":qe("load",r);break;case"video":case"audio":for(a=0;a<Wr.length;a++)qe(Wr[a],r);break;case"source":qe("error",r);break;case"img":case"image":case"link":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"input":Gu(r,i),qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},qe("invalid",r);break;case"textarea":Ku(r,i),qe("invalid",r)}_o(s,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&Ba(r.textContent,o,e),a=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Ba(r.textContent,o,e),a=["children",""+o]):na.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&qe("scroll",r)}switch(s){case"input":Ma(r),Yu(r,i,!0);break;case"textarea":Ma(r),Ju(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ci)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=em(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(s,{is:r.is}):(e=l.createElement(s),s==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,s),e[dn]=t,e[pa]=r,wh(e,t,!1,!1),t.stateNode=e;e:{switch(l=No(s,r),s){case"dialog":qe("cancel",e),qe("close",e),a=r;break;case"iframe":case"object":case"embed":qe("load",e),a=r;break;case"video":case"audio":for(a=0;a<Wr.length;a++)qe(Wr[a],e);a=r;break;case"source":qe("error",e),a=r;break;case"img":case"image":case"link":qe("error",e),qe("load",e),a=r;break;case"details":qe("toggle",e),a=r;break;case"input":Gu(e,r),a=go(e,r),qe("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Ke({},r,{value:void 0}),qe("invalid",e);break;case"textarea":Ku(e,r),a=jo(e,r),qe("invalid",e);break;default:a=r}_o(s,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?sm(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&tm(e,c)):i==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&sa(e,c):typeof c=="number"&&sa(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(na.hasOwnProperty(i)?c!=null&&i==="onScroll"&&qe("scroll",e):c!=null&&Pc(e,i,c,l))}switch(s){case"input":Ma(e),Yu(e,r,!1);break;case"textarea":Ma(e),Ju(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Kn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Gs(e,!!r.multiple,i,!1):r.defaultValue!=null&&Gs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Ci)}switch(s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return vt(t),null;case 6:if(e&&t.stateNode!=null)kh(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Q(166));if(s=ps(ha.current),ps(mn.current),qa(t)){if(r=t.stateNode,s=t.memoizedProps,r[dn]=t,(i=r.nodeValue!==s)&&(e=$t,e!==null))switch(e.tag){case 3:Ba(r.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ba(r.nodeValue,s,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(s.nodeType===9?s:s.ownerDocument).createTextNode(r),r[dn]=t,t.stateNode=r}return vt(t),null;case 13:if(Ve(Qe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(He&&Dt!==null&&t.mode&1&&!(t.flags&128))qm(),rr(),t.flags|=98560,i=!1;else if(i=qa(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(Q(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Q(317));i[dn]=t}else rr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;vt(t),i=!1}else tn!==null&&(sc(tn),tn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Qe.current&1?lt===0&&(lt=3):du())),t.updateQueue!==null&&(t.flags|=4),vt(t),null);case 4:return ir(),Yo(e,t),e===null&&ua(t.stateNode.containerInfo),vt(t),null;case 10:return Gc(t.type._context),vt(t),null;case 17:return Lt(t.type)&&Ei(),vt(t),null;case 19:if(Ve(Qe),i=t.memoizedState,i===null)return vt(t),null;if(r=(t.flags&128)!==0,l=i.rendering,l===null)if(r)Ar(i,!1);else{if(lt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Mi(e),l!==null){for(t.flags|=128,Ar(i,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=s,s=t.child;s!==null;)i=s,e=r,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Ue(Qe,Qe.current&1|2),t.child}e=e.sibling}i.tail!==null&&et()>or&&(t.flags|=128,r=!0,Ar(i,!1),t.lanes=4194304)}else{if(!r)if(e=Mi(l),e!==null){if(t.flags|=128,r=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),Ar(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!He)return vt(t),null}else 2*et()-i.renderingStartTime>or&&s!==1073741824&&(t.flags|=128,r=!0,Ar(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(s=i.last,s!==null?s.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=et(),t.sibling=null,s=Qe.current,Ue(Qe,r?s&1|2:s&1),t):(vt(t),null);case 22:case 23:return uu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Mt&1073741824&&(vt(t),t.subtreeFlags&6&&(t.flags|=8192)):vt(t),null;case 24:return null;case 25:return null}throw Error(Q(156,t.tag))}function Tx(e,t){switch(qc(t),t.tag){case 1:return Lt(t.type)&&Ei(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ir(),Ve(At),Ve(xt),Zc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Xc(t),null;case 13:if(Ve(Qe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Q(340));rr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ve(Qe),null;case 4:return ir(),null;case 10:return Gc(t.type._context),null;case 22:case 23:return uu(),null;case 24:return null;default:return null}}var Qa=!1,gt=!1,Ax=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Hs(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(r){Je(e,t,r)}else s.current=null}function Ko(e,t,s){try{s()}catch(r){Je(e,t,r)}}var Fd=!1;function Lx(e,t){if(Ro=wi,e=Am(),Uc(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var r=s.getSelection&&s.getSelection();if(r&&r.rangeCount!==0){s=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var l=0,o=-1,c=-1,d=0,h=0,g=e,m=null;t:for(;;){for(var _;g!==s||a!==0&&g.nodeType!==3||(o=l+a),g!==i||r!==0&&g.nodeType!==3||(c=l+r),g.nodeType===3&&(l+=g.nodeValue.length),(_=g.firstChild)!==null;)m=g,g=_;for(;;){if(g===e)break t;if(m===s&&++d===a&&(o=l),m===i&&++h===r&&(c=l),(_=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=_}s=o===-1||c===-1?null:{start:o,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(Oo={focusedElem:e,selectionRange:s},wi=!1,ie=t;ie!==null;)if(t=ie,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ie=e;else for(;ie!==null;){t=ie;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var S=j.memoizedProps,N=j.memoizedState,f=t.stateNode,p=f.getSnapshotBeforeUpdate(t.elementType===t.type?S:Zt(t.type,S),N);f.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(x){Je(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,ie=e;break}ie=t.return}return j=Fd,Fd=!1,j}function Zr(e,t,s){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Ko(t,s,i)}a=a.next}while(a!==r)}}function sl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var r=s.create;s.destroy=r()}s=s.next}while(s!==t)}}function Jo(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function Ch(e){var t=e.alternate;t!==null&&(e.alternate=null,Ch(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[dn],delete t[pa],delete t[$o],delete t[hx],delete t[fx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Eh(e){return e.tag===5||e.tag===3||e.tag===4}function Wd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Eh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xo(e,t,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Ci));else if(r!==4&&(e=e.child,e!==null))for(Xo(e,t,s),e=e.sibling;e!==null;)Xo(e,t,s),e=e.sibling}function Zo(e,t,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Zo(e,t,s),e=e.sibling;e!==null;)Zo(e,t,s),e=e.sibling}var pt=null,en=!1;function Ln(e,t,s){for(s=s.child;s!==null;)Ph(e,t,s),s=s.sibling}function Ph(e,t,s){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(Yi,s)}catch{}switch(s.tag){case 5:gt||Hs(s,t);case 6:var r=pt,a=en;pt=null,Ln(e,t,s),pt=r,en=a,pt!==null&&(en?(e=pt,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):pt.removeChild(s.stateNode));break;case 18:pt!==null&&(en?(e=pt,s=s.stateNode,e.nodeType===8?Ul(e.parentNode,s):e.nodeType===1&&Ul(e,s),la(e)):Ul(pt,s.stateNode));break;case 4:r=pt,a=en,pt=s.stateNode.containerInfo,en=!0,Ln(e,t,s),pt=r,en=a;break;case 0:case 11:case 14:case 15:if(!gt&&(r=s.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Ko(s,t,l),a=a.next}while(a!==r)}Ln(e,t,s);break;case 1:if(!gt&&(Hs(s,t),r=s.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=s.memoizedProps,r.state=s.memoizedState,r.componentWillUnmount()}catch(o){Je(s,t,o)}Ln(e,t,s);break;case 21:Ln(e,t,s);break;case 22:s.mode&1?(gt=(r=gt)||s.memoizedState!==null,Ln(e,t,s),gt=r):Ln(e,t,s);break;default:Ln(e,t,s)}}function Ud(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Ax),t.forEach(function(r){var a=Wx.bind(null,e,r);s.has(r)||(s.add(r),r.then(a,a))})}}function Jt(e,t){var s=t.deletions;if(s!==null)for(var r=0;r<s.length;r++){var a=s[r];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:pt=o.stateNode,en=!1;break e;case 3:pt=o.stateNode.containerInfo,en=!0;break e;case 4:pt=o.stateNode.containerInfo,en=!0;break e}o=o.return}if(pt===null)throw Error(Q(160));Ph(i,l,a),pt=null,en=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Je(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Th(t,e),t=t.sibling}function Th(e,t){var s=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Jt(t,e),cn(e),r&4){try{Zr(3,e,e.return),sl(3,e)}catch(S){Je(e,e.return,S)}try{Zr(5,e,e.return)}catch(S){Je(e,e.return,S)}}break;case 1:Jt(t,e),cn(e),r&512&&s!==null&&Hs(s,s.return);break;case 5:if(Jt(t,e),cn(e),r&512&&s!==null&&Hs(s,s.return),e.flags&32){var a=e.stateNode;try{sa(a,"")}catch(S){Je(e,e.return,S)}}if(r&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,l=s!==null?s.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&Xp(a,i),No(o,l);var d=No(o,i);for(l=0;l<c.length;l+=2){var h=c[l],g=c[l+1];h==="style"?sm(a,g):h==="dangerouslySetInnerHTML"?tm(a,g):h==="children"?sa(a,g):Pc(a,h,g,d)}switch(o){case"input":xo(a,i);break;case"textarea":Zp(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?Gs(a,!!i.multiple,_,!1):m!==!!i.multiple&&(i.defaultValue!=null?Gs(a,!!i.multiple,i.defaultValue,!0):Gs(a,!!i.multiple,i.multiple?[]:"",!1))}a[pa]=i}catch(S){Je(e,e.return,S)}}break;case 6:if(Jt(t,e),cn(e),r&4){if(e.stateNode===null)throw Error(Q(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(S){Je(e,e.return,S)}}break;case 3:if(Jt(t,e),cn(e),r&4&&s!==null&&s.memoizedState.isDehydrated)try{la(t.containerInfo)}catch(S){Je(e,e.return,S)}break;case 4:Jt(t,e),cn(e);break;case 13:Jt(t,e),cn(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(ou=et())),r&4&&Ud(e);break;case 22:if(h=s!==null&&s.memoizedState!==null,e.mode&1?(gt=(d=gt)||h,Jt(t,e),gt=d):Jt(t,e),cn(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(ie=e,h=e.child;h!==null;){for(g=ie=h;ie!==null;){switch(m=ie,_=m.child,m.tag){case 0:case 11:case 14:case 15:Zr(4,m,m.return);break;case 1:Hs(m,m.return);var j=m.stateNode;if(typeof j.componentWillUnmount=="function"){r=m,s=m.return;try{t=r,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(S){Je(r,s,S)}}break;case 5:Hs(m,m.return);break;case 22:if(m.memoizedState!==null){qd(g);continue}}_!==null?(_.return=m,ie=_):qd(g)}h=h.sibling}e:for(h=null,g=e;;){if(g.tag===5){if(h===null){h=g;try{a=g.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=g.stateNode,c=g.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=nm("display",l))}catch(S){Je(e,e.return,S)}}}else if(g.tag===6){if(h===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(S){Je(e,e.return,S)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;h===g&&(h=null),g=g.return}h===g&&(h=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Jt(t,e),cn(e),r&4&&Ud(e);break;case 21:break;default:Jt(t,e),cn(e)}}function cn(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(Eh(s)){var r=s;break e}s=s.return}throw Error(Q(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(sa(a,""),r.flags&=-33);var i=Wd(e);Zo(e,i,a);break;case 3:case 4:var l=r.stateNode.containerInfo,o=Wd(e);Xo(e,o,l);break;default:throw Error(Q(161))}}catch(c){Je(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Rx(e,t,s){ie=e,Ah(e)}function Ah(e,t,s){for(var r=(e.mode&1)!==0;ie!==null;){var a=ie,i=a.child;if(a.tag===22&&r){var l=a.memoizedState!==null||Qa;if(!l){var o=a.alternate,c=o!==null&&o.memoizedState!==null||gt;o=Qa;var d=gt;if(Qa=l,(gt=c)&&!d)for(ie=a;ie!==null;)l=ie,c=l.child,l.tag===22&&l.memoizedState!==null?Vd(a):c!==null?(c.return=l,ie=c):Vd(a);for(;i!==null;)ie=i,Ah(i),i=i.sibling;ie=a,Qa=o,gt=d}Bd(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,ie=i):Bd(e)}}function Bd(e){for(;ie!==null;){var t=ie;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:gt||sl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!gt)if(s===null)r.componentDidMount();else{var a=t.elementType===t.type?s.memoizedProps:Zt(t.type,s.memoizedProps);r.componentDidUpdate(a,s.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Cd(t,i,r);break;case 3:var l=t.updateQueue;if(l!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}Cd(t,l,s)}break;case 5:var o=t.stateNode;if(s===null&&t.flags&4){s=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var g=h.dehydrated;g!==null&&la(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}gt||t.flags&512&&Jo(t)}catch(m){Je(t,t.return,m)}}if(t===e){ie=null;break}if(s=t.sibling,s!==null){s.return=t.return,ie=s;break}ie=t.return}}function qd(e){for(;ie!==null;){var t=ie;if(t===e){ie=null;break}var s=t.sibling;if(s!==null){s.return=t.return,ie=s;break}ie=t.return}}function Vd(e){for(;ie!==null;){var t=ie;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{sl(4,t)}catch(c){Je(t,s,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(c){Je(t,a,c)}}var i=t.return;try{Jo(t)}catch(c){Je(t,i,c)}break;case 5:var l=t.return;try{Jo(t)}catch(c){Je(t,l,c)}}}catch(c){Je(t,t.return,c)}if(t===e){ie=null;break}var o=t.sibling;if(o!==null){o.return=t.return,ie=o;break}ie=t.return}}var Ox=Math.ceil,Ii=Pn.ReactCurrentDispatcher,iu=Pn.ReactCurrentOwner,Qt=Pn.ReactCurrentBatchConfig,Oe=0,ut=null,rt=null,mt=0,Mt=0,Qs=Zn(0),lt=0,xa=null,js=0,rl=0,lu=0,ea=null,Pt=null,ou=0,or=1/0,yn=null,zi=!1,ec=null,Vn=null,Ga=!1,In=null,Fi=0,ta=0,tc=null,ci=-1,ui=0;function _t(){return Oe&6?et():ci!==-1?ci:ci=et()}function Hn(e){return e.mode&1?Oe&2&&mt!==0?mt&-mt:gx.transition!==null?(ui===0&&(ui=fm()),ui):(e=$e,e!==0||(e=window.event,e=e===void 0?16:_m(e.type)),e):1}function an(e,t,s,r){if(50<ta)throw ta=0,tc=null,Error(Q(185));wa(e,s,r),(!(Oe&2)||e!==ut)&&(e===ut&&(!(Oe&2)&&(rl|=s),lt===4&&Dn(e,mt)),Rt(e,r),s===1&&Oe===0&&!(t.mode&1)&&(or=et()+500,el&&es()))}function Rt(e,t){var s=e.callbackNode;gg(e,t);var r=Ni(e,e===ut?mt:0);if(r===0)s!==null&&ed(s),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(s!=null&&ed(s),t===1)e.tag===0?vx(Hd.bind(null,e)):Wm(Hd.bind(null,e)),px(function(){!(Oe&6)&&es()}),s=null;else{switch(vm(r)){case 1:s=Oc;break;case 4:s=mm;break;case 16:s=_i;break;case 536870912:s=hm;break;default:s=_i}s=zh(s,Lh.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function Lh(e,t){if(ci=-1,ui=0,Oe&6)throw Error(Q(327));var s=e.callbackNode;if(Zs()&&e.callbackNode!==s)return null;var r=Ni(e,e===ut?mt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Wi(e,r);else{t=r;var a=Oe;Oe|=2;var i=Oh();(ut!==e||mt!==t)&&(yn=null,or=et()+500,hs(e,t));do try{$x();break}catch(o){Rh(e,o)}while(!0);Qc(),Ii.current=i,Oe=a,rt!==null?t=0:(ut=null,mt=0,t=lt)}if(t!==0){if(t===2&&(a=Eo(e),a!==0&&(r=a,t=nc(e,a))),t===1)throw s=xa,hs(e,0),Dn(e,r),Rt(e,et()),s;if(t===6)Dn(e,r);else{if(a=e.current.alternate,!(r&30)&&!Mx(a)&&(t=Wi(e,r),t===2&&(i=Eo(e),i!==0&&(r=i,t=nc(e,i))),t===1))throw s=xa,hs(e,0),Dn(e,r),Rt(e,et()),s;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(Q(345));case 2:ls(e,Pt,yn);break;case 3:if(Dn(e,r),(r&130023424)===r&&(t=ou+500-et(),10<t)){if(Ni(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){_t(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Do(ls.bind(null,e,Pt,yn),t);break}ls(e,Pt,yn);break;case 4:if(Dn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var l=31-rn(r);i=1<<l,l=t[l],l>a&&(a=l),r&=~i}if(r=a,r=et()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ox(r/1960))-r,10<r){e.timeoutHandle=Do(ls.bind(null,e,Pt,yn),r);break}ls(e,Pt,yn);break;case 5:ls(e,Pt,yn);break;default:throw Error(Q(329))}}}return Rt(e,et()),e.callbackNode===s?Lh.bind(null,e):null}function nc(e,t){var s=ea;return e.current.memoizedState.isDehydrated&&(hs(e,t).flags|=256),e=Wi(e,t),e!==2&&(t=Pt,Pt=s,t!==null&&sc(t)),e}function sc(e){Pt===null?Pt=e:Pt.push.apply(Pt,e)}function Mx(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var r=0;r<s.length;r++){var a=s[r],i=a.getSnapshot;a=a.value;try{if(!ln(i(),a))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Dn(e,t){for(t&=~lu,t&=~rl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-rn(t),r=1<<s;e[s]=-1,t&=~r}}function Hd(e){if(Oe&6)throw Error(Q(327));Zs();var t=Ni(e,0);if(!(t&1))return Rt(e,et()),null;var s=Wi(e,t);if(e.tag!==0&&s===2){var r=Eo(e);r!==0&&(t=r,s=nc(e,r))}if(s===1)throw s=xa,hs(e,0),Dn(e,t),Rt(e,et()),s;if(s===6)throw Error(Q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ls(e,Pt,yn),Rt(e,et()),null}function cu(e,t){var s=Oe;Oe|=1;try{return e(t)}finally{Oe=s,Oe===0&&(or=et()+500,el&&es())}}function bs(e){In!==null&&In.tag===0&&!(Oe&6)&&Zs();var t=Oe;Oe|=1;var s=Qt.transition,r=$e;try{if(Qt.transition=null,$e=1,e)return e()}finally{$e=r,Qt.transition=s,Oe=t,!(Oe&6)&&es()}}function uu(){Mt=Qs.current,Ve(Qs)}function hs(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,dx(s)),rt!==null)for(s=rt.return;s!==null;){var r=s;switch(qc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ei();break;case 3:ir(),Ve(At),Ve(xt),Zc();break;case 5:Xc(r);break;case 4:ir();break;case 13:Ve(Qe);break;case 19:Ve(Qe);break;case 10:Gc(r.type._context);break;case 22:case 23:uu()}s=s.return}if(ut=e,rt=e=Qn(e.current,null),mt=Mt=t,lt=0,xa=null,lu=rl=js=0,Pt=ea=null,ds!==null){for(t=0;t<ds.length;t++)if(s=ds[t],r=s.interleaved,r!==null){s.interleaved=null;var a=r.next,i=s.pending;if(i!==null){var l=i.next;i.next=a,r.next=l}s.pending=r}ds=null}return e}function Rh(e,t){do{var s=rt;try{if(Qc(),ii.current=$i,Di){for(var r=Ge.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Di=!1}if(ys=0,ct=it=Ge=null,Xr=!1,fa=0,iu.current=null,s===null||s.return===null){lt=1,xa=t,rt=null;break}e:{var i=e,l=s.return,o=s,c=t;if(t=mt,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=o,g=h.tag;if(!(h.mode&1)&&(g===0||g===11||g===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=Rd(l);if(_!==null){_.flags&=-257,Od(_,l,o,i,t),_.mode&1&&Ld(i,d,t),t=_,c=d;var j=t.updateQueue;if(j===null){var S=new Set;S.add(c),t.updateQueue=S}else j.add(c);break e}else{if(!(t&1)){Ld(i,d,t),du();break e}c=Error(Q(426))}}else if(He&&o.mode&1){var N=Rd(l);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Od(N,l,o,i,t),Vc(lr(c,o));break e}}i=c=lr(c,o),lt!==4&&(lt=2),ea===null?ea=[i]:ea.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var f=vh(i,c,t);kd(i,f);break e;case 1:o=c;var p=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Vn===null||!Vn.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t;var x=gh(i,o,t);kd(i,x);break e}}i=i.return}while(i!==null)}Dh(s)}catch(C){t=C,rt===s&&s!==null&&(rt=s=s.return);continue}break}while(!0)}function Oh(){var e=Ii.current;return Ii.current=$i,e===null?$i:e}function du(){(lt===0||lt===3||lt===2)&&(lt=4),ut===null||!(js&268435455)&&!(rl&268435455)||Dn(ut,mt)}function Wi(e,t){var s=Oe;Oe|=2;var r=Oh();(ut!==e||mt!==t)&&(yn=null,hs(e,t));do try{Dx();break}catch(a){Rh(e,a)}while(!0);if(Qc(),Oe=s,Ii.current=r,rt!==null)throw Error(Q(261));return ut=null,mt=0,lt}function Dx(){for(;rt!==null;)Mh(rt)}function $x(){for(;rt!==null&&!og();)Mh(rt)}function Mh(e){var t=Ih(e.alternate,e,Mt);e.memoizedProps=e.pendingProps,t===null?Dh(e):rt=t,iu.current=null}function Dh(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=Tx(s,t),s!==null){s.flags&=32767,rt=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{lt=6,rt=null;return}}else if(s=Px(s,t,Mt),s!==null){rt=s;return}if(t=t.sibling,t!==null){rt=t;return}rt=t=e}while(t!==null);lt===0&&(lt=5)}function ls(e,t,s){var r=$e,a=Qt.transition;try{Qt.transition=null,$e=1,Ix(e,t,s,r)}finally{Qt.transition=a,$e=r}return null}function Ix(e,t,s,r){do Zs();while(In!==null);if(Oe&6)throw Error(Q(327));s=e.finishedWork;var a=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(Q(177));e.callbackNode=null,e.callbackPriority=0;var i=s.lanes|s.childLanes;if(xg(e,i),e===ut&&(rt=ut=null,mt=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Ga||(Ga=!0,zh(_i,function(){return Zs(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=Qt.transition,Qt.transition=null;var l=$e;$e=1;var o=Oe;Oe|=4,iu.current=null,Lx(e,s),Th(s,e),rx(Oo),wi=!!Ro,Oo=Ro=null,e.current=s,Rx(s),cg(),Oe=o,$e=l,Qt.transition=i}else e.current=s;if(Ga&&(Ga=!1,In=e,Fi=a),i=e.pendingLanes,i===0&&(Vn=null),pg(s.stateNode),Rt(e,et()),t!==null)for(r=e.onRecoverableError,s=0;s<t.length;s++)a=t[s],r(a.value,{componentStack:a.stack,digest:a.digest});if(zi)throw zi=!1,e=ec,ec=null,e;return Fi&1&&e.tag!==0&&Zs(),i=e.pendingLanes,i&1?e===tc?ta++:(ta=0,tc=e):ta=0,es(),null}function Zs(){if(In!==null){var e=vm(Fi),t=Qt.transition,s=$e;try{if(Qt.transition=null,$e=16>e?16:e,In===null)var r=!1;else{if(e=In,In=null,Fi=0,Oe&6)throw Error(Q(331));var a=Oe;for(Oe|=4,ie=e.current;ie!==null;){var i=ie,l=i.child;if(ie.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(ie=d;ie!==null;){var h=ie;switch(h.tag){case 0:case 11:case 15:Zr(8,h,i)}var g=h.child;if(g!==null)g.return=h,ie=g;else for(;ie!==null;){h=ie;var m=h.sibling,_=h.return;if(Ch(h),h===d){ie=null;break}if(m!==null){m.return=_,ie=m;break}ie=_}}}var j=i.alternate;if(j!==null){var S=j.child;if(S!==null){j.child=null;do{var N=S.sibling;S.sibling=null,S=N}while(S!==null)}}ie=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,ie=l;else e:for(;ie!==null;){if(i=ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zr(9,i,i.return)}var f=i.sibling;if(f!==null){f.return=i.return,ie=f;break e}ie=i.return}}var p=e.current;for(ie=p;ie!==null;){l=ie;var v=l.child;if(l.subtreeFlags&2064&&v!==null)v.return=l,ie=v;else e:for(l=p;ie!==null;){if(o=ie,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:sl(9,o)}}catch(C){Je(o,o.return,C)}if(o===l){ie=null;break e}var x=o.sibling;if(x!==null){x.return=o.return,ie=x;break e}ie=o.return}}if(Oe=a,es(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(Yi,e)}catch{}r=!0}return r}finally{$e=s,Qt.transition=t}}return!1}function Qd(e,t,s){t=lr(s,t),t=vh(e,t,1),e=qn(e,t,1),t=_t(),e!==null&&(wa(e,1,t),Rt(e,t))}function Je(e,t,s){if(e.tag===3)Qd(e,e,s);else for(;t!==null;){if(t.tag===3){Qd(t,e,s);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vn===null||!Vn.has(r))){e=lr(s,e),e=gh(t,e,1),t=qn(t,e,1),e=_t(),t!==null&&(wa(t,1,e),Rt(t,e));break}}t=t.return}}function zx(e,t,s){var r=e.pingCache;r!==null&&r.delete(t),t=_t(),e.pingedLanes|=e.suspendedLanes&s,ut===e&&(mt&s)===s&&(lt===4||lt===3&&(mt&130023424)===mt&&500>et()-ou?hs(e,0):lu|=s),Rt(e,t)}function $h(e,t){t===0&&(e.mode&1?(t=Ia,Ia<<=1,!(Ia&130023424)&&(Ia=4194304)):t=1);var s=_t();e=Cn(e,t),e!==null&&(wa(e,t,s),Rt(e,s))}function Fx(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),$h(e,s)}function Wx(e,t){var s=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(s=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(t),$h(e,s)}var Ih;Ih=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||At.current)Tt=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return Tt=!1,Ex(e,t,s);Tt=!!(e.flags&131072)}else Tt=!1,He&&t.flags&1048576&&Um(t,Ai,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;oi(e,t),e=t.pendingProps;var a=sr(t,xt.current);Xs(t,s),a=tu(null,t,r,e,a,s);var i=nu();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lt(r)?(i=!0,Pi(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Kc(t),a.updater=nl,t.stateNode=a,a._reactInternals=t,Bo(t,r,e,s),t=Ho(null,t,r,!0,i,s)):(t.tag=0,He&&i&&Bc(t),bt(null,t,a,s),t=t.child),t;case 16:r=t.elementType;e:{switch(oi(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=Bx(r),e=Zt(r,e),a){case 0:t=Vo(null,t,r,e,s);break e;case 1:t=$d(null,t,r,e,s);break e;case 11:t=Md(null,t,r,e,s);break e;case 14:t=Dd(null,t,r,Zt(r.type,e),s);break e}throw Error(Q(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Zt(r,a),Vo(e,t,r,a,s);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Zt(r,a),$d(e,t,r,a,s);case 3:e:{if(bh(t),e===null)throw Error(Q(387));r=t.pendingProps,i=t.memoizedState,a=i.element,Gm(e,t),Oi(t,r,null,s);var l=t.memoizedState;if(r=l.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=lr(Error(Q(423)),t),t=Id(e,t,r,s,a);break e}else if(r!==a){a=lr(Error(Q(424)),t),t=Id(e,t,r,s,a);break e}else for(Dt=Bn(t.stateNode.containerInfo.firstChild),$t=t,He=!0,tn=null,s=Hm(t,null,r,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(rr(),r===a){t=En(e,t,s);break e}bt(e,t,r,s)}t=t.child}return t;case 5:return Ym(t),e===null&&Fo(t),r=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,l=a.children,Mo(r,a)?l=null:i!==null&&Mo(r,i)&&(t.flags|=32),jh(e,t),bt(e,t,l,s),t.child;case 6:return e===null&&Fo(t),null;case 13:return _h(e,t,s);case 4:return Jc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ar(t,null,r,s):bt(e,t,r,s),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Zt(r,a),Md(e,t,r,a,s);case 7:return bt(e,t,t.pendingProps,s),t.child;case 8:return bt(e,t,t.pendingProps.children,s),t.child;case 12:return bt(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,Ue(Li,r._currentValue),r._currentValue=l,i!==null)if(ln(i.value,l)){if(i.children===a.children&&!At.current){t=En(e,t,s);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=wn(-1,s&-s),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=s,c=i.alternate,c!==null&&(c.lanes|=s),Wo(i.return,s,t),o.lanes|=s;break}c=c.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(Q(341));l.lanes|=s,o=l.alternate,o!==null&&(o.lanes|=s),Wo(l,s,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}bt(e,t,a.children,s),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Xs(t,s),a=Gt(a),r=r(a),t.flags|=1,bt(e,t,r,s),t.child;case 14:return r=t.type,a=Zt(r,t.pendingProps),a=Zt(r.type,a),Dd(e,t,r,a,s);case 15:return xh(e,t,t.type,t.pendingProps,s);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Zt(r,a),oi(e,t),t.tag=1,Lt(r)?(e=!0,Pi(t)):e=!1,Xs(t,s),fh(t,r,a),Bo(t,r,a,s),Ho(null,t,r,!0,e,s);case 19:return Nh(e,t,s);case 22:return yh(e,t,s)}throw Error(Q(156,t.tag))};function zh(e,t){return pm(e,t)}function Ux(e,t,s,r){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ht(e,t,s,r){return new Ux(e,t,s,r)}function pu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Bx(e){if(typeof e=="function")return pu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ac)return 11;if(e===Lc)return 14}return 2}function Qn(e,t){var s=e.alternate;return s===null?(s=Ht(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function di(e,t,s,r,a,i){var l=2;if(r=e,typeof e=="function")pu(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case $s:return fs(s.children,a,i,t);case Tc:l=8,a|=8;break;case mo:return e=Ht(12,s,t,a|2),e.elementType=mo,e.lanes=i,e;case ho:return e=Ht(13,s,t,a),e.elementType=ho,e.lanes=i,e;case fo:return e=Ht(19,s,t,a),e.elementType=fo,e.lanes=i,e;case Yp:return al(s,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Qp:l=10;break e;case Gp:l=9;break e;case Ac:l=11;break e;case Lc:l=14;break e;case Rn:l=16,r=null;break e}throw Error(Q(130,e==null?e:typeof e,""))}return t=Ht(l,s,t,a),t.elementType=e,t.type=r,t.lanes=i,t}function fs(e,t,s,r){return e=Ht(7,e,r,t),e.lanes=s,e}function al(e,t,s,r){return e=Ht(22,e,r,t),e.elementType=Yp,e.lanes=s,e.stateNode={isHidden:!1},e}function Kl(e,t,s){return e=Ht(6,e,null,t),e.lanes=s,e}function Jl(e,t,s){return t=Ht(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qx(e,t,s,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Al(0),this.expirationTimes=Al(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Al(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function mu(e,t,s,r,a,i,l,o,c){return e=new qx(e,t,s,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ht(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kc(i),e}function Vx(e,t,s){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ds,key:r==null?null:""+r,children:e,containerInfo:t,implementation:s}}function Fh(e){if(!e)return Jn;e=e._reactInternals;e:{if(ws(e)!==e||e.tag!==1)throw Error(Q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Q(171))}if(e.tag===1){var s=e.type;if(Lt(s))return Fm(e,s,t)}return t}function Wh(e,t,s,r,a,i,l,o,c){return e=mu(s,r,!0,e,a,i,l,o,c),e.context=Fh(null),s=e.current,r=_t(),a=Hn(s),i=wn(r,a),i.callback=t??null,qn(s,i,a),e.current.lanes=a,wa(e,a,r),Rt(e,r),e}function il(e,t,s,r){var a=t.current,i=_t(),l=Hn(a);return s=Fh(s),t.context===null?t.context=s:t.pendingContext=s,t=wn(i,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=qn(a,t,l),e!==null&&(an(e,a,l,i),ai(e,a,l)),l}function Ui(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Gd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function hu(e,t){Gd(e,t),(e=e.alternate)&&Gd(e,t)}function Hx(){return null}var Uh=typeof reportError=="function"?reportError:function(e){console.error(e)};function fu(e){this._internalRoot=e}ll.prototype.render=fu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Q(409));il(e,t,null,null)};ll.prototype.unmount=fu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;bs(function(){il(null,e,null,null)}),t[kn]=null}};function ll(e){this._internalRoot=e}ll.prototype.unstable_scheduleHydration=function(e){if(e){var t=ym();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Mn.length&&t!==0&&t<Mn[s].priority;s++);Mn.splice(s,0,e),s===0&&bm(e)}};function vu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ol(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Yd(){}function Qx(e,t,s,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var d=Ui(l);i.call(d)}}var l=Wh(t,r,e,0,null,!1,!1,"",Yd);return e._reactRootContainer=l,e[kn]=l.current,ua(e.nodeType===8?e.parentNode:e),bs(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var o=r;r=function(){var d=Ui(c);o.call(d)}}var c=mu(e,0,!1,null,null,!1,!1,"",Yd);return e._reactRootContainer=c,e[kn]=c.current,ua(e.nodeType===8?e.parentNode:e),bs(function(){il(t,c,s,r)}),c}function cl(e,t,s,r,a){var i=s._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var c=Ui(l);o.call(c)}}il(t,l,e,a)}else l=Qx(s,t,e,a,r);return Ui(l)}gm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Fr(t.pendingLanes);s!==0&&(Mc(t,s|1),Rt(t,et()),!(Oe&6)&&(or=et()+500,es()))}break;case 13:bs(function(){var r=Cn(e,1);if(r!==null){var a=_t();an(r,e,1,a)}}),hu(e,1)}};Dc=function(e){if(e.tag===13){var t=Cn(e,134217728);if(t!==null){var s=_t();an(t,e,134217728,s)}hu(e,134217728)}};xm=function(e){if(e.tag===13){var t=Hn(e),s=Cn(e,t);if(s!==null){var r=_t();an(s,e,t,r)}hu(e,t)}};ym=function(){return $e};jm=function(e,t){var s=$e;try{return $e=e,t()}finally{$e=s}};So=function(e,t,s){switch(t){case"input":if(xo(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var r=s[t];if(r!==e&&r.form===e.form){var a=Zi(r);if(!a)throw Error(Q(90));Jp(r),xo(r,a)}}}break;case"textarea":Zp(e,s);break;case"select":t=s.value,t!=null&&Gs(e,!!s.multiple,t,!1)}};im=cu;lm=bs;var Gx={usingClientEntryPoint:!1,Events:[ka,Ws,Zi,rm,am,cu]},Lr={findFiberByHostInstance:us,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Yx={bundleType:Lr.bundleType,version:Lr.version,rendererPackageName:Lr.rendererPackageName,rendererConfig:Lr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=um(e),e===null?null:e.stateNode},findFiberByHostInstance:Lr.findFiberByHostInstance||Hx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ya=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ya.isDisabled&&Ya.supportsFiber)try{Yi=Ya.inject(Yx),pn=Ya}catch{}}zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gx;zt.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vu(t))throw Error(Q(200));return Vx(e,t,null,s)};zt.createRoot=function(e,t){if(!vu(e))throw Error(Q(299));var s=!1,r="",a=Uh;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=mu(e,1,!1,null,null,s,!1,r,a),e[kn]=t.current,ua(e.nodeType===8?e.parentNode:e),new fu(t)};zt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Q(188)):(e=Object.keys(e).join(","),Error(Q(268,e)));return e=um(t),e=e===null?null:e.stateNode,e};zt.flushSync=function(e){return bs(e)};zt.hydrate=function(e,t,s){if(!ol(t))throw Error(Q(200));return cl(null,e,t,!0,s)};zt.hydrateRoot=function(e,t,s){if(!vu(e))throw Error(Q(405));var r=s!=null&&s.hydratedSources||null,a=!1,i="",l=Uh;if(s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(l=s.onRecoverableError)),t=Wh(t,null,e,1,s??null,a,!1,i,l),e[kn]=t.current,ua(e),r)for(e=0;e<r.length;e++)s=r[e],a=s._getVersion,a=a(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,a]:t.mutableSourceEagerHydrationData.push(s,a);return new ll(t)};zt.render=function(e,t,s){if(!ol(t))throw Error(Q(200));return cl(null,e,t,!1,s)};zt.unmountComponentAtNode=function(e){if(!ol(e))throw Error(Q(40));return e._reactRootContainer?(bs(function(){cl(null,null,e,!1,function(){e._reactRootContainer=null,e[kn]=null})}),!0):!1};zt.unstable_batchedUpdates=cu;zt.unstable_renderSubtreeIntoContainer=function(e,t,s,r){if(!ol(s))throw Error(Q(200));if(e==null||e._reactInternals===void 0)throw Error(Q(38));return cl(e,t,s,!1,r)};zt.version="18.3.1-next-f1338f8080-20240426";function Bh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Bh)}catch(e){console.error(e)}}Bh(),Bp.exports=zt;var Kx=Bp.exports,qh,Kd=Kx;qh=Kd.createRoot,Kd.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ya(){return ya=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},ya.apply(this,arguments)}var zn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(zn||(zn={}));const Jd="popstate";function Jx(e){e===void 0&&(e={});function t(r,a){let{pathname:i,search:l,hash:o}=r.location;return rc("",{pathname:i,search:l,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(r,a){return typeof a=="string"?a:Bi(a)}return Zx(t,s,null,e)}function Ye(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function gu(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Xx(){return Math.random().toString(36).substr(2,8)}function Xd(e,t){return{usr:e.state,key:e.key,idx:t}}function rc(e,t,s,r){return s===void 0&&(s=null),ya({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?vr(t):t,{state:s,key:t&&t.key||r||Xx()})}function Bi(e){let{pathname:t="/",search:s="",hash:r=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function vr(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Zx(e,t,s,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:i=!1}=r,l=a.history,o=zn.Pop,c=null,d=h();d==null&&(d=0,l.replaceState(ya({},l.state,{idx:d}),""));function h(){return(l.state||{idx:null}).idx}function g(){o=zn.Pop;let N=h(),f=N==null?null:N-d;d=N,c&&c({action:o,location:S.location,delta:f})}function m(N,f){o=zn.Push;let p=rc(S.location,N,f);d=h()+1;let v=Xd(p,d),x=S.createHref(p);try{l.pushState(v,"",x)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;a.location.assign(x)}i&&c&&c({action:o,location:S.location,delta:1})}function _(N,f){o=zn.Replace;let p=rc(S.location,N,f);d=h();let v=Xd(p,d),x=S.createHref(p);l.replaceState(v,"",x),i&&c&&c({action:o,location:S.location,delta:0})}function j(N){let f=a.location.origin!=="null"?a.location.origin:a.location.href,p=typeof N=="string"?N:Bi(N);return p=p.replace(/ $/,"%20"),Ye(f,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,f)}let S={get action(){return o},get location(){return e(a,l)},listen(N){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Jd,g),c=N,()=>{a.removeEventListener(Jd,g),c=null}},createHref(N){return t(a,N)},createURL:j,encodeLocation(N){let f=j(N);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:m,replace:_,go(N){return l.go(N)}};return S}var Zd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Zd||(Zd={}));function ey(e,t,s){return s===void 0&&(s="/"),ty(e,t,s)}function ty(e,t,s,r){let a=typeof t=="string"?vr(t):t,i=cr(a.pathname||"/",s);if(i==null)return null;let l=Vh(e);ny(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let d=my(i);o=dy(l[c],d)}return o}function Vh(e,t,s,r){t===void 0&&(t=[]),s===void 0&&(s=[]),r===void 0&&(r="");let a=(i,l,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};c.relativePath.startsWith("/")&&(Ye(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Gn([r,c.relativePath]),h=s.concat(c);i.children&&i.children.length>0&&(Ye(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Vh(i.children,t,h,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:cy(d,i.index),routesMeta:h})};return e.forEach((i,l)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))a(i,l);else for(let c of Hh(i.path))a(i,l,c)}),t}function Hh(e){let t=e.split("/");if(t.length===0)return[];let[s,...r]=t,a=s.endsWith("?"),i=s.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let l=Hh(r.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),a&&o.push(...l),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function ny(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:uy(t.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}const sy=/^:[\w-]+$/,ry=3,ay=2,iy=1,ly=10,oy=-2,ep=e=>e==="*";function cy(e,t){let s=e.split("/"),r=s.length;return s.some(ep)&&(r+=oy),t&&(r+=ay),s.filter(a=>!ep(a)).reduce((a,i)=>a+(sy.test(i)?ry:i===""?iy:ly),r)}function uy(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function dy(e,t,s){let{routesMeta:r}=e,a={},i="/",l=[];for(let o=0;o<r.length;++o){let c=r[o],d=o===r.length-1,h=i==="/"?t:t.slice(i.length)||"/",g=ac({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),m=c.route;if(!g)return null;Object.assign(a,g.params),l.push({params:a,pathname:Gn([i,g.pathname]),pathnameBase:xy(Gn([i,g.pathnameBase])),route:m}),g.pathnameBase!=="/"&&(i=Gn([i,g.pathnameBase]))}return l}function ac(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,r]=py(e.path,e.caseSensitive,e.end),a=t.match(s);if(!a)return null;let i=a[0],l=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:r.reduce((d,h,g)=>{let{paramName:m,isOptional:_}=h;if(m==="*"){let S=o[g]||"";l=i.slice(0,i.length-S.length).replace(/(.)\/+$/,"$1")}const j=o[g];return _&&!j?d[m]=void 0:d[m]=(j||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:l,pattern:e}}function py(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),gu(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function my(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return gu(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function cr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,r=e.charAt(s);return r&&r!=="/"?null:e.slice(s)||"/"}const hy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fy=e=>hy.test(e);function vy(e,t){t===void 0&&(t="/");let{pathname:s,search:r="",hash:a=""}=typeof e=="string"?vr(e):e,i;if(s)if(fy(s))i=s;else{if(s.includes("//")){let l=s;s=s.replace(/\/\/+/g,"/"),gu(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+s))}s.startsWith("/")?i=tp(s.substring(1),"/"):i=tp(s,t)}else i=t;return{pathname:i,search:yy(r),hash:jy(a)}}function tp(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function Xl(e,t,s,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function gy(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function xu(e,t){let s=gy(e);return t?s.map((r,a)=>a===s.length-1?r.pathname:r.pathnameBase):s.map(r=>r.pathnameBase)}function yu(e,t,s,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=vr(e):(a=ya({},e),Ye(!a.pathname||!a.pathname.includes("?"),Xl("?","pathname","search",a)),Ye(!a.pathname||!a.pathname.includes("#"),Xl("#","pathname","hash",a)),Ye(!a.search||!a.search.includes("#"),Xl("#","search","hash",a)));let i=e===""||a.pathname==="",l=i?"/":a.pathname,o;if(l==null)o=s;else{let g=t.length-1;if(!r&&l.startsWith("..")){let m=l.split("/");for(;m[0]==="..";)m.shift(),g-=1;a.pathname=m.join("/")}o=g>=0?t[g]:"/"}let c=vy(a,o),d=l&&l!=="/"&&l.endsWith("/"),h=(i||l===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const Gn=e=>e.join("/").replace(/\/\/+/g,"/"),xy=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),yy=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,jy=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function by(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Qh=["post","put","patch","delete"];new Set(Qh);const _y=["get",...Qh];new Set(_y);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ja(){return ja=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},ja.apply(this,arguments)}const ul=u.createContext(null),Gh=u.createContext(null),Tn=u.createContext(null),dl=u.createContext(null),fn=u.createContext({outlet:null,matches:[],isDataRoute:!1}),Yh=u.createContext(null);function Ny(e,t){let{relative:s}=t===void 0?{}:t;gr()||Ye(!1);let{basename:r,navigator:a}=u.useContext(Tn),{hash:i,pathname:l,search:o}=pl(e,{relative:s}),c=l;return r!=="/"&&(c=l==="/"?r:Gn([r,l])),a.createHref({pathname:c,search:o,hash:i})}function gr(){return u.useContext(dl)!=null}function Ss(){return gr()||Ye(!1),u.useContext(dl).location}function Kh(e){u.useContext(Tn).static||u.useLayoutEffect(e)}function ts(){let{isDataRoute:e}=u.useContext(fn);return e?Iy():wy()}function wy(){gr()||Ye(!1);let e=u.useContext(ul),{basename:t,future:s,navigator:r}=u.useContext(Tn),{matches:a}=u.useContext(fn),{pathname:i}=Ss(),l=JSON.stringify(xu(a,s.v7_relativeSplatPath)),o=u.useRef(!1);return Kh(()=>{o.current=!0}),u.useCallback(function(d,h){if(h===void 0&&(h={}),!o.current)return;if(typeof d=="number"){r.go(d);return}let g=yu(d,JSON.parse(l),i,h.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:Gn([t,g.pathname])),(h.replace?r.replace:r.push)(g,h.state,h)},[t,r,l,i,e])}const Sy=u.createContext(null);function ky(e){let t=u.useContext(fn).outlet;return t&&u.createElement(Sy.Provider,{value:e},t)}function Jh(){let{matches:e}=u.useContext(fn),t=e[e.length-1];return t?t.params:{}}function pl(e,t){let{relative:s}=t===void 0?{}:t,{future:r}=u.useContext(Tn),{matches:a}=u.useContext(fn),{pathname:i}=Ss(),l=JSON.stringify(xu(a,r.v7_relativeSplatPath));return u.useMemo(()=>yu(e,JSON.parse(l),i,s==="path"),[e,l,i,s])}function Cy(e,t){return Ey(e,t)}function Ey(e,t,s,r){gr()||Ye(!1);let{navigator:a}=u.useContext(Tn),{matches:i}=u.useContext(fn),l=i[i.length-1],o=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let d=Ss(),h;if(t){var g;let N=typeof t=="string"?vr(t):t;c==="/"||(g=N.pathname)!=null&&g.startsWith(c)||Ye(!1),h=N}else h=d;let m=h.pathname||"/",_=m;if(c!=="/"){let N=c.replace(/^\//,"").split("/");_="/"+m.replace(/^\//,"").split("/").slice(N.length).join("/")}let j=ey(e,{pathname:_}),S=Ry(j&&j.map(N=>Object.assign({},N,{params:Object.assign({},o,N.params),pathname:Gn([c,a.encodeLocation?a.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?c:Gn([c,a.encodeLocation?a.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),i,s,r);return t&&S?u.createElement(dl.Provider,{value:{location:ja({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:zn.Pop}},S):S}function Py(){let e=$y(),t=by(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),s?u.createElement("pre",{style:a},s):null,null)}const Ty=u.createElement(Py,null);class Ay extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?u.createElement(fn.Provider,{value:this.props.routeContext},u.createElement(Yh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ly(e){let{routeContext:t,match:s,children:r}=e,a=u.useContext(ul);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),u.createElement(fn.Provider,{value:t},r)}function Ry(e,t,s,r){var a;if(t===void 0&&(t=[]),s===void 0&&(s=null),r===void 0&&(r=null),e==null){var i;if(!s)return null;if(s.errors)e=s.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let l=e,o=(a=s)==null?void 0:a.errors;if(o!=null){let h=l.findIndex(g=>g.route.id&&(o==null?void 0:o[g.route.id])!==void 0);h>=0||Ye(!1),l=l.slice(0,Math.min(l.length,h+1))}let c=!1,d=-1;if(s&&r&&r.v7_partialHydration)for(let h=0;h<l.length;h++){let g=l[h];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=h),g.route.id){let{loaderData:m,errors:_}=s,j=g.route.loader&&m[g.route.id]===void 0&&(!_||_[g.route.id]===void 0);if(g.route.lazy||j){c=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((h,g,m)=>{let _,j=!1,S=null,N=null;s&&(_=o&&g.route.id?o[g.route.id]:void 0,S=g.route.errorElement||Ty,c&&(d<0&&m===0?(zy("route-fallback"),j=!0,N=null):d===m&&(j=!0,N=g.route.hydrateFallbackElement||null)));let f=t.concat(l.slice(0,m+1)),p=()=>{let v;return _?v=S:j?v=N:g.route.Component?v=u.createElement(g.route.Component,null):g.route.element?v=g.route.element:v=h,u.createElement(Ly,{match:g,routeContext:{outlet:h,matches:f,isDataRoute:s!=null},children:v})};return s&&(g.route.ErrorBoundary||g.route.errorElement||m===0)?u.createElement(Ay,{location:s.location,revalidation:s.revalidation,component:S,error:_,children:p(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):p()},null)}var Xh=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Xh||{}),Zh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Zh||{});function Oy(e){let t=u.useContext(ul);return t||Ye(!1),t}function My(e){let t=u.useContext(Gh);return t||Ye(!1),t}function Dy(e){let t=u.useContext(fn);return t||Ye(!1),t}function ef(e){let t=Dy(),s=t.matches[t.matches.length-1];return s.route.id||Ye(!1),s.route.id}function $y(){var e;let t=u.useContext(Yh),s=My(),r=ef();return t!==void 0?t:(e=s.errors)==null?void 0:e[r]}function Iy(){let{router:e}=Oy(Xh.UseNavigateStable),t=ef(Zh.UseNavigateStable),s=u.useRef(!1);return Kh(()=>{s.current=!0}),u.useCallback(function(a,i){i===void 0&&(i={}),s.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,ja({fromRouteId:t},i)))},[e,t])}const np={};function zy(e,t,s){np[e]||(np[e]=!0)}function Fy(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Et(e){let{to:t,replace:s,state:r,relative:a}=e;gr()||Ye(!1);let{future:i,static:l}=u.useContext(Tn),{matches:o}=u.useContext(fn),{pathname:c}=Ss(),d=ts(),h=yu(t,xu(o,i.v7_relativeSplatPath),c,a==="path"),g=JSON.stringify(h);return u.useEffect(()=>d(JSON.parse(g),{replace:s,state:r,relative:a}),[d,g,a,s,r]),null}function Wy(e){return ky(e.context)}function De(e){Ye(!1)}function Uy(e){let{basename:t="/",children:s=null,location:r,navigationType:a=zn.Pop,navigator:i,static:l=!1,future:o}=e;gr()&&Ye(!1);let c=t.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:c,navigator:i,static:l,future:ja({v7_relativeSplatPath:!1},o)}),[c,o,i,l]);typeof r=="string"&&(r=vr(r));let{pathname:h="/",search:g="",hash:m="",state:_=null,key:j="default"}=r,S=u.useMemo(()=>{let N=cr(h,c);return N==null?null:{location:{pathname:N,search:g,hash:m,state:_,key:j},navigationType:a}},[c,h,g,m,_,j,a]);return S==null?null:u.createElement(Tn.Provider,{value:d},u.createElement(dl.Provider,{children:s,value:S}))}function By(e){let{children:t,location:s}=e;return Cy(ic(t),s)}new Promise(()=>{});function ic(e,t){t===void 0&&(t=[]);let s=[];return u.Children.forEach(e,(r,a)=>{if(!u.isValidElement(r))return;let i=[...t,a];if(r.type===u.Fragment){s.push.apply(s,ic(r.props.children,i));return}r.type!==De&&Ye(!1),!r.props.index||!r.props.children||Ye(!1);let l={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=ic(r.props.children,i)),s.push(l)}),s}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qi(){return qi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},qi.apply(this,arguments)}function tf(e,t){if(e==null)return{};var s={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(s[a]=e[a]);return s}function qy(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Vy(e,t){return e.button===0&&(!t||t==="_self")&&!qy(e)}function lc(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,s)=>{let r=e[s];return t.concat(Array.isArray(r)?r.map(a=>[s,a]):[[s,r]])},[]))}function Hy(e,t){let s=lc(e);return t&&t.forEach((r,a)=>{s.has(a)||t.getAll(a).forEach(i=>{s.append(a,i)})}),s}const Qy=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Gy=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Yy="6";try{window.__reactRouterVersion=Yy}catch{}const Ky=u.createContext({isTransitioning:!1}),Jy="startTransition",sp=zv[Jy];function Xy(e){let{basename:t,children:s,future:r,window:a}=e,i=u.useRef();i.current==null&&(i.current=Jx({window:a,v5Compat:!0}));let l=i.current,[o,c]=u.useState({action:l.action,location:l.location}),{v7_startTransition:d}=r||{},h=u.useCallback(g=>{d&&sp?sp(()=>c(g)):c(g)},[c,d]);return u.useLayoutEffect(()=>l.listen(h),[l,h]),u.useEffect(()=>Fy(r),[r]),u.createElement(Uy,{basename:t,children:s,location:o.location,navigationType:o.action,navigator:l,future:r})}const Zy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ej=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xe=u.forwardRef(function(t,s){let{onClick:r,relative:a,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:h,viewTransition:g}=t,m=tf(t,Qy),{basename:_}=u.useContext(Tn),j,S=!1;if(typeof d=="string"&&ej.test(d)&&(j=d,Zy))try{let v=new URL(window.location.href),x=d.startsWith("//")?new URL(v.protocol+d):new URL(d),C=cr(x.pathname,_);x.origin===v.origin&&C!=null?d=C+x.search+x.hash:S=!0}catch{}let N=Ny(d,{relative:a}),f=sj(d,{replace:l,state:o,target:c,preventScrollReset:h,relative:a,viewTransition:g});function p(v){r&&r(v),v.defaultPrevented||f(v)}return u.createElement("a",qi({},m,{href:j||N,onClick:S||i?r:p,ref:s,target:c}))}),tj=u.forwardRef(function(t,s){let{"aria-current":r="page",caseSensitive:a=!1,className:i="",end:l=!1,style:o,to:c,viewTransition:d,children:h}=t,g=tf(t,Gy),m=pl(c,{relative:g.relative}),_=Ss(),j=u.useContext(Gh),{navigator:S,basename:N}=u.useContext(Tn),f=j!=null&&rj(m)&&d===!0,p=S.encodeLocation?S.encodeLocation(m).pathname:m.pathname,v=_.pathname,x=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;a||(v=v.toLowerCase(),x=x?x.toLowerCase():null,p=p.toLowerCase()),x&&N&&(x=cr(x,N)||x);const C=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let M=v===p||!l&&v.startsWith(p)&&v.charAt(C)==="/",O=x!=null&&(x===p||!l&&x.startsWith(p)&&x.charAt(p.length)==="/"),E={isActive:M,isPending:O,isTransitioning:f},W=M?r:void 0,z;typeof i=="function"?z=i(E):z=[i,M?"active":null,O?"pending":null,f?"transitioning":null].filter(Boolean).join(" ");let A=typeof o=="function"?o(E):o;return u.createElement(Xe,qi({},g,{"aria-current":W,className:z,ref:s,style:A,to:c,viewTransition:d}),typeof h=="function"?h(E):h)});var oc;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(oc||(oc={}));var rp;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(rp||(rp={}));function nj(e){let t=u.useContext(ul);return t||Ye(!1),t}function sj(e,t){let{target:s,replace:r,state:a,preventScrollReset:i,relative:l,viewTransition:o}=t===void 0?{}:t,c=ts(),d=Ss(),h=pl(e,{relative:l});return u.useCallback(g=>{if(Vy(g,s)){g.preventDefault();let m=r!==void 0?r:Bi(d)===Bi(h);c(e,{replace:m,state:a,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,h,r,a,s,e,i,l,o])}function nf(e){let t=u.useRef(lc(e)),s=u.useRef(!1),r=Ss(),a=u.useMemo(()=>Hy(r.search,s.current?null:t.current),[r.search]),i=ts(),l=u.useCallback((o,c)=>{const d=lc(typeof o=="function"?o(a):o);s.current=!0,i("?"+d,c)},[i,a]);return[a,l]}function rj(e,t){t===void 0&&(t={});let s=u.useContext(Ky);s==null&&Ye(!1);let{basename:r}=nj(oc.useViewTransitionState),a=pl(e,{relative:t.relative});if(!s.isTransitioning)return!1;let i=cr(s.currentLocation.pathname,r)||s.currentLocation.pathname,l=cr(s.nextLocation.pathname,r)||s.nextLocation.pathname;return ac(a.pathname,l)!=null||ac(a.pathname,i)!=null}function Yn(){var e;try{if(typeof window>"u")return!1;const t=(e=window.Telegram)==null?void 0:e.WebApp;if(!t)return!1;const s=t.initData;return s!=null&&s.length>0}catch{return!1}}function aj(){var e;try{if(typeof window>"u")return null;const t=(e=window.Telegram)==null?void 0:e.WebApp;if(!t)return null;const s=t.initData;return s&&s.length>0?s:null}catch{return null}}function ij(){var e;try{return typeof window>"u"?null:((e=window.Telegram)==null?void 0:e.WebApp)||null}catch{return null}}let sf=null;function lj(e){sf=e}function Ea(){return sf??""}function oj(){return sessionStorage.getItem("admin_token")}async function at(e,t={}){const s=`${Ea()}${e}`,r=oj(),a={"Content-Type":"application/json",...t.headers};r&&(a["X-Admin-Token"]=r);const i=await fetch(s,{...t,headers:a});if(!i.ok){const l=await i.json().catch(()=>({detail:i.statusText}));throw new Error(l.detail||`HTTP ${i.status}`)}return i.json()}async function rf(){return at("/admin/cities")}async function cj(e){return at(`/admin/districts/${e}`)}async function af(e){if(!e.trim())return[];const t=new URLSearchParams({q:e.trim()}),s=`${Ea()}/public/metro/search?${t}`,r=await fetch(s);return r.ok?r.json():[]}async function lf(e){return at(`/admin/org/${encodeURIComponent(e)}`)}async function uj(e){return at("/admin/create_seller",{method:"POST",body:JSON.stringify(e)})}async function dj(e,t=!1){const s=new URLSearchParams({fio:e});return t&&s.set("include_deleted","true"),at(`/admin/sellers/search?${s}`)}async function ju(e=!1){return at(`/admin/sellers/all${e?"?include_deleted=true":""}`)}async function Zl(e,t,s){return at(`/admin/sellers/${e}/update`,{method:"PUT",body:JSON.stringify({field:t,value:s})})}async function pj(e,t){return at(`/admin/sellers/${e}/block?is_blocked=${t}`,{method:"PUT"})}async function mj(e){return at(`/admin/sellers/${e}`,{method:"DELETE"})}async function hj(e,t){return at(`/admin/sellers/${e}/set_limit?max_orders=${t}`,{method:"PUT"})}async function fj(e,t){return at(`/admin/sellers/${e}/subscription_plan?plan=${t}`,{method:"PUT"})}async function vj(e,t){return at(`/admin/sellers/${e}/default_limit?default_daily_limit=${t}`,{method:"PUT"})}async function gj(e){const t=new URLSearchParams;e!=null&&e.date_from&&t.set("date_from",e.date_from),e!=null&&e.date_to&&t.set("date_to",e.date_to);const s=t.toString()?`?${t.toString()}`:"";return at(`/admin/stats/overview${s}`)}async function xj(){return at("/admin/stats/limits")}const yj=15e3;async function of(e,t,s=yj){const r=new AbortController,a=setTimeout(()=>r.abort(),s);try{return await fetch(e,{...t,signal:r.signal})}catch(i){throw i instanceof Error?i.name==="AbortError"?new Error("  . ,     http://localhost:8000"):new Error(i.message||" "):i}finally{clearTimeout(a)}}async function jj(e,t){const s=`${Ea()}/admin/login`,r=await of(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({login:e,password:t})});if(!r.ok){const a=await r.json().catch(()=>({detail:r.statusText}));throw new Error(a.detail||`HTTP ${r.status}`)}return r.json()}async function bj(e,t){const s=`${Ea()}/seller-web/login`,r=await of(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({login:e,password:t})});if(!r.ok){const a=await r.json().catch(()=>({detail:r.statusText}));throw new Error(a.detail||`HTTP ${r.status}`)}return r.json()}async function _j(e){return at(`/admin/sellers/${e}/web_credentials`)}async function Nj(e){return at(`/admin/sellers/${e}/set_web_credentials`,{method:"POST"})}async function wj(){return at("/admin/dashboard")}async function cf(e){const t=new URLSearchParams;e!=null&&e.status&&t.set("status",e.status),e!=null&&e.seller_id&&t.set("seller_id",String(e.seller_id)),e!=null&&e.date_from&&t.set("date_from",e.date_from),e!=null&&e.date_to&&t.set("date_to",e.date_to),e!=null&&e.delivery_type&&t.set("delivery_type",e.delivery_type),(e==null?void 0:e.is_preorder)!==void 0&&t.set("is_preorder",String(e.is_preorder)),e!=null&&e.page&&t.set("page",String(e.page)),e!=null&&e.per_page&&t.set("per_page",String(e.per_page));const s=t.toString()?`?${t.toString()}`:"";return at(`/admin/orders${s}`)}async function Sj(e){const t=new URLSearchParams;e!=null&&e.city_id&&t.set("city_id",String(e.city_id)),e!=null&&e.min_orders&&t.set("min_orders",String(e.min_orders)),e!=null&&e.page&&t.set("page",String(e.page)),t.set("per_page",String(e.per_page));const s=t.toString()?`?${t.toString()}`:"";return at(`/admin/customers${s}`)}async function uf(e){const t=new URLSearchParams;e!=null&&e.date_from&&t.set("date_from",e.date_from),e!=null&&e.date_to&&t.set("date_to",e.date_to),e!=null&&e.group_by&&t.set("group_by",e.group_by);const s=t.toString()?`?${t.toString()}`:"";return at(`/admin/finance/summary${s}`)}async function kj(e){const t=`${Ea()}/admin/auth/telegram`,s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({init_data:e})});if(!s.ok){const r=await s.json().catch(()=>({detail:s.statusText}));throw new Error(r.detail||`HTTP ${s.status}`)}return s.json()}const Ur="admin_token",Br="seller_token",pi="auth_role",qr="seller_id",df=u.createContext(null);function Cj(){if(typeof sessionStorage>"u")return{isAuth:!1,role:null,sellerId:null};const e=sessionStorage.getItem(Ur),t=sessionStorage.getItem(Br),s=sessionStorage.getItem(pi),r=sessionStorage.getItem(qr),a=!!(e||t),i=s==="admin"||s==="seller"?s:null,l=r?parseInt(r,10):null;return{isAuth:a,role:i,sellerId:l}}function Ej({children:e}){const t=Cj(),[s,r]=u.useState(t.isAuth),[a,i]=u.useState(t.role),[l,o]=u.useState(t.sellerId),[c,d]=u.useState(()=>Yn()&&!t.isAuth),[h,g]=u.useState(null),m=u.useCallback(j=>{j.role==="admin"?(sessionStorage.setItem(Ur,j.token),sessionStorage.removeItem(Br),sessionStorage.removeItem(qr)):j.role==="seller"&&(sessionStorage.setItem(Br,j.token),j.sellerId!=null&&sessionStorage.setItem(qr,String(j.sellerId)),sessionStorage.removeItem(Ur)),sessionStorage.setItem(pi,j.role??""),r(!0),i(j.role),o(j.sellerId??null)},[]),_=u.useCallback(()=>{sessionStorage.removeItem(Ur),sessionStorage.removeItem(Br),sessionStorage.removeItem(pi),sessionStorage.removeItem(qr),r(!1),i(null),o(null)},[]);return u.useEffect(()=>{if(!Yn())return;if(s){d(!1);return}const j=aj();if(!j){d(!1);return}kj(j).then(({token:S,role:N,seller_id:f})=>{m({token:S,role:N,sellerId:f})}).catch(S=>{console.error("[TG Auth] Failed:",S),g(S instanceof Error?S.message:" ")}).finally(()=>{d(!1)})},[]),u.useEffect(()=>{if(Yn())return;const j=sessionStorage.getItem(Ur),S=sessionStorage.getItem(Br),N=sessionStorage.getItem(pi),f=sessionStorage.getItem(qr);r(!!(j||S)),i(N==="admin"||N==="seller"?N:null),o(f?parseInt(f,10):null)},[]),n.jsx(df.Provider,{value:{isAuthenticated:s,role:a,sellerId:l,telegramAuthLoading:c,telegramAuthError:h,login:m,logout:_},children:e})}function ml(){const e=u.useContext(df);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pf=(...e)=>e.filter((t,s,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===s).join(" ").trim();/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,s,r)=>r?r.toUpperCase():s.toLowerCase());/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ap=e=>{const t=Tj(e);return t.charAt(0).toUpperCase()+t.slice(1)};/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Aj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=u.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:l,...o},c)=>u.createElement("svg",{ref:c,...Aj,width:t,height:t,stroke:e,strokeWidth:r?Number(s)*24/Number(t):s,className:pf("lucide",a),...!i&&!Lj(o)&&{"aria-hidden":"true"},...o},[...l.map(([d,h])=>u.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=(e,t)=>{const s=u.forwardRef(({className:r,...a},i)=>u.createElement(Rj,{ref:i,iconNode:t,className:pf(`lucide-${Pj(ap(e))}`,`lucide-${e}`,r),...a}));return s.displayName=ap(e),s};/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],mf=xe("building-2",Oj);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],Dj=xe("calendar-clock",Mj);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],Ij=xe("calendar-days",$j);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],hf=xe("calendar",zj);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],hl=xe("chart-column",Fj);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Uj=xe("chevron-down",Wj);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],bu=xe("chevron-left",Bj);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],xr=xe("chevron-right",qj);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Hj=xe("chevron-up",Vj);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Gj=xe("circle-check-big",Qj);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],Kj=xe("circle-user",Yj);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Xj=xe("circle-x",Jj);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],e0=xe("clipboard-check",Zj);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 6v6l4 2",key:"mmk7yg"}]],cc=xe("clock",t0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Vr=xe("copy",n0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ff=xe("dollar-sign",s0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],vf=xe("external-link",r0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],vs=xe("eye",a0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],er=xe("eye-off",i0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],gf=xe("funnel",l0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],xf=xe("gauge",o0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c0=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],yf=xe("globe",c0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],_u=xe("image",u0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],p0=xe("inbox",d0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],jf=xe("layout-dashboard",m0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],f0=xe("link",h0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],g0=xe("log-in",v0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],y0=xe("log-out",x0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Nu=xe("map-pin",j0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],_0=xe("package",b0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],eo=xe("pen-line",N0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],_s=xe("pencil",w0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],bf=xe("plus",S0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],C0=xe("refresh-cw",k0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],to=xe("save",E0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],_f=xe("search",P0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],wu=xe("settings",T0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Vi=xe("shield",A0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],tr=xe("shopping-bag",L0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Nn=xe("store",R0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],M0=xe("tag",O0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ur=xe("trash-2",D0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Hi=xe("trending-down",$0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],dr=xe("trending-up",I0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],uc=xe("triangle-alert",z0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],fl=xe("truck",F0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ip=xe("upload",W0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Su=xe("user",U0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ba=xe("users",B0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=[["path",{d:"M18 21V10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v11",key:"pb2vm6"}],["path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 1.132-1.803l7.95-3.974a2 2 0 0 1 1.837 0l7.948 3.974A2 2 0 0 1 22 8z",key:"doq5xv"}],["path",{d:"M6 13h12",key:"yf64js"}],["path",{d:"M6 17h12",key:"1jwigz"}]],V0=xe("warehouse",q0);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Pa=xe("x",H0);function tt({title:e,subtitle:t,actions:s,breadcrumbs:r}){return n.jsxs("div",{className:"page-header",children:[r&&r.length>0&&n.jsx("nav",{className:"page-header-breadcrumbs",children:r.map((a,i)=>n.jsxs("span",{className:"breadcrumb-item",children:[i>0&&n.jsx(xr,{size:14,className:"breadcrumb-sep"}),a.to?n.jsx(Xe,{to:a.to,className:"breadcrumb-link",children:a.label}):n.jsx("span",{className:"breadcrumb-current",children:a.label})]},i))}),n.jsxs("div",{className:"page-header-row",children:[n.jsxs("div",{className:"page-header-text",children:[n.jsx("h1",{className:"page-header-title",children:e}),t&&n.jsx("p",{className:"page-header-subtitle",children:t})]}),s&&n.jsx("div",{className:"page-header-actions",children:s})]})]})}function on({tabs:e,activeTab:t,onChange:s,size:r="default"}){return n.jsx("div",{className:`tab-bar tab-bar--${r}`,role:"tablist",children:e.map(a=>n.jsxs("button",{role:"tab","aria-selected":t===a.key,className:`tab-bar-item ${t===a.key?"tab-bar-item--active":""}`,onClick:()=>s(a.key),children:[a.label,a.count!==void 0&&a.count>0&&n.jsx("span",{className:"tab-bar-count",children:a.count})]},a.key))})}function hn({children:e,padding:t="default",className:s="",...r}){return n.jsx("div",{className:`ui-card ui-card--pad-${t} ${s}`,...r,children:e})}function ae({label:e,hint:t,error:s,required:r,children:a,className:i="",charCount:l,maxChars:o}){return n.jsxs("div",{className:`form-field ${s?"form-field--error":""} ${i}`,children:[n.jsxs("label",{className:"form-field-label",children:[e,r&&n.jsx("span",{className:"form-field-required",children:"*"})]}),a,l!=null&&o!=null&&n.jsxs("span",{className:`form-field-charcount${l>o?" form-field-charcount--over":""}`,children:[l," / ",o]}),t&&!s&&n.jsx("p",{className:"form-field-hint",children:t}),s&&n.jsx("p",{className:"form-field-error",children:s})]})}function sn({children:e,variant:t="neutral",size:s="default"}){return n.jsx("span",{className:`status-badge status-badge--${t} status-badge--${s}`,children:e})}function Vt({label:e,value:t,trend:s,link:r,accent:a}){return n.jsxs("div",{className:`stat-card ${a?"stat-card--accent":""}`,children:[n.jsx("span",{className:"stat-card-label",children:e}),n.jsxs("div",{className:"stat-card-row",children:[n.jsx("span",{className:"stat-card-value",children:t}),s&&n.jsxs("span",{className:`stat-card-trend stat-card-trend--${s.direction}`,children:[s.direction==="up"?n.jsx(dr,{size:14}):n.jsx(Hi,{size:14}),s.value,"%"]})]}),r&&n.jsx(Xe,{to:r.to,className:"stat-card-link",children:r.label})]})}function ms({isOpen:e,onClose:t,title:s,size:r="md",children:a,footer:i,beforeClose:l}){const o=u.useRef(null),c=u.useRef(!1),d=u.useCallback(async()=>{if(!c.current){if(l){c.current=!0;try{if(!await l())return}finally{c.current=!1}}t()}},[l,t]);return u.useEffect(()=>{if(!e)return;const h=g=>{g.key==="Escape"&&d()};return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[e,d]),u.useEffect(()=>{if(!e)return;const h=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=h}},[e]),u.useEffect(()=>{if(!e||!o.current)return;const h=o.current.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');h==null||h.focus()},[e]),e?n.jsx("div",{className:"ui-modal-overlay",onClick:d,children:n.jsxs("div",{ref:o,className:`ui-modal ui-modal--${r}`,onClick:h=>h.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":s,children:[n.jsxs("div",{className:"ui-modal-header",children:[n.jsx("h2",{className:"ui-modal-title",children:s}),n.jsx("button",{className:"ui-modal-close",onClick:d,"aria-label":"Close",children:n.jsx(Pa,{size:18})})]}),n.jsx("div",{className:"ui-modal-body",children:a}),i&&n.jsx("div",{className:"ui-modal-footer",children:i})]})}):null}function Nf({value:e,onChange:t,placeholder:s="...",className:r=""}){return n.jsxs("div",{className:`search-input-wrap ${r}`,children:[n.jsx(_f,{size:16,className:"search-input-icon"}),n.jsx("input",{type:"text",value:e,onChange:a=>t(a.target.value),placeholder:s,className:"search-input"}),e&&n.jsx("button",{className:"search-input-clear",onClick:()=>t(""),"aria-label":"Clear",children:n.jsx(Pa,{size:14})})]})}function _a({checked:e,onChange:t,label:s,disabled:r}){return n.jsxs("label",{className:`ui-toggle ${r?"ui-toggle--disabled":""}`,children:[n.jsx("button",{role:"switch","aria-checked":e,className:`ui-toggle-track ${e?"ui-toggle-track--on":""}`,onClick:()=>!r&&t(!e),disabled:r,children:n.jsx("span",{className:"ui-toggle-thumb"})}),s&&n.jsx("span",{className:"ui-toggle-label",children:s})]})}function Nt({icon:e,title:t=" ",message:s,action:r}){return n.jsxs("div",{className:"empty-state",children:[n.jsx("div",{className:"empty-state-icon",children:e||n.jsx(p0,{size:40})}),n.jsx("h3",{className:"empty-state-title",children:t}),s&&n.jsx("p",{className:"empty-state-message",children:s}),r&&n.jsx("div",{className:"empty-state-action",children:r})]})}const wf=u.createContext(null);let Q0=0;function G0({children:e}){const[t,s]=u.useState([]),r=u.useCallback((l,o,c=4e3)=>{const d=++Q0;s(h=>[...h,{id:d,type:l,message:o,duration:c}])},[]),a=u.useCallback(l=>{s(o=>o.filter(c=>c.id!==l))},[]),i={success:l=>r("success",l),error:l=>r("error",l,6e3),warning:l=>r("warning",l,5e3),info:l=>r("info",l)};return n.jsxs(wf.Provider,{value:i,children:[e,n.jsx("div",{className:"toast-container",children:t.map(l=>n.jsx(Y0,{item:l,onDismiss:a},l.id))})]})}function Y0({item:e,onDismiss:t}){return u.useEffect(()=>{const s=setTimeout(()=>t(e.id),e.duration);return()=>clearTimeout(s)},[e.id,e.duration,t]),n.jsxs("div",{className:`toast toast--${e.type}`,role:"alert",children:[n.jsx("span",{className:"toast-message",children:e.message}),n.jsx("button",{className:"toast-close",onClick:()=>t(e.id),"aria-label":"Close",children:n.jsx(Pa,{size:14})})]})}function yt(){const e=u.useContext(wf);if(!e)throw new Error("useToast must be used within ToastProvider");return e}const Sf=u.createContext(null);function K0({children:e}){const[t,s]=u.useState(null),r=u.useCallback(i=>new Promise(l=>s({opts:i,resolve:l})),[]),a=i=>{t==null||t.resolve(i),s(null)};return n.jsxs(Sf.Provider,{value:{confirm:r},children:[e,t&&n.jsx("div",{className:"confirm-overlay",onClick:()=>a(!1),children:n.jsxs("div",{className:"confirm-dialog",onClick:i=>i.stopPropagation(),children:[t.opts.title&&n.jsx("h3",{className:"confirm-title",children:t.opts.title}),n.jsx("p",{className:"confirm-message",children:t.opts.message}),n.jsxs("div",{className:"confirm-actions",children:[n.jsx("button",{className:"btn btn-secondary",onClick:()=>a(!1),children:t.opts.cancelLabel||""}),n.jsx("button",{className:`btn ${t.opts.danger?"btn-danger":"btn-primary"}`,onClick:()=>a(!0),autoFocus:!0,children:t.opts.confirmLabel||""})]})]})})]})}function ns(){const e=u.useContext(Sf);if(!e)throw new Error("useConfirm must be used within ConfirmProvider");return e.confirm}function je({label:e,value:t,muted:s,accent:r}){return t==null||t===""?null:n.jsxs("div",{className:`data-row ${s?"data-row--muted":""}`,children:[n.jsx("span",{className:"data-row-label",children:e}),n.jsx("span",{className:`data-row-value ${r?"data-row-value--accent":""}`,children:t})]})}function no({to:e,icon:t,title:s,description:r}){return n.jsxs(Xe,{to:e,className:"action-card",children:[t&&n.jsx("div",{className:"action-card-icon",children:t}),n.jsxs("div",{className:"action-card-body",children:[n.jsx("span",{className:"action-card-title",children:s}),r&&n.jsx("span",{className:"action-card-desc",children:r})]}),n.jsx(xr,{size:16,className:"action-card-arrow"})]})}function J0({isOpen:e,onClose:t,title:s,children:r}){const a=u.useRef(null);return u.useEffect(()=>{if(!e)return;const i=l=>{l.key==="Escape"&&t()};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[e,t]),u.useEffect(()=>{if(!e)return;const i=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=i}},[e]),u.useEffect(()=>{if(!e||!a.current)return;const i=a.current.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');i==null||i.focus()},[e]),e?n.jsx("div",{className:"slide-panel-overlay",onClick:t,children:n.jsxs("div",{ref:a,className:"slide-panel",onClick:i=>i.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":s,children:[n.jsxs("div",{className:"slide-panel-header",children:[n.jsx("h2",{className:"slide-panel-title",children:s}),n.jsx("button",{className:"slide-panel-close",onClick:t,"aria-label":"",children:n.jsx(Pa,{size:18})})]}),n.jsx("div",{className:"slide-panel-body",children:r})]})}):null}const X0=[{to:"/",label:"",icon:jf},{to:"/orders",label:"",icon:tr},{to:"/catalog",label:"",icon:Nn},{to:"/stock",label:"",icon:V0},{to:"/customers",label:"",icon:ba},{to:"/analytics",label:"",icon:hl},{to:"/settings",label:"",icon:wu,dividerBefore:!0}],Z0=[{to:"/",label:"",icon:jf},{to:"/orders",label:"",icon:tr},{to:"/sellers",label:"",icon:Kj},{to:"/customers",label:"",icon:ba},{to:"/finance",label:"",icon:ff},{to:"/analytics",label:"",icon:hl}];function eb(){const{role:e,logout:t}=ml(),s=ts(),r=e==="seller"?X0:Z0,a=()=>{var i;t(),Yn()?(i=ij())==null||i.close():s("/login")};return n.jsxs("aside",{className:"sidebar-v2",children:[n.jsxs("div",{className:"sidebar-v2-brand",children:[n.jsx("img",{src:"/android-chrome-192x192.png",alt:"flurai",className:"sidebar-v2-logo-img",width:28,height:28}),n.jsx("span",{className:"sidebar-v2-brand-text",children:"flurai"})]}),n.jsx("nav",{className:"sidebar-v2-nav",children:r.map(i=>n.jsxs("div",{children:[i.dividerBefore&&n.jsx("div",{className:"sidebar-v2-divider"}),n.jsxs(tj,{to:i.to,end:i.to==="/",className:({isActive:l})=>`sidebar-v2-link ${l?"sidebar-v2-link--active":""}`,children:[n.jsx(i.icon,{size:18,className:"sidebar-v2-icon"}),n.jsx("span",{className:"sidebar-v2-link-text",children:i.label})]})]},i.to))}),n.jsxs("div",{className:"sidebar-v2-footer",children:[n.jsx("div",{className:"sidebar-v2-divider"}),n.jsxs("button",{className:"sidebar-v2-link sidebar-v2-logout",onClick:a,children:[n.jsx(y0,{size:18,className:"sidebar-v2-icon"}),n.jsx("span",{className:"sidebar-v2-link-text",children:""})]})]})]})}function tb(){return n.jsxs("div",{className:"layout-v2",children:[n.jsx(eb,{}),n.jsx("main",{className:"layout-v2-main",children:n.jsx(Wy,{})})]})}function nb(){const{login:e}=ml(),t=ts(),[s,r]=u.useState(""),[a,i]=u.useState(""),[l,o]=u.useState(""),[c,d]=u.useState(!1),[h,g]=u.useState(!1),m=async _=>{_.preventDefault(),o(""),d(!0);try{try{const{token:N}=await jj(s,a);e({token:N,role:"admin"}),t("/",{replace:!0});return}catch{}const{token:j,seller_id:S}=await bj(s,a);e({token:j,role:"seller",sellerId:S}),t("/",{replace:!0})}catch(j){o(j instanceof Error?j.message:" ")}finally{d(!1)}};return n.jsxs("div",{className:"login-page",children:[n.jsx("div",{className:"login-page__bg-glow login-page__bg-glow--1"}),n.jsx("div",{className:"login-page__bg-glow login-page__bg-glow--2"}),n.jsxs("div",{className:"login-card",children:[n.jsxs("div",{className:"login-header",children:[n.jsx("img",{src:"/android-chrome-192x192.png",alt:"flurai",className:"login-header__logo",width:56,height:56}),n.jsx("h1",{className:"login-header__title",children:"flurai"}),n.jsx("p",{className:"login-header__subtitle",children:" "})]}),n.jsxs("form",{onSubmit:m,className:"login-form",children:[n.jsxs("div",{className:"login-field",children:[n.jsx("label",{className:"login-field__label",htmlFor:"login",children:""}),n.jsx("input",{id:"login",type:"text",className:"login-field__input",placeholder:" ",value:s,onChange:_=>r(_.target.value),autoFocus:!0,disabled:c,autoComplete:"username"})]}),n.jsxs("div",{className:"login-field",children:[n.jsx("label",{className:"login-field__label",htmlFor:"password",children:""}),n.jsxs("div",{className:"login-field__password-wrap",children:[n.jsx("input",{id:"password",type:h?"text":"password",className:"login-field__input",placeholder:" ",value:a,onChange:_=>i(_.target.value),disabled:c,autoComplete:"current-password"}),n.jsx("button",{type:"button",className:"login-field__eye",onClick:()=>g(!h),tabIndex:-1,children:h?n.jsx(er,{size:18}):n.jsx(vs,{size:18})})]})]}),l&&n.jsx("div",{className:"login-error",children:l}),n.jsx("button",{type:"submit",className:"login-submit",disabled:c,children:c?n.jsx("span",{className:"login-submit__spinner"}):n.jsxs(n.Fragment,{children:[n.jsx(g0,{size:18}),n.jsx("span",{children:""})]})})]})]})]})}var kf={},vl={};(function(){var e={},t="";try{t=location.hash.toString()}catch{}var s=c(t),r=f("initParams");if(r)for(var a in r)typeof s[a]>"u"&&(s[a]=r[a]);N("initParams",s);var i=!1,l;try{if(i=window.parent!=null&&window!=window.parent,i){window.addEventListener("message",function(p){if(p.source===window.parent){try{var v=JSON.parse(p.data)}catch{return}if(!(!v||!v.eventType))if(v.eventType=="set_custom_style")p.origin==="https://web.telegram.org"&&(l.innerHTML=v.eventData);else if(v.eventType=="reload_iframe"){try{window.parent.postMessage(JSON.stringify({eventType:"iframe_will_reload"}),"*")}catch{}location.reload()}else m(v.eventType,v.eventData)}}),l=document.createElement("style"),document.head.appendChild(l);try{window.parent.postMessage(JSON.stringify({eventType:"iframe_ready",eventData:{reload_supported:!0}}),"*")}catch{}}}catch{}function o(p){try{return p=p.replace(/\+/g,"%20"),decodeURIComponent(p)}catch{return p}}function c(p){p=p.replace(/^#/,"");var v={};if(!p.length)return v;if(p.indexOf("=")<0&&p.indexOf("?")<0)return v._path=o(p),v;var x=p.indexOf("?");if(x>=0){var C=p.substr(0,x);v._path=o(C),p=p.substr(x+1)}var M=d(p);for(var O in M)v[O]=M[O];return v}function d(p){var v={};if(!p.length)return v;var x=p.split("&"),C,M,O,E;for(C=0;C<x.length;C++)M=x[C].split("="),O=o(M[0]),E=M[1]==null?null:o(M[1]),v[O]=E;return v}function h(p,v){var x=p.indexOf("#");if(x<0)return p+"#"+v;var C=p.substr(x+1);return C.indexOf("=")>=0||C.indexOf("?")>=0?p+"&"+v:C.length>0?p+"?"+v:p+v}function g(p,v,x){if(v||(v=function(){}),x===void 0&&(x=""),console.log("[Telegram.WebView] > postEvent",p,x),window.TelegramWebviewProxy!==void 0)TelegramWebviewProxy.postEvent(p,JSON.stringify(x)),v();else if(window.external&&"notify"in window.external)window.external.notify(JSON.stringify({eventType:p,eventData:x})),v();else if(i)try{var C="https://web.telegram.org";C="*",window.parent.postMessage(JSON.stringify({eventType:p,eventData:x}),C),v()}catch(M){v(M)}else v({notAvailable:!0})}function m(p,v){console.log("[Telegram.WebView] < receiveEvent",p,v),_(p,function(x){x(p,v)})}function _(p,v){var x=e[p];if(!(x===void 0||!x.length))for(var C=0;C<x.length;C++)try{v(x[C])}catch{}}function j(p,v){e[p]===void 0&&(e[p]=[]);var x=e[p].indexOf(v);x===-1&&e[p].push(v)}function S(p,v){if(e[p]!==void 0){var x=e[p].indexOf(v);x!==-1&&e[p].splice(x,1)}}function N(p,v){try{return window.sessionStorage.setItem("__telegram__"+p,JSON.stringify(v)),!0}catch{}return!1}function f(p){try{return JSON.parse(window.sessionStorage.getItem("__telegram__"+p))}catch{}return null}window.Telegram||(window.Telegram={}),window.Telegram.WebView={initParams:s,isIframe:i,onEvent:j,offEvent:S,postEvent:g,receiveEvent:m,callEventCallbacks:_},window.Telegram.Utils={urlSafeDecode:o,urlParseQueryString:d,urlParseHashParams:c,urlAppendHashParams:h,sessionStorageSet:N,sessionStorageGet:f},window.TelegramGameProxy_receiveEvent=m,window.TelegramGameProxy={receiveEvent:m}})();(function(){var e=window.Telegram.Utils,t=window.Telegram.WebView,s=t.initParams,r=t.isIframe,a={},i="",l={},o={},c="light",d="6.0",h="unknown",g=!0,m=!1,_=!1,j="bg_color",S="bg_color",N=null;if(s.tgWebAppData&&s.tgWebAppData.length){i=s.tgWebAppData,l=e.urlParseQueryString(i);for(var f in l){var p=l[f];try{(p.substr(0,1)=="{"&&p.substr(-1)=="}"||p.substr(0,1)=="["&&p.substr(-1)=="]")&&(l[f]=JSON.parse(p))}catch{}}}var v=e.sessionStorageGet("themeParams");if(s.tgWebAppThemeParams&&s.tgWebAppThemeParams.length){var x=s.tgWebAppThemeParams;try{var C=JSON.parse(x);C&&we(C)}catch{}}v&&we(v);var M=e.sessionStorageGet("defaultColors");if(s.tgWebAppDefaultColors&&s.tgWebAppDefaultColors.length){var O=s.tgWebAppDefaultColors;try{var E=JSON.parse(O);E&&be(E)}catch{}}M&&be(M),s.tgWebAppVersion&&(d=s.tgWebAppVersion),s.tgWebAppPlatform&&(h=s.tgWebAppPlatform);var W=e.sessionStorageGet("isFullscreen");s.tgWebAppFullscreen&&ve(!0),W&&ve(W=="yes");var z=e.sessionStorageGet("isOrientationLocked");z&&ze(z=="yes");function A(y,b){b.theme_params&&(we(b.theme_params),window.Telegram.WebApp.MainButton.setParams({}),window.Telegram.WebApp.SecondaryButton.setParams({}),jl(),bl(),_l(),w("themeChanged"))}var G=window.innerHeight;function H(y,b){b.height&&(window.removeEventListener("resize",V),Le(b))}function V(y){G!=window.innerHeight&&(G=window.innerHeight,w("viewportChanged",{isStateStable:!0}))}function Y(y,b){b&&fe(b)}function ne(y,b){b&&ye(b)}function J(y,b){b.is_visible?(g=!0,w("activated")):(g=!1,w("deactivated"))}function D(y){if(!(y.metaKey||y.ctrlKey)){for(var b=y.target;b.tagName!="A"&&b.parentNode;)b=b.parentNode;b.tagName=="A"&&b.target!="_blank"&&(b.protocol=="http:"||b.protocol=="https:")&&b.hostname=="t.me"&&(a.openTgLink(b.href),y.preventDefault())}}function P(y){return y.toString().replace(/^\s+|\s+$/g,"")}function w(y){var b=Array.prototype.slice.call(arguments);y=b.shift(),t.callEventCallbacks("webview:"+y,function(k){k.apply(a,b)})}function T(y,b){t.onEvent("webview:"+y,b)}function B(y,b){t.offEvent("webview:"+y,b)}function q(y,b){var k=document.documentElement;k&&k.style&&k.style.setProperty&&k.style.setProperty("--tg-"+y,b)}function ve(y){m=!!y,e.sessionStorageSet("isFullscreen",m?"yes":"no")}function ze(y){_=!!y,e.sessionStorageSet("isOrientationLocked",_?"yes":"no")}function we(y){y.bg_color=="#1c1c1d"&&y.bg_color==y.secondary_bg_color&&(y.secondary_bg_color="#2c2c2e");var b;for(var k in y)(b=Ps(y[k]))&&(o[k]=b,k=="bg_color"&&(c=Jf(b)?"dark":"light",q("color-scheme",c)),k="theme-"+k.split("_").join("-"),q(k,b));e.sessionStorageSet("themeParams",o)}function be(y){c=="dark"?(y.bg_dark_color&&(j=y.bg_dark_color),y.header_dark_color&&(S=null,N=y.header_dark_color)):(y.bg_color&&(j=y.bg_color),y.header_color&&(S=null,N=y.header_color)),e.sessionStorageSet("defaultColors",y)}var Ce={};function jt(y){for(var b=100;--b;){for(var k="",$="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",F=$.length,Z=0;Z<y;Z++)k+=$[Math.floor(Math.random()*F)];if(!Ce[k])return Ce[k]={},k}throw Error("WebAppCallbackIdGenerateFailed")}var K=!1,X=!1,me=!0;function Le(y){typeof y<"u"&&(me=!!y.is_expanded,K=y.height,y.is_state_stable&&(X=y.height),w("viewportChanged",{isStateStable:!!y.is_state_stable}));var b,k;K!==!1?b=K-Ot+"px":b=Ot?"calc(100vh - "+Ot+"px)":"100vh",X!==!1?k=X-Ot+"px":k=Ot?"calc(100vh - "+Ot+"px)":"100vh",q("viewport-height",b),q("viewport-stable-height",k)}var U={top:0,bottom:0,left:0,right:0};function fe(y){typeof y<"u"&&(typeof y.top<"u"&&(U.top=y.top),typeof y.bottom<"u"&&(U.bottom=y.bottom),typeof y.left<"u"&&(U.left=y.left),typeof y.right<"u"&&(U.right=y.right),w("safeAreaChanged")),q("safe-area-inset-top",U.top+"px"),q("safe-area-inset-bottom",U.bottom+"px"),q("safe-area-inset-left",U.left+"px"),q("safe-area-inset-right",U.right+"px")}var Ne={top:0,bottom:0,left:0,right:0};function ye(y){typeof y<"u"&&(typeof y.top<"u"&&(Ne.top=y.top),typeof y.bottom<"u"&&(Ne.bottom=y.bottom),typeof y.left<"u"&&(Ne.left=y.left),typeof y.right<"u"&&(Ne.right=y.right),w("contentSafeAreaChanged")),q("content-safe-area-inset-top",Ne.top+"px"),q("content-safe-area-inset-bottom",Ne.bottom+"px"),q("content-safe-area-inset-left",Ne.left+"px"),q("content-safe-area-inset-right",Ne.right+"px")}var I=!1;function se(y){if(!_e("6.2")){console.warn("[Telegram.WebApp] Closing confirmation is not supported in version "+d);return}I=!!y,t.postEvent("web_app_setup_closing_behavior",!1,{need_confirmation:I})}var Me=!0;function We(y){if(!_e("7.7")){console.warn("[Telegram.WebApp] Changing swipes behavior is not supported in version "+d);return}Me=!!y,t.postEvent("web_app_setup_swipe_behavior",!1,{allow_vertical_swipe:Me})}function Kt(y,b){ve(b.is_fullscreen),w("fullscreenChanged")}function Cs(y,b){b.error=="ALREADY_FULLSCREEN"&&!m&&ve(!0),w("fullscreenFailed",{error:b.error})}function L(y){if(!_e("8.0")){console.warn("[Telegram.WebApp] Orientation locking is not supported in version "+d);return}ze(y),t.postEvent("web_app_toggle_orientation_lock",!1,{locked:_})}var te=[];function Ee(y,b){w("homeScreenAdded")}function Fe(y,b){var k=b.status||"unknown";if(te.length>0){for(var $=0;$<te.length;$++){var F=te[$];F(k)}te=[]}w("homeScreenChecked",{status:k})}var dt=!1;function R(y,b){if(dt){var k=dt;dt=!1,k.callback&&k.callback(!0),w("shareMessageSent")}}function de(y,b){if(dt){var k=dt;dt=!1,k.callback&&k.callback(!1),w("shareMessageFailed",{error:b.error})}}var Be=!1;function vn(y,b){if(Be){var k=Be;Be=!1,k.callback&&k.callback(!0),w("emojiStatusSet")}}function Re(y,b){if(Be){var k=Be;Be=!1,k.callback&&k.callback(!1),w("emojiStatusFailed",{error:b.error})}}var kt=!1;function Aa(y,b){if(kt){var k=kt;kt=!1,k.callback&&k.callback(b.status=="allowed"),w("emojiStatusAccessRequested",{status:b.status})}}var gn=!1;function La(){return S=="secondary_bg_color"?o.secondary_bg_color:S=="bg_color"?o.bg_color:N}function Es(y){if(!_e("6.1")){console.warn("[Telegram.WebApp] Header color is not supported in version "+d);return}_e("6.9")||(o.bg_color&&o.bg_color==y?y="bg_color":o.secondary_bg_color&&o.secondary_bg_color==y&&(y="secondary_bg_color"));var b=null,k=null;if(y=="bg_color"||y=="secondary_bg_color")k=y;else if(_e("6.9")&&(b=Ps(y),!b))throw console.error("[Telegram.WebApp] Header color format is invalid",y),Error("WebAppHeaderColorInvalid");if(!_e("6.9")&&k!="bg_color"&&k!="secondary_bg_color")throw console.error("[Telegram.WebApp] Header color key should be one of Telegram.WebApp.themeParams.bg_color, Telegram.WebApp.themeParams.secondary_bg_color, 'bg_color', 'secondary_bg_color'",y),Error("WebAppHeaderColorKeyInvalid");S=k,N=b,jl()}var Eu=null,yl=null;function jl(){(Eu!=S||yl!=N)&&(Eu=S,yl=N,yl?t.postEvent("web_app_set_header_color",!1,{color:N}):t.postEvent("web_app_set_header_color",!1,{color_key:S}))}function Pu(){return j=="secondary_bg_color"?o.secondary_bg_color:j=="bg_color"?o.bg_color:j}function Yf(y){if(!_e("6.1")){console.warn("[Telegram.WebApp] Background color is not supported in version "+d);return}var b;if(y=="bg_color"||y=="secondary_bg_color")b=y;else if(b=Ps(y),!b)throw console.error("[Telegram.WebApp] Background color format is invalid",y),Error("WebAppBackgroundColorInvalid");j=b,bl()}var Tu=null;function bl(){var y=Pu();Tu!=y&&(Tu=y,t.postEvent("web_app_set_background_color",!1,{color:y}))}var yr="bottom_bar_bg_color";function jr(){return yr=="bottom_bar_bg_color"?o.bottom_bar_bg_color||o.secondary_bg_color||"#ffffff":yr=="secondary_bg_color"?o.secondary_bg_color:yr=="bg_color"?o.bg_color:yr}function Kf(y){if(!_e("7.10")){console.warn("[Telegram.WebApp] Bottom bar color is not supported in version "+d);return}var b;if(y=="bg_color"||y=="secondary_bg_color"||y=="bottom_bar_bg_color")b=y;else if(b=Ps(y),!b)throw console.error("[Telegram.WebApp] Bottom bar color format is invalid",y),Error("WebAppBottomBarColorInvalid");yr=b,_l(),window.Telegram.WebApp.SecondaryButton.setParams({})}var Au=null;function _l(){var y=jr();Au!=y&&(Au=y,t.postEvent("web_app_set_bottom_bar_color",!1,{color:y})),s.tgWebAppDebug&&Mu()}function Ps(y){y+="";var b;if(b=/^\s*#([0-9a-f]{6})\s*$/i.exec(y))return"#"+b[1].toLowerCase();if(b=/^\s*#([0-9a-f])([0-9a-f])([0-9a-f])\s*$/i.exec(y))return("#"+b[1]+b[1]+b[2]+b[2]+b[3]+b[3]).toLowerCase();if(b=/^\s*rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+\.{0,1}\d*))?\)\s*$/.exec(y)){var k=parseInt(b[1]),$=parseInt(b[2]),F=parseInt(b[3]);return k=(k<16?"0":"")+k.toString(16),$=($<16?"0":"")+$.toString(16),F=(F<16?"0":"")+F.toString(16),"#"+k+$+F}return!1}function Jf(y){y=y.replace(/[\s#]/g,""),y.length==3&&(y=y[0]+y[0]+y[1]+y[1]+y[2]+y[2]);var b=parseInt(y.substr(0,2),16),k=parseInt(y.substr(2,2),16),$=parseInt(y.substr(4,2),16),F=Math.sqrt(.299*(b*b)+.587*(k*k)+.114*($*$));return F<120}function Xf(y,b){typeof y!="string"&&(y=""),typeof b!="string"&&(b=""),y=y.replace(/^\s+|\s+$/g,"").split("."),b=b.replace(/^\s+|\s+$/g,"").split(".");var k=Math.max(y.length,b.length),$,F,Z;for($=0;$<k;$++)if(F=parseInt(y[$])||0,Z=parseInt(b[$])||0,F!=Z)return F>Z?1:-1;return 0}function _e(y){return Xf(d,y)>=0}function Zf(y){if(window.Blob)try{return new Blob([y]).size}catch{}for(var b=y.length,k=y.length-1;k>=0;k--){var $=y.charCodeAt(k);$>127&&$<=2047?b++:$>2047&&$<=65535&&(b+=2),$>=56320&&$<=57343&&k--}return b}var ev=function(){var y=!1,b={};Object.defineProperty(b,"isVisible",{set:function(he){Te({is_visible:he})},get:function(){return y},enumerable:!0});var k=null;t.onEvent("back_button_pressed",$);function $(){w("backButtonClicked")}function F(){return{is_visible:y}}function Z(he){return typeof he>"u"&&(he=F()),JSON.stringify(he)}function ce(){return _e("6.1")?!0:(console.warn("[Telegram.WebApp] BackButton is not supported in version "+d),!1)}function le(){var he=F(),Pe=Z(he);k!==Pe&&(k=Pe,t.postEvent("web_app_setup_back_button",!1,he))}function Te(he){return ce()&&(typeof he.is_visible<"u"&&(y=!!he.is_visible),le()),b}return b.onClick=function(he){return ce()&&T("backButtonClicked",he),b},b.offClick=function(he){return ce()&&B("backButtonClicked",he),b},b.show=function(){return Te({is_visible:!0})},b.hide=function(){return Te({is_visible:!1})},b}(),Wt=null,Nl={},Ot=0;if(s.tgWebAppDebug){Wt=document.createElement("tg-bottom-bar");var Lu={display:"flex",gap:"7px",font:"600 14px/18px sans-serif",width:"100%",background:jr(),position:"fixed",left:"0",right:"0",bottom:"0",margin:"0",padding:"7px",textAlign:"center",boxSizing:"border-box",zIndex:"10000"};for(var Ru in Lu)Wt.style[Ru]=Lu[Ru];document.addEventListener("DOMContentLoaded",function y(b){document.removeEventListener("DOMContentLoaded",y),document.body.appendChild(Wt)});var Ou=document.createElement("style");Ou.innerHTML='tg-bottom-button.shine { position: relative; overflow: hidden; } tg-bottom-button.shine:before { content:""; position: absolute; top: 0; width: 100%; height: 100%; background: linear-gradient(120deg, transparent, rgba(255, 255, 255, .2), transparent); animation: tg-bottom-button-shine 5s ease-in-out infinite; } @-webkit-keyframes tg-bottom-button-shine { 0% {left: -100%;} 12%,100% {left: 100%}} @keyframes tg-bottom-button-shine { 0% {left: -100%;} 12%,100% {left: 100%}}',Wt.appendChild(Ou)}function Mu(){var y=Nl.main._bottomButton,b=Nl.secondary._bottomButton;y.isVisible||b.isVisible?(Wt.style.display="flex",Ot=58,y.isVisible&&b.isVisible&&(b.position=="top"?(Wt.style.flexDirection="column-reverse",Ot+=51):b.position=="bottom"?(Wt.style.flexDirection="column",Ot+=51):b.position=="left"?Wt.style.flexDirection="row-reverse":b.position=="right"&&(Wt.style.flexDirection="row"))):(Wt.style.display="none",Ot=0),Wt.style.background=jr(),document.documentElement&&(document.documentElement.style.boxSizing="border-box",document.documentElement.style.paddingBottom=Ot+"px"),Le()}var Du=function(y){var b=y=="main";if(b)var k="web_app_setup_main_button",$="main_button_pressed",F="mainButtonClicked",Z="Continue",ce=function(){return o.button_color||"#2481cc"},le=function(){return o.button_text_color||"#ffffff"};else var k="web_app_setup_secondary_button",$="secondary_button_pressed",F="secondaryButtonClicked",Z="Cancel",ce=function(){return jr()},le=function(){return o.button_color||"#2481cc"};var Te=!1,he=!0,Pe=!1,Ie=!1,Se=y,ee=Z,oe=!1,ge=!1,nt="left",pe={};Object.defineProperty(pe,"type",{get:function(){return Se},enumerable:!0}),Object.defineProperty(pe,"text",{set:function(re){pe.setParams({text:re})},get:function(){return ee},enumerable:!0}),Object.defineProperty(pe,"color",{set:function(re){pe.setParams({color:re})},get:function(){return oe||ce()},enumerable:!0}),Object.defineProperty(pe,"textColor",{set:function(re){pe.setParams({text_color:re})},get:function(){return ge||le()},enumerable:!0}),Object.defineProperty(pe,"isVisible",{set:function(re){pe.setParams({is_visible:re})},get:function(){return Te},enumerable:!0}),Object.defineProperty(pe,"isProgressVisible",{get:function(){return Ie},enumerable:!0}),Object.defineProperty(pe,"isActive",{set:function(re){pe.setParams({is_active:re})},get:function(){return he},enumerable:!0}),Object.defineProperty(pe,"hasShineEffect",{set:function(re){pe.setParams({has_shine_effect:re})},get:function(){return Pe},enumerable:!0}),b||Object.defineProperty(pe,"position",{set:function(re){pe.setParams({position:re})},get:function(){return nt},enumerable:!0});var Ze=null;t.onEvent($,zu);var Ae=null;if(s.tgWebAppDebug){Ae=document.createElement("tg-bottom-button");var st={display:"none",width:"100%",height:"44px",borderRadius:"0",background:"no-repeat right center",padding:"13px 15px",textAlign:"center",boxSizing:"border-box"};for(var An in st)Ae.style[An]=st[An];Wt.appendChild(Ae),Ae.addEventListener("click",zu,!1),Ae._bottomButton=pe,Nl[y]=Ae}function zu(){he&&w(F)}function Fu(){var re=pe.color,xn=pe.textColor;if(Te){var Ts={is_visible:!0,is_active:he,is_progress_visible:Ie,text:ee,color:re,text_color:xn,has_shine_effect:Pe&&he&&!Ie};b||(Ts.position=nt)}else var Ts={is_visible:!1};return Ts}function yv(re){return typeof re>"u"&&(re=Fu()),JSON.stringify(re)}function Sl(){var re=Fu(),xn=yv(re);Ze!==xn&&(Ze=xn,t.postEvent(k,!1,re),s.tgWebAppDebug&&jv(re))}function jv(re){re.is_visible?(Ae.style.display="block",Ae.style.opacity=re.is_active?"1":"0.8",Ae.style.cursor=re.is_active?"pointer":"auto",Ae.disabled=!re.is_active,Ae.innerText=re.text,Ae.className=re.has_shine_effect?"shine":"",Ae.style.backgroundImage=re.is_progress_visible?"url('data:image/svg+xml,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewport="0 0 48 48" width="48px" height="48px"><circle cx="50%" cy="50%" stroke="'+re.text_color+'" stroke-width="2.25" stroke-linecap="round" fill="none" stroke-dashoffset="106" r="9" stroke-dasharray="56.52" rotate="-90"><animate attributeName="stroke-dashoffset" attributeType="XML" dur="360s" from="0" to="12500" repeatCount="indefinite"></animate><animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" from="-90 24 24" to="630 24 24" repeatCount="indefinite"></animateTransform></circle></svg>')+"')":"none",Ae.style.backgroundColor=re.color,Ae.style.color=re.text_color):Ae.style.display="none",Mu()}function bv(re){if(typeof re.text<"u"){var xn=P(re.text);if(!xn.length)throw console.error("[Telegram.WebApp] Bottom button text is required",re.text),Error("WebAppBottomButtonParamInvalid");if(xn.length>64)throw console.error("[Telegram.WebApp] Bottom button text is too long",xn),Error("WebAppBottomButtonParamInvalid");ee=xn}if(typeof re.color<"u")if(re.color===!1||re.color===null)oe=!1;else{var Ts=Ps(re.color);if(!Ts)throw console.error("[Telegram.WebApp] Bottom button color format is invalid",re.color),Error("WebAppBottomButtonParamInvalid");oe=Ts}if(typeof re.text_color<"u")if(re.text_color===!1||re.text_color===null)ge=!1;else{var Wu=Ps(re.text_color);if(!Wu)throw console.error("[Telegram.WebApp] Bottom button text color format is invalid",re.text_color),Error("WebAppBottomButtonParamInvalid");ge=Wu}if(typeof re.is_visible<"u"){if(re.is_visible&&!pe.text.length)throw console.error("[Telegram.WebApp] Bottom button text is required"),Error("WebAppBottomButtonParamInvalid");Te=!!re.is_visible}if(typeof re.has_shine_effect<"u"&&(Pe=!!re.has_shine_effect),!b&&typeof re.position<"u"){if(re.position!="left"&&re.position!="right"&&re.position!="top"&&re.position!="bottom")throw console.error("[Telegram.WebApp] Bottom button posiition is invalid",re.position),Error("WebAppBottomButtonParamInvalid");nt=re.position}return typeof re.is_active<"u"&&(he=!!re.is_active),Sl(),pe}return pe.setText=function(re){return pe.setParams({text:re})},pe.onClick=function(re){return T(F,re),pe},pe.offClick=function(re){return B(F,re),pe},pe.show=function(){return pe.setParams({is_visible:!0})},pe.hide=function(){return pe.setParams({is_visible:!1})},pe.enable=function(){return pe.setParams({is_active:!0})},pe.disable=function(){return pe.setParams({is_active:!1})},pe.showProgress=function(re){return he=!!re,Ie=!0,Sl(),pe},pe.hideProgress=function(){return pe.isActive||(he=!0),Ie=!1,Sl(),pe},pe.setParams=bv,pe},tv=Du("main"),nv=Du("secondary"),$u=function(){var y=!1,b={};Object.defineProperty(b,"isVisible",{set:function(he){Te({is_visible:he})},get:function(){return y},enumerable:!0});var k=null;t.onEvent("settings_button_pressed",$);function $(){w("settingsButtonClicked")}function F(){return{is_visible:y}}function Z(he){return typeof he>"u"&&(he=F()),JSON.stringify(he)}function ce(){return _e("6.10")?!0:(console.warn("[Telegram.WebApp] SettingsButton is not supported in version "+d),!1)}function le(){var he=F(),Pe=Z(he);k!==Pe&&(k=Pe,t.postEvent("web_app_setup_settings_button",!1,he))}function Te(he){return ce()&&(typeof he.is_visible<"u"&&(y=!!he.is_visible),le()),b}return b.onClick=function(he){return ce()&&T("settingsButtonClicked",he),b},b.offClick=function(he){return ce()&&B("settingsButtonClicked",he),b},b.show=function(){return Te({is_visible:!0})},b.hide=function(){return Te({is_visible:!1})},b}(),sv=function(){var y={};function b(k){if(!_e("6.1"))return console.warn("[Telegram.WebApp] HapticFeedback is not supported in version "+d),y;if(k.type=="impact"){if(k.impact_style!="light"&&k.impact_style!="medium"&&k.impact_style!="heavy"&&k.impact_style!="rigid"&&k.impact_style!="soft")throw console.error("[Telegram.WebApp] Haptic impact style is invalid",k.impact_style),Error("WebAppHapticImpactStyleInvalid")}else if(k.type=="notification"){if(k.notification_type!="error"&&k.notification_type!="success"&&k.notification_type!="warning")throw console.error("[Telegram.WebApp] Haptic notification type is invalid",k.notification_type),Error("WebAppHapticNotificationTypeInvalid")}else if(k.type!="selection_change")throw console.error("[Telegram.WebApp] Haptic feedback type is invalid",k.type),Error("WebAppHapticFeedbackTypeInvalid");return t.postEvent("web_app_trigger_haptic_feedback",!1,k),y}return y.impactOccurred=function(k){return b({type:"impact",impact_style:k})},y.notificationOccurred=function(k){return b({type:"notification",notification_type:k})},y.selectionChanged=function(){return b({type:"selection_change"})},y}(),rv=function(){var y={};function b(k,$,F){if(!_e("6.9"))throw console.error("[Telegram.WebApp] CloudStorage is not supported in version "+d),Error("WebAppMethodUnsupported");return wl(k,$,F),y}return y.setItem=function(k,$,F){return b("saveStorageValue",{key:k,value:$},F)},y.getItem=function(k,$){return y.getItems([k],$?function(F,Z){F?$(F):$(null,Z[k])}:null)},y.getItems=function(k,$){return b("getStorageValues",{keys:k},$)},y.removeItem=function(k,$){return y.removeItems([k],$)},y.removeItems=function(k,$){return b("deleteStorageValues",{keys:k},$)},y.getKeys=function(k){return b("getStorageKeys",{},k)},y}(),av=function(){var y=!1,b=!1,k="unknown",$=!1,F=!1,Z=!1,ce="",le={};Object.defineProperty(le,"isInited",{get:function(){return y},enumerable:!0}),Object.defineProperty(le,"isBiometricAvailable",{get:function(){return y&&b},enumerable:!0}),Object.defineProperty(le,"biometricType",{get:function(){return k||"unknown"},enumerable:!0}),Object.defineProperty(le,"isAccessRequested",{get:function(){return $},enumerable:!0}),Object.defineProperty(le,"isAccessGranted",{get:function(){return $&&F},enumerable:!0}),Object.defineProperty(le,"isBiometricTokenSaved",{get:function(){return Z},enumerable:!0}),Object.defineProperty(le,"deviceId",{get:function(){return ce||""},enumerable:!0});var Te={callbacks:[]},he=!1,Pe=!1,Ie=!1;t.onEvent("biometry_info_received",Se),t.onEvent("biometry_auth_requested",ee),t.onEvent("biometry_token_updated",oe);function Se(pe,Ze){if(y=!0,Ze.available?(b=!0,k=Ze.type||"unknown",Ze.access_requested?($=!0,F=!!Ze.access_granted,Z=!!Ze.token_saved):($=!1,F=!1,Z=!1)):(b=!1,k="unknown",$=!1,F=!1,Z=!1),ce=Ze.device_id||"",Te.callbacks.length>0){for(var Ae=0;Ae<Te.callbacks.length;Ae++){var st=Te.callbacks[Ae];st()}Te.callbacks=[]}if(he){var An=he;he=!1,An.callback&&An.callback(F)}w("biometricManagerUpdated")}function ee(pe,Ze){var Ae=Ze.status=="authorized",st=Ze.token||"";if(Pe){var An=Pe;Pe=!1,An.callback&&An.callback(Ae,Ae?st:null)}w("biometricAuthRequested",Ae?{isAuthenticated:!0,biometricToken:st}:{isAuthenticated:!1})}function oe(pe,Ze){var Ae=!1;if(b&&$&&(Ze.status=="updated"?(Z=!0,Ae=!0):Ze.status=="removed"&&(Z=!1,Ae=!0)),Ie){var st=Ie;Ie=!1,st.callback&&st.callback(Ae)}w("biometricTokenUpdated",{isUpdated:Ae})}function ge(){return _e("7.2")?!0:(console.warn("[Telegram.WebApp] BiometricManager is not supported in version "+d),!1)}function nt(){if(!y)throw console.error("[Telegram.WebApp] BiometricManager should be inited before using."),Error("WebAppBiometricManagerNotInited");return!0}return le.init=function(pe){return!ge()||y||(pe&&Te.callbacks.push(pe),t.postEvent("web_app_biometry_get_info",!1)),le},le.requestAccess=function(pe,Ze){if(!ge())return le;if(nt(),!b)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(he)throw console.error("[Telegram.WebApp] Access is already requested"),Error("WebAppBiometricManagerAccessRequested");var Ae={};if(typeof pe.reason<"u"){var st=P(pe.reason);if(st.length>128)throw console.error("[Telegram.WebApp] Biometric reason is too long",st),Error("WebAppBiometricRequestAccessParamInvalid");st.length>0&&(Ae.reason=st)}return he={callback:Ze},t.postEvent("web_app_biometry_request_access",!1,Ae),le},le.authenticate=function(pe,Ze){if(!ge())return le;if(nt(),!b)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!F)throw console.error("[Telegram.WebApp] Biometric access was not granted by the user."),Error("WebAppBiometricManagerBiometricAccessNotGranted");if(Pe)throw console.error("[Telegram.WebApp] Authentication request is already in progress."),Error("WebAppBiometricManagerAuthenticationRequested");var Ae={};if(typeof pe.reason<"u"){var st=P(pe.reason);if(st.length>128)throw console.error("[Telegram.WebApp] Biometric reason is too long",st),Error("WebAppBiometricRequestAccessParamInvalid");st.length>0&&(Ae.reason=st)}return Pe={callback:Ze},t.postEvent("web_app_biometry_request_auth",!1,Ae),le},le.updateBiometricToken=function(pe,Ze){if(!ge())return le;if(pe=pe||"",pe.length>1024)throw console.error("[Telegram.WebApp] Token is too long",pe),Error("WebAppBiometricManagerTokenInvalid");if(nt(),!b)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!F)throw console.error("[Telegram.WebApp] Biometric access was not granted by the user."),Error("WebAppBiometricManagerBiometricAccessNotGranted");if(Ie)throw console.error("[Telegram.WebApp] Token request is already in progress."),Error("WebAppBiometricManagerTokenUpdateRequested");return Ie={callback:Ze},t.postEvent("web_app_biometry_update_token",!1,{token:pe}),le},le.openSettings=function(){if(!ge())return le;if(nt(),!b)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!$)throw console.error("[Telegram.WebApp] Biometric access was not requested yet."),Error("WebAppBiometricManagerBiometricsAccessNotRequested");return F?(console.warn("[Telegram.WebApp] Biometric access was granted by the user, no need to go to settings."),le):(t.postEvent("web_app_biometry_open_settings",!1),le)},le}(),iv=function(){var y=!1,b=!1,k=!1,$=!1,F={};Object.defineProperty(F,"isInited",{get:function(){return y},enumerable:!0}),Object.defineProperty(F,"isLocationAvailable",{get:function(){return y&&b},enumerable:!0}),Object.defineProperty(F,"isAccessRequested",{get:function(){return k},enumerable:!0}),Object.defineProperty(F,"isAccessGranted",{get:function(){return k&&$},enumerable:!0});var Z={callbacks:[]},ce={callbacks:[]};t.onEvent("location_checked",le),t.onEvent("location_requested",Te);function le(Se,ee){if(y=!0,ee.available?(b=!0,ee.access_requested?(k=!0,$=!!ee.access_granted):(k=!1,$=!1)):(b=!1,k=!1,$=!1),Z.callbacks.length>0){for(var oe=0;oe<Z.callbacks.length;oe++){var ge=Z.callbacks[oe];ge()}Z.callbacks=[]}w("locationManagerUpdated")}function Te(Se,ee){if(!ee.available)oe=null;else{var oe={latitude:ee.latitude,longitude:ee.longitude,altitude:null,course:null,speed:null,horizontal_accuracy:null,vertical_accuracy:null,course_accuracy:null,speed_accuracy:null};typeof ee.altitude<"u"&&ee.altitude!==null&&(oe.altitude=ee.altitude),typeof ee.course<"u"&&ee.course!==null&&(oe.course=ee.course%360),typeof ee.speed<"u"&&ee.speed!==null&&(oe.speed=ee.speed),typeof ee.horizontal_accuracy<"u"&&ee.horizontal_accuracy!==null&&(oe.horizontal_accuracy=ee.horizontal_accuracy),typeof ee.vertical_accuracy<"u"&&ee.vertical_accuracy!==null&&(oe.vertical_accuracy=ee.vertical_accuracy),typeof ee.course_accuracy<"u"&&ee.course_accuracy!==null&&(oe.course_accuracy=ee.course_accuracy),typeof ee.speed_accuracy<"u"&&ee.speed_accuracy!==null&&(oe.speed_accuracy=ee.speed_accuracy)}!ee.available||!b||!k||!$?(Z.callbacks.push(function(){he(oe)}),t.postEvent("web_app_check_location",!1)):he(oe)}function he(Se){if(ce.callbacks.length>0){for(var ee=0;ee<ce.callbacks.length;ee++){var oe=ce.callbacks[ee];oe(Se)}ce.callbacks=[]}Se!==null&&w("locationRequested",{locationData:Se})}function Pe(){return _e("8.0")?!0:(console.warn("[Telegram.WebApp] LocationManager is not supported in version "+d),!1)}function Ie(){if(!y)throw console.error("[Telegram.WebApp] LocationManager should be inited before using."),Error("WebAppLocationManagerNotInited");return!0}return F.init=function(Se){return!Pe()||y||(Se&&Z.callbacks.push(Se),t.postEvent("web_app_check_location",!1)),F},F.getLocation=function(Se){if(!Pe())return F;if(Ie(),!b)throw console.error("[Telegram.WebApp] Location is not available on this device."),Error("WebAppLocationManagerLocationNotAvailable");return ce.callbacks.push(Se),t.postEvent("web_app_request_location"),F},F.openSettings=function(){if(!Pe())return F;if(Ie(),!b)throw console.error("[Telegram.WebApp] Location is not available on this device."),Error("WebAppLocationManagerLocationNotAvailable");if(!k)throw console.error("[Telegram.WebApp] Location access was not requested yet."),Error("WebAppLocationManagerLocationAccessNotRequested");return $?(console.warn("[Telegram.WebApp] Location access was granted by the user, no need to go to settings."),F):(t.postEvent("web_app_open_location_settings",!1),F)},F}(),lv=function(){var y=!1,b=null,k=null,$=null,F=[],Z=[],ce={};Object.defineProperty(ce,"isStarted",{get:function(){return y},enumerable:!0}),Object.defineProperty(ce,"x",{get:function(){return b},enumerable:!0}),Object.defineProperty(ce,"y",{get:function(){return k},enumerable:!0}),Object.defineProperty(ce,"z",{get:function(){return $},enumerable:!0}),t.onEvent("accelerometer_started",le),t.onEvent("accelerometer_stopped",Te),t.onEvent("accelerometer_changed",he),t.onEvent("accelerometer_failed",Pe);function le(Se,ee){if(y=!0,F.length>0){for(var oe=0;oe<F.length;oe++){var ge=F[oe];ge(!0)}F=[]}w("accelerometerStarted")}function Te(Se,ee){if(y=!1,Z.length>0){for(var oe=0;oe<Z.length;oe++){var ge=Z[oe];ge(!0)}Z=[]}w("accelerometerStopped")}function he(Se,ee){b=ee.x,k=ee.y,$=ee.z,w("accelerometerChanged")}function Pe(Se,ee){if(F.length>0){for(var oe=0;oe<F.length;oe++){var ge=F[oe];ge(!1)}F=[]}w("accelerometerFailed",{error:ee.error})}function Ie(){return _e("8.0")?!0:(console.warn("[Telegram.WebApp] Accelerometer is not supported in version "+d),!1)}return ce.start=function(Se,ee){if(Se=Se||{},!Ie())return ce;var oe={},ge=parseInt(Se.refresh_rate||1e3);return isNaN(ge)||ge<20||ge>1e3?console.warn("[Telegram.WebApp] Accelerometer refresh_rate is invalid",ge):oe.refresh_rate=ge,ee&&F.push(ee),t.postEvent("web_app_start_accelerometer",!1,oe),ce},ce.stop=function(Se){return Ie()&&(Se&&Z.push(Se),t.postEvent("web_app_stop_accelerometer")),ce},ce}(),ov=function(){var y=!1,b=null,k=null,$=null,F=!1,Z=[],ce=[],le={};Object.defineProperty(le,"isStarted",{get:function(){return y},enumerable:!0}),Object.defineProperty(le,"absolute",{get:function(){return F},enumerable:!0}),Object.defineProperty(le,"alpha",{get:function(){return b},enumerable:!0}),Object.defineProperty(le,"beta",{get:function(){return k},enumerable:!0}),Object.defineProperty(le,"gamma",{get:function(){return $},enumerable:!0}),t.onEvent("device_orientation_started",Te),t.onEvent("device_orientation_stopped",he),t.onEvent("device_orientation_changed",Pe),t.onEvent("device_orientation_failed",Ie);function Te(ee,oe){if(y=!0,Z.length>0){for(var ge=0;ge<Z.length;ge++){var nt=Z[ge];nt(!0)}Z=[]}w("deviceOrientationStarted")}function he(ee,oe){if(y=!1,ce.length>0){for(var ge=0;ge<ce.length;ge++){var nt=ce[ge];nt(!0)}ce=[]}w("deviceOrientationStopped")}function Pe(ee,oe){F=!!oe.absolute,b=oe.alpha,k=oe.beta,$=oe.gamma,w("deviceOrientationChanged")}function Ie(ee,oe){if(Z.length>0){for(var ge=0;ge<Z.length;ge++){var nt=Z[ge];nt(!1)}Z=[]}w("deviceOrientationFailed",{error:oe.error})}function Se(){return _e("8.0")?!0:(console.warn("[Telegram.WebApp] DeviceOrientation is not supported in version "+d),!1)}return le.start=function(ee,oe){if(ee=ee||{},!Se())return le;var ge={},nt=parseInt(ee.refresh_rate||1e3);return isNaN(nt)||nt<20||nt>1e3?console.warn("[Telegram.WebApp] DeviceOrientation refresh_rate is invalid",nt):ge.refresh_rate=nt,ge.need_absolute=!!ee.need_absolute,oe&&Z.push(oe),t.postEvent("web_app_start_device_orientation",!1,ge),le},le.stop=function(ee){return Se()&&(ee&&ce.push(ee),t.postEvent("web_app_stop_device_orientation")),le},le}(),cv=function(){var y=!1,b=null,k=null,$=null,F=[],Z=[],ce={};Object.defineProperty(ce,"isStarted",{get:function(){return y},enumerable:!0}),Object.defineProperty(ce,"x",{get:function(){return b},enumerable:!0}),Object.defineProperty(ce,"y",{get:function(){return k},enumerable:!0}),Object.defineProperty(ce,"z",{get:function(){return $},enumerable:!0}),t.onEvent("gyroscope_started",le),t.onEvent("gyroscope_stopped",Te),t.onEvent("gyroscope_changed",he),t.onEvent("gyroscope_failed",Pe);function le(Se,ee){if(y=!0,F.length>0){for(var oe=0;oe<F.length;oe++){var ge=F[oe];ge(!0)}F=[]}w("gyroscopeStarted")}function Te(Se,ee){if(y=!1,Z.length>0){for(var oe=0;oe<Z.length;oe++){var ge=Z[oe];ge(!0)}Z=[]}w("gyroscopeStopped")}function he(Se,ee){b=ee.x,k=ee.y,$=ee.z,w("gyroscopeChanged")}function Pe(Se,ee){if(F.length>0){for(var oe=0;oe<F.length;oe++){var ge=F[oe];ge(!1)}F=[]}w("gyroscopeFailed",{error:ee.error})}function Ie(){return _e("8.0")?!0:(console.warn("[Telegram.WebApp] Gyroscope is not supported in version "+d),!1)}return ce.start=function(Se,ee){if(Se=Se||{},!Ie())return ce;var oe={},ge=parseInt(Se.refresh_rate||1e3);return isNaN(ge)||ge<20||ge>1e3?console.warn("[Telegram.WebApp] Gyroscope refresh_rate is invalid",ge):oe.refresh_rate=ge,ee&&F.push(ee),t.postEvent("web_app_start_gyroscope",!1,oe),ce},ce.stop=function(Se){return Ie()&&(Se&&Z.push(Se),t.postEvent("web_app_stop_gyroscope")),ce},ce}(),br={};function uv(y,b){if(b.slug&&br[b.slug]){var k=br[b.slug];delete br[b.slug],k.callback&&k.callback(b.status),w("invoiceClosed",{url:k.url,status:b.status})}}var gn=!1;function Iu(y,b){if(gn){var k=gn;gn=!1;var $=null;typeof b.button_id<"u"&&($=b.button_id),k.callback&&k.callback($),w("popupClosed",{button_id:$})}}var ss=!1;function dv(y,b){if(ss){var k=ss,$=null;typeof b.data<"u"&&($=b.data),k.callback&&k.callback($)&&(ss=!1,t.postEvent("web_app_close_scan_qr_popup",!1)),w("qrTextReceived",{data:$})}}function pv(y,b){ss=!1,w("scanQrPopupClosed")}function mv(y,b){if(b.req_id&&Ce[b.req_id]){var k=Ce[b.req_id];delete Ce[b.req_id];var $=null;typeof b.data<"u"&&($=b.data),k.callback&&k.callback($),w("clipboardTextReceived",{data:$})}}var _r=!1;function hv(y,b){if(_r){var k=_r;_r=!1,k.callback&&k.callback(b.status=="allowed"),w("writeAccessRequested",{status:b.status})}}function fv(y,b){var k,$,F=0,Z=function(){wl("getRequestedContact",{},function(le,Te){Te&&Te.length?(clearTimeout($),y(Te)):(F+=50,k=setTimeout(Z,F))})},ce=function(){clearTimeout(k),y("")};$=setTimeout(ce,b),Z()}var Nr=!1;function vv(y,b){if(Nr){var k=Nr;Nr=!1;var $=b.status=="sent",F={status:b.status};$?fv(function(Z){if(Z&&Z.length){F.response=Z,F.responseUnsafe=e.urlParseQueryString(Z);for(var ce in F.responseUnsafe){var le=F.responseUnsafe[ce];try{(le.substr(0,1)=="{"&&le.substr(-1)=="}"||le.substr(0,1)=="["&&le.substr(-1)=="]")&&(F.responseUnsafe[ce]=JSON.parse(le))}catch{}}}k.callback&&k.callback($,F),w("contactRequested",F)},3e3):(k.callback&&k.callback($,F),w("contactRequested",F))}}var wr=!1;function gv(y,b){if(wr){var k=wr;wr=!1;var $=b.status=="downloading";k.callback&&k.callback($),w("fileDownloadRequested",{status:$?"downloading":"cancelled"})}}function xv(y,b){if(b.req_id&&Ce[b.req_id]){var k=Ce[b.req_id];delete Ce[b.req_id];var $=null,F=null;typeof b.result<"u"&&($=b.result),typeof b.error<"u"&&(F=b.error),k.callback&&k.callback(F,$)}}function wl(y,b,k){if(!_e("6.9"))throw console.error("[Telegram.WebApp] Method invokeCustomMethod is not supported in version "+d),Error("WebAppMethodUnsupported");var $=jt(16),F={req_id:$,method:y,params:b||{}};Ce[$]={callback:k},t.postEvent("web_app_invoke_custom_method",!1,F)}window.Telegram||(window.Telegram={}),Object.defineProperty(a,"initData",{get:function(){return i},enumerable:!0}),Object.defineProperty(a,"initDataUnsafe",{get:function(){return l},enumerable:!0}),Object.defineProperty(a,"version",{get:function(){return d},enumerable:!0}),Object.defineProperty(a,"platform",{get:function(){return h},enumerable:!0}),Object.defineProperty(a,"colorScheme",{get:function(){return c},enumerable:!0}),Object.defineProperty(a,"themeParams",{get:function(){return o},enumerable:!0}),Object.defineProperty(a,"isExpanded",{get:function(){return me},enumerable:!0}),Object.defineProperty(a,"viewportHeight",{get:function(){return(K===!1?window.innerHeight:K)-Ot},enumerable:!0}),Object.defineProperty(a,"viewportStableHeight",{get:function(){return(X===!1?window.innerHeight:X)-Ot},enumerable:!0}),Object.defineProperty(a,"safeAreaInset",{get:function(){return U},enumerable:!0}),Object.defineProperty(a,"contentSafeAreaInset",{get:function(){return Ne},enumerable:!0}),Object.defineProperty(a,"isClosingConfirmationEnabled",{set:function(y){se(y)},get:function(){return I},enumerable:!0}),Object.defineProperty(a,"isVerticalSwipesEnabled",{set:function(y){We(y)},get:function(){return Me},enumerable:!0}),Object.defineProperty(a,"isFullscreen",{get:function(){return m},enumerable:!0}),Object.defineProperty(a,"isOrientationLocked",{set:function(y){L(y)},get:function(){return _},enumerable:!0}),Object.defineProperty(a,"isActive",{get:function(){return g},enumerable:!0}),Object.defineProperty(a,"headerColor",{set:function(y){Es(y)},get:function(){return La()},enumerable:!0}),Object.defineProperty(a,"backgroundColor",{set:function(y){Yf(y)},get:function(){return Pu()},enumerable:!0}),Object.defineProperty(a,"bottomBarColor",{set:function(y){Kf(y)},get:function(){return jr()},enumerable:!0}),Object.defineProperty(a,"BackButton",{value:ev,enumerable:!0}),Object.defineProperty(a,"MainButton",{value:tv,enumerable:!0}),Object.defineProperty(a,"SecondaryButton",{value:nv,enumerable:!0}),Object.defineProperty(a,"SettingsButton",{value:$u,enumerable:!0}),Object.defineProperty(a,"HapticFeedback",{value:sv,enumerable:!0}),Object.defineProperty(a,"CloudStorage",{value:rv,enumerable:!0}),Object.defineProperty(a,"BiometricManager",{value:av,enumerable:!0}),Object.defineProperty(a,"Accelerometer",{value:lv,enumerable:!0}),Object.defineProperty(a,"DeviceOrientation",{value:ov,enumerable:!0}),Object.defineProperty(a,"Gyroscope",{value:cv,enumerable:!0}),Object.defineProperty(a,"LocationManager",{value:iv,enumerable:!0}),a.isVersionAtLeast=function(y){return _e(y)},a.setHeaderColor=function(y){a.headerColor=y},a.setBackgroundColor=function(y){a.backgroundColor=y},a.setBottomBarColor=function(y){a.bottomBarColor=y},a.enableClosingConfirmation=function(){a.isClosingConfirmationEnabled=!0},a.disableClosingConfirmation=function(){a.isClosingConfirmationEnabled=!1},a.enableVerticalSwipes=function(){a.isVerticalSwipesEnabled=!0},a.disableVerticalSwipes=function(){a.isVerticalSwipesEnabled=!1},a.lockOrientation=function(){a.isOrientationLocked=!0},a.unlockOrientation=function(){a.isOrientationLocked=!1},a.requestFullscreen=function(){if(!_e("8.0"))throw console.error("[Telegram.WebApp] Method requestFullscreen is not supported in version "+d),Error("WebAppMethodUnsupported");t.postEvent("web_app_request_fullscreen")},a.exitFullscreen=function(){if(!_e("8.0"))throw console.error("[Telegram.WebApp] Method exitFullscreen is not supported in version "+d),Error("WebAppMethodUnsupported");t.postEvent("web_app_exit_fullscreen")},a.addToHomeScreen=function(){if(!_e("8.0"))throw console.error("[Telegram.WebApp] Method addToHomeScreen is not supported in version "+d),Error("WebAppMethodUnsupported");t.postEvent("web_app_add_to_home_screen")},a.checkHomeScreenStatus=function(y){if(!_e("8.0"))throw console.error("[Telegram.WebApp] Method checkHomeScreenStatus is not supported in version "+d),Error("WebAppMethodUnsupported");y&&te.push(y),t.postEvent("web_app_check_home_screen")},a.onEvent=function(y,b){T(y,b)},a.offEvent=function(y,b){B(y,b)},a.sendData=function(y){if(!y||!y.length)throw console.error("[Telegram.WebApp] Data is required",y),Error("WebAppDataInvalid");if(Zf(y)>4096)throw console.error("[Telegram.WebApp] Data is too long",y),Error("WebAppDataInvalid");t.postEvent("web_app_data_send",!1,{data:y})},a.switchInlineQuery=function(y,b){if(!_e("6.6"))throw console.error("[Telegram.WebApp] Method switchInlineQuery is not supported in version "+d),Error("WebAppMethodUnsupported");if(!s.tgWebAppBotInline)throw console.error("[Telegram.WebApp] Inline mode is disabled for this bot. Read more about inline mode: https://core.telegram.org/bots/inline"),Error("WebAppInlineModeDisabled");if(y=y||"",y.length>256)throw console.error("[Telegram.WebApp] Inline query is too long",y),Error("WebAppInlineQueryInvalid");var k=[];if(b){if(!Array.isArray(b))throw console.error("[Telegram.WebApp] Choose chat types should be an array",b),Error("WebAppInlineChooseChatTypesInvalid");for(var $={users:1,bots:1,groups:1,channels:1},F=0;F<b.length;F++){var Z=b[F];if(!$[Z])throw console.error("[Telegram.WebApp] Choose chat type is invalid",Z),Error("WebAppInlineChooseChatTypeInvalid");$[Z]!=2&&($[Z]=2,k.push(Z))}}t.postEvent("web_app_switch_inline_query",!1,{query:y,chat_types:k})},a.openLink=function($,b){var k=document.createElement("A");if(k.href=$,k.protocol!="http:"&&k.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",$),Error("WebAppTgUrlInvalid");var $=k.href;if(b=b||{},_e("6.1")){var F={url:$};_e("6.4")&&b.try_instant_view&&(F.try_instant_view=!0),_e("7.6")&&b.try_browser&&(F.try_browser=b.try_browser),t.postEvent("web_app_open_link",!1,F)}else window.open($,"_blank")},a.openTelegramLink=function(y,b){var k=document.createElement("A");if(k.href=y,k.protocol!="http:"&&k.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",y),Error("WebAppTgUrlInvalid");if(k.hostname!="t.me")throw console.error("[Telegram.WebApp] Url host is not supported",y),Error("WebAppTgUrlInvalid");var $=k.pathname+k.search;if(b=b||{},r||_e("6.1")){var F={path_full:$};b.force_request&&(F.force_request=!0),t.postEvent("web_app_open_tg_link",!1,F)}else location.href="https://t.me"+$},a.openInvoice=function(y,b){var k=document.createElement("A"),$,F;if(k.href=y,k.protocol!="http:"&&k.protocol!="https:"||k.hostname!="t.me"||!($=k.pathname.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/))||!(F=$[2]))throw console.error("[Telegram.WebApp] Invoice url is invalid",y),Error("WebAppInvoiceUrlInvalid");if(!_e("6.1"))throw console.error("[Telegram.WebApp] Method openInvoice is not supported in version "+d),Error("WebAppMethodUnsupported");if(br[F])throw console.error("[Telegram.WebApp] Invoice is already opened"),Error("WebAppInvoiceOpened");br[F]={url:y,callback:b},t.postEvent("web_app_open_invoice",!1,{slug:F})},a.showPopup=function(y,b){if(!_e("6.2"))throw console.error("[Telegram.WebApp] Method showPopup is not supported in version "+d),Error("WebAppMethodUnsupported");if(gn)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppPopupOpened");var k="",$="",F=[],Z={};if(typeof y.title<"u"){if(k=P(y.title),k.length>64)throw console.error("[Telegram.WebApp] Popup title is too long",k),Error("WebAppPopupParamInvalid");k.length>0&&(Z.title=k)}if(typeof y.message<"u"&&($=P(y.message)),!$.length)throw console.error("[Telegram.WebApp] Popup message is required",y.message),Error("WebAppPopupParamInvalid");if($.length>256)throw console.error("[Telegram.WebApp] Popup message is too long",$),Error("WebAppPopupParamInvalid");if(Z.message=$,typeof y.buttons<"u"){if(!Array.isArray(y.buttons))throw console.error("[Telegram.WebApp] Popup buttons should be an array",y.buttons),Error("WebAppPopupParamInvalid");for(var ce=0;ce<y.buttons.length;ce++){var le=y.buttons[ce],Te={},he="";if(typeof le.id<"u"&&(he=le.id.toString(),he.length>64))throw console.error("[Telegram.WebApp] Popup button id is too long",he),Error("WebAppPopupParamInvalid");Te.id=he;var Pe=le.type;if(typeof Pe>"u"&&(Pe="default"),Te.type=Pe,!(Pe=="ok"||Pe=="close"||Pe=="cancel"))if(Pe=="default"||Pe=="destructive"){var Ie="";if(typeof le.text<"u"&&(Ie=P(le.text)),!Ie.length)throw console.error("[Telegram.WebApp] Popup button text is required for type "+Pe,le.text),Error("WebAppPopupParamInvalid");if(Ie.length>64)throw console.error("[Telegram.WebApp] Popup button text is too long",Ie),Error("WebAppPopupParamInvalid");Te.text=Ie}else throw console.error("[Telegram.WebApp] Popup button type is invalid",Pe),Error("WebAppPopupParamInvalid");F.push(Te)}}else F.push({id:"",type:"close"});if(F.length<1)throw console.error("[Telegram.WebApp] Popup should have at least one button"),Error("WebAppPopupParamInvalid");if(F.length>3)throw console.error("[Telegram.WebApp] Popup should not have more than 3 buttons"),Error("WebAppPopupParamInvalid");Z.buttons=F,gn={callback:b},t.postEvent("web_app_open_popup",!1,Z)},a.showAlert=function(y,b){a.showPopup({message:y},b?function(){b()}:null)},a.showConfirm=function(y,b){a.showPopup({message:y,buttons:[{type:"ok",id:"ok"},{type:"cancel"}]},b?function(k){b(k=="ok")}:null)},a.showScanQrPopup=function(y,b){if(!_e("6.4"))throw console.error("[Telegram.WebApp] Method showScanQrPopup is not supported in version "+d),Error("WebAppMethodUnsupported");if(ss)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppScanQrPopupOpened");var k="",$={};if(typeof y.text<"u"){if(k=P(y.text),k.length>64)throw console.error("[Telegram.WebApp] Scan QR popup text is too long",k),Error("WebAppScanQrPopupParamInvalid");k.length>0&&($.text=k)}ss={callback:b},t.postEvent("web_app_open_scan_qr_popup",!1,$)},a.closeScanQrPopup=function(){if(!_e("6.4"))throw console.error("[Telegram.WebApp] Method closeScanQrPopup is not supported in version "+d),Error("WebAppMethodUnsupported");ss=!1,t.postEvent("web_app_close_scan_qr_popup",!1)},a.readTextFromClipboard=function(y){if(!_e("6.4"))throw console.error("[Telegram.WebApp] Method readTextFromClipboard is not supported in version "+d),Error("WebAppMethodUnsupported");var b=jt(16),k={req_id:b};Ce[b]={callback:y},t.postEvent("web_app_read_text_from_clipboard",!1,k)},a.requestWriteAccess=function(y){if(!_e("6.9"))throw console.error("[Telegram.WebApp] Method requestWriteAccess is not supported in version "+d),Error("WebAppMethodUnsupported");if(_r)throw console.error("[Telegram.WebApp] Write access is already requested"),Error("WebAppWriteAccessRequested");_r={callback:y},t.postEvent("web_app_request_write_access")},a.requestContact=function(y){if(!_e("6.9"))throw console.error("[Telegram.WebApp] Method requestContact is not supported in version "+d),Error("WebAppMethodUnsupported");if(Nr)throw console.error("[Telegram.WebApp] Contact is already requested"),Error("WebAppContactRequested");Nr={callback:y},t.postEvent("web_app_request_phone")},a.downloadFile=function(y,b){if(!_e("8.0"))throw console.error("[Telegram.WebApp] Method downloadFile is not supported in version "+d),Error("WebAppMethodUnsupported");if(wr)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppDownloadFilePopupOpened");var k=document.createElement("A"),$={};if(!y||!y.url||!y.url.length)throw console.error("[Telegram.WebApp] Url is required"),Error("WebAppDownloadFileParamInvalid");if(k.href=y.url,k.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",url),Error("WebAppDownloadFileParamInvalid");if($.url=k.href,!y||!y.file_name||!y.file_name.length)throw console.error("[Telegram.WebApp] File name is required"),Error("WebAppDownloadFileParamInvalid");$.file_name=y.file_name,wr={callback:b},t.postEvent("web_app_request_file_download",!1,$)},a.shareToStory=function(y,b){if(b=b||{},!_e("7.8"))throw console.error("[Telegram.WebApp] Method shareToStory is not supported in version "+d),Error("WebAppMethodUnsupported");var k=document.createElement("A");if(k.href=y,k.protocol!="http:"&&k.protocol!="https:")throw console.error("[Telegram.WebApp] Media url protocol is not supported",url),Error("WebAppMediaUrlInvalid");var $={};if($.media_url=k.href,typeof b.text<"u"){var F=P(b.text);if(F.length>2048)throw console.error("[Telegram.WebApp] Text is too long",F),Error("WebAppShareToStoryParamInvalid");F.length>0&&($.text=F)}if(typeof b.widget_link<"u"){if(b.widget_link=b.widget_link||{},k.href=b.widget_link.url,k.protocol!="http:"&&k.protocol!="https:")throw console.error("[Telegram.WebApp] Link protocol is not supported",url),Error("WebAppShareToStoryParamInvalid");var Z={url:k.href};if(typeof b.widget_link.name<"u"){var ce=P(b.widget_link.name);if(ce.length>48)throw console.error("[Telegram.WebApp] Link name is too long",ce),Error("WebAppShareToStoryParamInvalid");ce.length>0&&(Z.name=ce)}$.widget_link=Z}t.postEvent("web_app_share_to_story",!1,$)},a.shareMessage=function(y,b){if(!_e("8.0"))throw console.error("[Telegram.WebApp] Method shareMessage is not supported in version "+d),Error("WebAppMethodUnsupported");if(dt)throw console.error("[Telegram.WebApp] Share message is already opened"),Error("WebAppShareMessageOpened");dt={callback:b},t.postEvent("web_app_send_prepared_message",!1,{id:y})},a.setEmojiStatus=function(y,b,k){if(b=b||{},!_e("8.0"))throw console.error("[Telegram.WebApp] Method setEmojiStatus is not supported in version "+d),Error("WebAppMethodUnsupported");var $={};if($.custom_emoji_id=y,typeof b.duration<"u"&&($.duration=b.duration),Be)throw console.error("[Telegram.WebApp] Emoji status is already requested"),Error("WebAppEmojiStatusRequested");Be={callback:k},t.postEvent("web_app_set_emoji_status",!1,$)},a.requestEmojiStatusAccess=function(y){if(!_e("8.0"))throw console.error("[Telegram.WebApp] Method requestEmojiStatusAccess is not supported in version "+d),Error("WebAppMethodUnsupported");if(kt)throw console.error("[Telegram.WebApp] Emoji status permission is already requested"),Error("WebAppEmojiStatusAccessRequested");kt={callback:y},t.postEvent("web_app_request_emoji_status_access")},a.invokeCustomMethod=function(y,b,k){wl(y,b,k)},a.ready=function(){t.postEvent("web_app_ready")},a.expand=function(){t.postEvent("web_app_expand")},a.close=function(y){y=y||{};var b={};_e("7.6")&&y.return_back&&(b.return_back=!0),t.postEvent("web_app_close",!1,b)},window.Telegram.WebApp=a,jl(),bl(),_l(),Le(),s.tgWebAppShowSettings&&$u.show(),window.addEventListener("resize",V),r&&document.addEventListener("click",D),t.onEvent("theme_changed",A),t.onEvent("viewport_changed",H),t.onEvent("safe_area_changed",Y),t.onEvent("content_safe_area_changed",ne),t.onEvent("visibility_changed",J),t.onEvent("invoice_closed",uv),t.onEvent("popup_closed",Iu),t.onEvent("qr_text_received",dv),t.onEvent("scan_qr_popup_closed",pv),t.onEvent("clipboard_text_received",mv),t.onEvent("write_access_requested",hv),t.onEvent("phone_requested",vv),t.onEvent("file_download_requested",gv),t.onEvent("custom_method_invoked",xv),t.onEvent("fullscreen_changed",Kt),t.onEvent("fullscreen_failed",Cs),t.onEvent("home_screen_added",Ee),t.onEvent("home_screen_checked",Fe),t.onEvent("prepared_message_sent",R),t.onEvent("prepared_message_failed",de),t.onEvent("emoji_status_set",vn),t.onEvent("emoji_status_failed",Re),t.onEvent("emoji_status_access_requested",Aa),t.postEvent("web_app_request_theme"),t.postEvent("web_app_request_viewport"),t.postEvent("web_app_request_safe_area"),t.postEvent("web_app_request_content_safe_area")})();Object.defineProperty(vl,"__esModule",{value:!0});vl.WebApp=void 0;var sb=window;vl.WebApp=sb.Telegram.WebApp;Object.defineProperty(kf,"__esModule",{value:!0});var rb=vl,nn=kf.default=rb.WebApp;let lp=!1;function ab(){if(!lp&&(lp=!0,!!Yn()))try{nn.ready(),nn.expand(),nn.setHeaderColor("#0f172a"),typeof nn.disableVerticalSwipes=="function"&&nn.disableVerticalSwipes()}catch(e){console.warn("[AdminTG] Init failed:",e)}}function ib(){u.useEffect(()=>{ab()},[]);const e=u.useCallback(r=>{var a;try{(a=nn.HapticFeedback)==null||a.impactOccurred(r)}catch{}},[]),t=u.useCallback(r=>{try{typeof nn.showAlert=="function"&&Yn()?nn.showAlert(r):alert(r)}catch{alert(r)}},[]),s=u.useCallback((r,a)=>{try{typeof nn.showConfirm=="function"&&Yn()?nn.showConfirm(r,a):a(window.confirm(r))}catch{a(window.confirm(r))}},[]);return{webApp:nn,hapticFeedback:e,showAlert:t,showConfirm:s}}const so=new Intl.DateTimeFormat("ru-RU",{day:"2-digit",month:"2-digit"}),mi=new Intl.NumberFormat("ru-RU",{minimumFractionDigits:0,maximumFractionDigits:0});function lb(e){if(e>=1e3){const t=Math.round(e/1e3);return t>=1e3?`${mi.format(e)} `:`${mi.format(t)} . `}return`${mi.format(e)} `}function ro(e){const[t,s,r]=e.split("-").map(Number);return new Date(t,(s||1)-1,r||1)}function gl({data:e}){const[t,s]=u.useState(null);if(!e.length)return n.jsx("div",{className:"seller-chart-empty",children:"    "});const r=600,a=240,i=72,l=24,o=28,c=48,d=r-i-l,h=a-o-c,g=Math.max(...e.map(V=>V.revenue),1),m=V=>e.length===1?i+d/2:i+V/(e.length-1)*d,_=V=>{if(!g)return o+h;const Y=V/g;return o+(1-Y)*h};let j="";e.forEach((V,Y)=>{const ne=m(Y),J=_(V.revenue);j+=Y===0?`M ${ne} ${J}`:` L ${ne} ${J}`});const S=o+h,N=`${j} L ${m(e.length-1)} ${S} L ${m(0)} ${S} Z`,f=[g,g/2,0].map(V=>Number.isFinite(V)?V:0).filter((V,Y,ne)=>ne.findIndex(J=>Math.abs(J-V)<1e-6)===Y),p=Math.min(6,e.length),v=p>0?Math.max(1,Math.round(e.length/p)):1,x=[];for(let V=0;V<e.length;V+=v){const Y=e[V];x.push({x:m(V),label:so.format(ro(Y.date))})}const C=e[e.length-1],M=so.format(ro(C.date));x.some(V=>V.label===M)||x.push({x:m(e.length-1),label:M});const O=t!==null?e[t]:null,E=t!==null?m(t):0,W=O?_(O.revenue):0,z=130,A=52;let G=E-z/2;G<i&&(G=i),G+z>r-l&&(G=r-l-z);const H=W-A-12>0?W-A-12:W+16;return n.jsx("div",{className:"seller-chart-wrap",children:n.jsxs("svg",{className:"seller-chart-svg",viewBox:`0 0 ${r} ${a}`,preserveAspectRatio:"xMidYMid meet",children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"sellerChartGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"0%",stopColor:"rgba(123, 142, 255, 0.5)"}),n.jsx("stop",{offset:"100%",stopColor:"rgba(123, 142, 255, 0.05)"})]})}),n.jsx("g",{children:f.map(V=>{const Y=_(V);return n.jsxs("g",{children:[n.jsx("line",{x1:i,y1:Y,x2:i+d,y2:Y,className:"seller-chart-grid"}),n.jsx("text",{x:i-8,y:Y+4,className:"seller-chart-axis-label seller-chart-axis-label--y",dominantBaseline:"middle",children:lb(Math.max(V,0))})]},`y-${V}`)})}),n.jsx("path",{d:N,fill:"url(#sellerChartGradient)"}),n.jsx("path",{d:j,fill:"none",stroke:"var(--chart-line, #7b8eff)",strokeWidth:2.5,strokeLinecap:"round",strokeLinejoin:"round"}),e.map((V,Y)=>{const ne=m(Y),J=_(V.revenue),D=t===Y;return n.jsx("circle",{cx:ne,cy:J,r:D?5:3.5,fill:D?"var(--accent, #7b8eff)":"var(--bg)",stroke:"var(--chart-line, #7b8eff)",strokeWidth:2},`${V.date}-${Y}`)}),e.map((V,Y)=>{const ne=m(Y),J=e.length>1?d/(e.length-1):d;return n.jsx("rect",{x:ne-J/2,y:o,width:J,height:h,fill:"transparent",onMouseEnter:()=>s(Y),onMouseLeave:()=>s(null)},`hit-${Y}`)}),t!==null&&n.jsx("line",{x1:E,y1:o,x2:E,y2:S,stroke:"var(--text-muted, #999)",strokeDasharray:"3 3",opacity:.5,pointerEvents:"none"}),n.jsx("line",{x1:i,y1:S,x2:i+d,y2:S,className:"seller-chart-axis"}),x.map((V,Y)=>n.jsx("text",{x:V.x,y:a-14,className:"seller-chart-axis-label seller-chart-axis-label--x",dominantBaseline:"hanging",children:V.label},`x-${Y}-${V.label}`)),t!==null&&O&&n.jsx("foreignObject",{x:G,y:H,width:z,height:A,pointerEvents:"none",children:n.jsxs("div",{className:"chart-tooltip",children:[n.jsx("div",{className:"chart-tooltip-date",children:so.format(ro(O.date))}),n.jsxs("div",{className:"chart-tooltip-value",children:[mi.format(O.revenue)," "]}),O.orders!=null&&n.jsxs("div",{className:"chart-tooltip-orders",children:[O.orders," ",O.orders===1?"":O.orders<5?"":""]})]})})]})})}function ob(e,t){return t?Math.round((e-t)/t*100):e>0?100:0}function Rr({current:e,previous:t}){const s=ob(e,t);if(s===0)return n.jsx("span",{className:"trend-badge trend-badge--neutral",children:"0%"});const r=s>0;return n.jsxs("span",{className:`trend-badge ${r?"trend-badge--up":"trend-badge--down"}`,children:[r?n.jsx(dr,{size:12}):n.jsx(Hi,{size:12}),r?"+":"",s,"%"]})}function rs(e){return e.toLocaleString("ru-RU")}function Ut(e){return`${e.toLocaleString("ru-RU")} `}function cb(){const[e,t]=u.useState(null),[s,r]=u.useState(!0);if(u.useEffect(()=>{(async()=>{try{const _=await wj();t(_)}catch{t(null)}finally{r(!1)}})()},[]),s)return n.jsx("div",{className:"dashboard-loading",children:n.jsx("div",{className:"loader"})});if(!e)return n.jsx("div",{className:"dashboard",children:n.jsx("div",{className:"dashboard-error",children:"    "})});const{today:a,pipeline:i,alerts:l,weekly_revenue:o,top_sellers_today:c,totals:d}=e,h=l.expiring_placements.length+l.exhausted_limits.length+l.stuck_orders.length,g=o.map(m=>({date:m.date,revenue:m.revenue,orders:m.orders}));return n.jsxs("div",{className:"dashboard",children:[n.jsxs("div",{className:"dash-header",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"dash-title",children:""}),n.jsx("p",{className:"dash-subtitle",children:"    "})]}),n.jsxs("div",{className:"dash-totals",children:[n.jsxs("div",{className:"dash-total-item",children:[n.jsx(Nn,{size:14}),n.jsxs("span",{children:[rs(d.sellers)," "]})]}),n.jsxs("div",{className:"dash-total-item",children:[n.jsx(ba,{size:14}),n.jsxs("span",{children:[rs(d.buyers)," "]})]}),n.jsxs("div",{className:"dash-total-item",children:[n.jsx(tr,{size:14}),n.jsxs("span",{children:[rs(d.orders),"  "]})]})]})]}),n.jsxs("div",{className:"dash-kpi-grid",children:[n.jsxs("div",{className:"dash-kpi-card",children:[n.jsxs("div",{className:"dash-kpi-header",children:[n.jsx("span",{className:"dash-kpi-label",children:" "}),n.jsx(Rr,{current:a.orders,previous:a.orders_yesterday})]}),n.jsx("div",{className:"dash-kpi-value",children:rs(a.orders)}),n.jsxs("div",{className:"dash-kpi-secondary",children:[": ",rs(a.orders_yesterday)]})]}),n.jsxs("div",{className:"dash-kpi-card",children:[n.jsxs("div",{className:"dash-kpi-header",children:[n.jsx("span",{className:"dash-kpi-label",children:" "}),n.jsx(Rr,{current:a.revenue,previous:a.revenue_yesterday})]}),n.jsx("div",{className:"dash-kpi-value",children:Ut(a.revenue)}),n.jsxs("div",{className:"dash-kpi-secondary",children:[": ",Ut(a.revenue_yesterday)]})]}),n.jsxs("div",{className:"dash-kpi-card dash-kpi-card--accent",children:[n.jsxs("div",{className:"dash-kpi-header",children:[n.jsx("span",{className:"dash-kpi-label",children:" "}),n.jsx(Rr,{current:a.profit,previous:a.profit_yesterday})]}),n.jsx("div",{className:"dash-kpi-value",children:Ut(a.profit)}),n.jsx("div",{className:"dash-kpi-secondary",children:"18% "})]}),n.jsxs("div",{className:"dash-kpi-card",children:[n.jsxs("div",{className:"dash-kpi-header",children:[n.jsx("span",{className:"dash-kpi-label",children:" "}),n.jsx(Rr,{current:a.avg_check,previous:a.avg_check_yesterday})]}),n.jsx("div",{className:"dash-kpi-value",children:Ut(a.avg_check)}),n.jsxs("div",{className:"dash-kpi-secondary",children:[": ",Ut(a.avg_check_yesterday)]})]}),n.jsxs("div",{className:"dash-kpi-card",children:[n.jsxs("div",{className:"dash-kpi-header",children:[n.jsx("span",{className:"dash-kpi-label",children:" "}),n.jsx(Rr,{current:a.new_customers,previous:a.new_customers_yesterday})]}),n.jsx("div",{className:"dash-kpi-value",children:rs(a.new_customers)}),n.jsxs("div",{className:"dash-kpi-secondary",children:[": ",rs(a.new_customers_yesterday)]})]})]}),n.jsxs("div",{className:"dash-section",children:[n.jsx("h2",{className:"dash-section-title",children:" "}),n.jsxs("div",{className:"dash-pipeline",children:[n.jsxs("div",{className:"dash-pipe-item dash-pipe-item--pending",children:[n.jsx(cc,{size:20}),n.jsx("div",{className:"dash-pipe-count",children:i.pending.count}),n.jsx("div",{className:"dash-pipe-label",children:""}),n.jsx("div",{className:"dash-pipe-amount",children:Ut(i.pending.amount)})]}),n.jsx("div",{className:"dash-pipe-arrow",children:""}),n.jsxs("div",{className:"dash-pipe-item dash-pipe-item--progress",children:[n.jsx(tr,{size:20}),n.jsx("div",{className:"dash-pipe-count",children:i.in_progress.count}),n.jsx("div",{className:"dash-pipe-label",children:" "}),n.jsx("div",{className:"dash-pipe-amount",children:Ut(i.in_progress.amount)})]}),n.jsx("div",{className:"dash-pipe-arrow",children:""}),n.jsxs("div",{className:"dash-pipe-item dash-pipe-item--transit",children:[n.jsx(fl,{size:20}),n.jsx("div",{className:"dash-pipe-count",children:i.in_transit.count}),n.jsx("div",{className:"dash-pipe-label",children:""}),n.jsx("div",{className:"dash-pipe-amount",children:Ut(i.in_transit.amount)})]}),n.jsx("div",{className:"dash-pipe-arrow",children:""}),n.jsxs("div",{className:"dash-pipe-item dash-pipe-item--done",children:[n.jsx(Gj,{size:20}),n.jsx("div",{className:"dash-pipe-count",children:i.completed_today.count}),n.jsx("div",{className:"dash-pipe-label",children:""}),n.jsx("div",{className:"dash-pipe-amount",children:Ut(i.completed_today.amount)})]}),i.rejected_today.count>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"dash-pipe-divider"}),n.jsxs("div",{className:"dash-pipe-item dash-pipe-item--rejected",children:[n.jsx(Xj,{size:20}),n.jsx("div",{className:"dash-pipe-count",children:i.rejected_today.count}),n.jsx("div",{className:"dash-pipe-label",children:""}),n.jsx("div",{className:"dash-pipe-amount",children:Ut(i.rejected_today.amount)})]})]})]})]}),n.jsxs("div",{className:"dash-row",children:[n.jsx("div",{className:"dash-col dash-col--alerts",children:n.jsxs("div",{className:`dash-card ${h>0?"dash-card--warning":""}`,children:[n.jsxs("div",{className:"dash-card-header",children:[n.jsx(uc,{size:16,className:h>0?"text-warning":"text-muted"}),n.jsxs("h3",{children:[" ",h>0&&n.jsx("span",{className:"dash-alert-count",children:h})]})]}),h===0?n.jsx("div",{className:"dash-empty-alert",children:"  "}):n.jsxs("div",{className:"dash-alerts-list",children:[l.stuck_orders.map(m=>n.jsxs("div",{className:"dash-alert-item dash-alert-item--danger",children:[n.jsx(cc,{size:14}),n.jsxs("div",{children:[n.jsxs("div",{className:"dash-alert-text",children:[" #",m.order_id,"  ",m.minutes_pending," "]}),n.jsxs("div",{className:"dash-alert-sub",children:[m.seller_name,"  ",Ut(m.amount)]})]})]},m.order_id)),l.exhausted_limits.map(m=>n.jsxs("div",{className:"dash-alert-item dash-alert-item--warning",children:[n.jsx(uc,{size:14}),n.jsxs("div",{children:[n.jsxs("div",{className:"dash-alert-text",children:[m.shop_name,"   "]}),n.jsxs("div",{className:"dash-alert-sub",children:[m.used,"/",m.limit," "]})]})]},m.tg_id)),l.expiring_placements.map(m=>n.jsxs("div",{className:"dash-alert-item dash-alert-item--info",children:[n.jsx(Nn,{size:14}),n.jsxs("div",{children:[n.jsx("div",{className:"dash-alert-text",children:m.shop_name}),n.jsxs("div",{className:"dash-alert-sub",children:["   ",m.expires_in_days," ",m.expires_in_days===1?"":m.expires_in_days<5?"":""]})]})]},m.tg_id))]})]})}),n.jsx("div",{className:"dash-col dash-col--chart",children:n.jsxs("div",{className:"dash-card",children:[n.jsxs("div",{className:"dash-card-header",children:[n.jsx(dr,{size:16}),n.jsx("h3",{children:"  7 "})]}),n.jsx(gl,{data:g})]})})]}),n.jsx("div",{className:"dash-section",children:n.jsxs("div",{className:"dash-card",children:[n.jsxs("div",{className:"dash-card-header",children:[n.jsx(Nn,{size:16}),n.jsx("h3",{children:"  "}),n.jsx(Xe,{to:"/sellers",className:"dash-link-more",children:"  "})]}),c.length===0?n.jsx("div",{className:"dash-empty-text",children:"   "}):n.jsxs("div",{className:"dash-sellers-table",children:[n.jsxs("div",{className:"dash-sellers-row dash-sellers-row--header",children:[n.jsx("div",{className:"dash-sellers-cell dash-sellers-cell--name",children:""}),n.jsx("div",{className:"dash-sellers-cell dash-sellers-cell--num",children:""}),n.jsx("div",{className:"dash-sellers-cell dash-sellers-cell--num",children:""}),n.jsx("div",{className:"dash-sellers-cell dash-sellers-cell--load",children:""})]}),c.map(m=>n.jsxs("div",{className:"dash-sellers-row",children:[n.jsx("div",{className:"dash-sellers-cell dash-sellers-cell--name",children:m.shop_name}),n.jsx("div",{className:"dash-sellers-cell dash-sellers-cell--num",children:m.orders}),n.jsx("div",{className:"dash-sellers-cell dash-sellers-cell--num",children:Ut(m.revenue)}),n.jsxs("div",{className:"dash-sellers-cell dash-sellers-cell--load",children:[n.jsx("div",{className:"dash-load-bar",children:n.jsx("div",{className:`dash-load-fill ${m.load_pct>=100?"dash-load-fill--danger":m.load_pct>=75?"dash-load-fill--warning":""}`,style:{width:`${Math.min(m.load_pct,100)}%`}})}),n.jsxs("span",{className:"dash-load-pct",children:[m.load_pct,"%"]})]})]},m.tg_id))]})]})}),n.jsxs("div",{className:"dash-nav-row",children:[n.jsxs(Xe,{to:"/orders",className:"dash-nav-card",children:[n.jsx(tr,{size:20}),n.jsx("span",{children:""})]}),n.jsxs(Xe,{to:"/finance",className:"dash-nav-card",children:[n.jsx(dr,{size:20}),n.jsx("span",{children:""})]}),n.jsxs(Xe,{to:"/customers",className:"dash-nav-card",children:[n.jsx(ba,{size:20}),n.jsx("span",{children:""})]}),n.jsxs(Xe,{to:"/analytics",className:"dash-nav-card",children:[n.jsx(Nn,{size:20}),n.jsx("span",{children:""})]})]})]})}function ub(e){if(!e)return"";try{const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const s=String(t.getDate()).padStart(2,"0"),r=String(t.getMonth()+1).padStart(2,"0"),a=t.getFullYear();return`${s}.${r}.${a}`}catch{return e}}const Cf=({data:e,showFullOkvedDescriptions:t=!0})=>n.jsxs("div",{style:{padding:"1rem",backgroundColor:"#f5f5f5",borderRadius:"4px"},children:[n.jsx("h4",{style:{marginTop:0,marginBottom:"1rem",color:"#0070e0"},children:" "}),n.jsxs("div",{className:"seller-info-grid",children:[n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:""}),n.jsx("span",{className:"info-value",style:{color:"#0070e0"},children:e.name})]}),e.short_name&&n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:" "}),n.jsx("span",{className:"info-value",style:{color:"#0070e0"},children:e.short_name})]}),e.ogrn&&n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:""}),n.jsx("span",{className:"info-value",style:{color:"#0070e0"},children:e.ogrn})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:""}),n.jsx("span",{className:"info-value",style:{color:"#0070e0"},children:e.inn})]}),e.kpp&&n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:""}),n.jsx("span",{className:"info-value",style:{color:"#0070e0"},children:e.kpp})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:""}),n.jsx("span",{className:"info-value",style:{color:"#0070e0"},children:e.type==="LEGAL"?" ":" "})]}),e.address&&n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:""}),n.jsx("span",{className:"info-value",style:{color:"#0070e0"},children:e.address})]}),e.management&&n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:""}),n.jsx("span",{className:"info-value",style:{color:"#0070e0"},children:e.management})]}),e.registration_date&&n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:" "}),n.jsx("span",{className:"info-value",style:{color:"#0070e0"},children:ub(e.registration_date)})]}),e.okved&&n.jsxs("div",{className:"info-row",children:[n.jsxs("span",{className:"info-label",children:[" ",e.okved_type?`(${e.okved_type})`:""]}),n.jsxs("span",{className:"info-value",style:{color:"#0070e0"},children:[n.jsx("strong",{children:e.okved}),e.okveds&&e.okveds.length>0&&n.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.9em",color:"#0070e0",opacity:.8},children:[": ",e.okveds.join(", ")]})]})]}),e.okved_match&&n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:" "}),n.jsx("span",{className:"info-value",style:{color:"#0070e0"},children:n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",borderRadius:"50%",backgroundColor:e.okved_match.matches_47_76?"#28a745":"#dc3545"}}),n.jsx("span",{style:{color:"#0070e0"},children:t?"47.76 (     ,      )":"47.76"}),e.okved_match.matches_47_76&&n.jsx("span",{className:"badge badge-success",style:{marginLeft:"0.5rem"},children:""})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",borderRadius:"50%",backgroundColor:e.okved_match.matches_47_91?"#28a745":"#dc3545"}}),n.jsx("span",{style:{color:"#0070e0"},children:t?"47.91 (      -  )":"47.91"}),e.okved_match.matches_47_91&&n.jsx("span",{className:"badge badge-success",style:{marginLeft:"0.5rem"},children:""})]})]})})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:""}),n.jsx("span",{className:"info-value",children:n.jsx("span",{className:"badge badge-success",children:""})})]})]})]});function db({metroId:e,metroWalkMinutes:t,onMetroChange:s,initialStationName:r}){const[a,i]=u.useState(r||""),[l,o]=u.useState([]),[c,d]=u.useState(!1),[h,g]=u.useState(!1);u.useEffect(()=>{if(a.trim().length<2){o([]);return}let j=!1;return d(!0),af(a.trim()).then(S=>{j||(o(S||[]),g(!0))}).finally(()=>{j||d(!1)}),()=>{j=!0}},[a]);const m=j=>{s(j.id,t),i(j.name),g(!1)},_=()=>{s(null,null),i(""),o([]),g(!1)};return n.jsxs("div",{children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:" "}),n.jsxs("div",{className:"edit-metro-wrap",children:[n.jsx("input",{type:"text",className:"form-input",placeholder:"  ( 2 )...",value:a,onChange:j=>i(j.target.value),onFocus:()=>l.length>0&&g(!0)}),h&&n.jsx("div",{className:"edit-metro-dropdown",children:a.trim().length<2?n.jsx("div",{className:"edit-metro-hint",children:"  2 "}):c?n.jsx("div",{className:"edit-metro-hint",children:"..."}):l.length===0?n.jsx("div",{className:"edit-metro-hint",children:"  "}):l.map(j=>n.jsxs("button",{type:"button",className:"edit-metro-option",onClick:()=>m(j),children:[j.line_color&&n.jsx("span",{className:"edit-metro-line",style:{backgroundColor:j.line_color||"#999"}}),j.name]},j.id))})]}),e&&n.jsxs("small",{className:"form-hint",children:[": ID ",e," ",n.jsx("button",{type:"button",style:{border:"none",background:"none",color:"#dc3545",cursor:"pointer",textDecoration:"underline",padding:0},onClick:_,children:""})]})]}),e&&n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"   ()"}),n.jsx("input",{type:"number",className:"form-input",value:t??"",onChange:j=>{const S=j.target.value?parseInt(j.target.value,10):null;s(e,S)},min:"1",placeholder:" "})]})]})}const op=[{value:"pickup",label:""},{value:"delivery",label:""},{value:"both",label:""}],dc=[{id:1,name:""},{id:2,name:""},{id:3,name:""},{id:4,name:""},{id:5,name:""},{id:6,name:""},{id:7,name:""},{id:8,name:""},{id:9,name:""},{id:10,name:""},{id:11,name:""},{id:12,name:""}];function os(e){if(!e)return"";try{const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const s=String(t.getDate()).padStart(2,"0"),r=String(t.getMonth()+1).padStart(2,"0"),a=t.getFullYear();return`${s}.${r}.${a}`}catch{return e}}function Ef(e){if(!e)return!1;try{const t=new Date(e);return!Number.isNaN(t.getTime())&&t.getTime()<Date.now()}catch{return!1}}function pb(e){const t=(e||"").trim();if(!t)return;const s=t.split(".");if(s.length!==3)return;const r=parseInt(s[0],10),a=parseInt(s[1],10),i=parseInt(s[2],10);if(Number.isNaN(r)||Number.isNaN(a)||Number.isNaN(i))return;const l=new Date(i,a-1,r);return Number.isNaN(l.getTime())?void 0:l.toISOString().slice(0,10)}function Pf(e){const t=e.replace(/\D/g,"");if(t.length===0)return"";let s=t;return s.startsWith("8")?s="7"+s.slice(1):s.startsWith("7")||(s="7"+s),s=s.slice(0,11),s.length<=1?"+7":s.length<=4?`+7 ${s.slice(1)}`:s.length<=7?`+7 ${s.slice(1,4)} ${s.slice(4)}`:s.length<=9?`+7 ${s.slice(1,4)} ${s.slice(4,7)} ${s.slice(7)}`:`+7 ${s.slice(1,4)} ${s.slice(4,7)} ${s.slice(7,9)} ${s.slice(9,11)}`}function Hr(e){const t=e.replace(/\D/g,"");return t.startsWith("8")?"7"+t.slice(1,11):t.startsWith("7")?t.slice(0,11):("7"+t).slice(0,11)}function mb(e){const t=e.replace(/\D/g,"");return t.length===0?"":t.length<=2?t:t.length<=4?`${t.slice(0,2)}.${t.slice(2)}`:`${t.slice(0,2)}.${t.slice(2,4)}.${t.slice(4,8)}`}function hb(){const[e,t]=u.useState([]),[s,r]=u.useState(""),[a,i]=u.useState(!1),[l,o]=u.useState(!1),[c,d]=u.useState(!1),[h,g]=u.useState(null),[m,_]=u.useState(null),j=async()=>{i(!0);try{const N=s.trim()?await dj(s.trim()):await ju(!0);t(N||[])}catch{t([])}finally{i(!1)}};u.useEffect(()=>{j()},[]);const S=()=>j();return n.jsxs("div",{className:"sellers-page",children:[n.jsx(tt,{title:"",actions:n.jsxs("button",{className:"btn btn-primary",onClick:()=>o(!0),children:[n.jsx(bf,{size:16})," "]})}),n.jsxs("div",{className:"search-bar card",children:[n.jsx("input",{type:"text",className:"form-input",placeholder:"  ...",value:s,onChange:N=>r(N.target.value),onKeyDown:N=>N.key==="Enter"&&S()}),n.jsx("button",{className:"btn btn-secondary",onClick:S,children:""})]}),a?n.jsx("div",{className:"loading-row",children:n.jsx("div",{className:"loader"})}):n.jsxs("div",{className:"card table-wrap",children:[n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:""}),n.jsx("th",{children:""}),n.jsx("th",{children:"ID"}),n.jsx("th",{children:" "}),n.jsx("th",{children:""}),n.jsx("th",{})]})}),n.jsx("tbody",{children:e.map(N=>n.jsxs("tr",{children:[n.jsx("td",{children:N.fio}),n.jsx("td",{children:N.shop_name}),n.jsx("td",{children:n.jsx("code",{children:N.tg_id})}),n.jsx("td",{children:os(N.placement_expired_at)}),n.jsx("td",{children:N.is_deleted?n.jsx("span",{className:"badge badge-warning",children:""}):N.is_blocked?n.jsx("span",{className:"badge badge-danger",children:""}):Ef(N.placement_expired_at)?n.jsx("span",{className:"badge badge-warning",children:" "}):n.jsx("span",{className:"badge badge-success",children:""})}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>g(N),children:""})})]},N.tg_id))})]}),e.length===0&&n.jsx("p",{className:"empty-text",children:"  "})]}),l&&n.jsx(fb,{onClose:()=>{o(!1),_(null)},onNext:(N,f)=>{_({data:f}),o(!1),d(!0)}}),c&&n.jsx(vb,{onClose:()=>{d(!1),_(null)},onSuccess:()=>{d(!1),_(null),j()},initialInnData:m==null?void 0:m.data}),h&&n.jsx(xb,{seller:h,onClose:()=>g(null),onSuccess:()=>{j()},onUpdate:N=>g(N)})]})}function fb({onClose:e,onNext:t}){const[s,r]=u.useState(""),[a,i]=u.useState(""),[l,o]=u.useState(!1),[c,d]=u.useState(null),[h,g]=u.useState(""),m=N=>{if(!N.trim())return"";const f=N.trim().replace(/\s/g,"");return/^\d+$/.test(f)?[10,12,13,15].includes(f.length)?"":" (10/12 )   (13/15 )":"   "},_=N=>{r(N),i(m(N)),d(null),g("")},j=async()=>{g("");const N=m(s);if(N){i(N);return}i(""),o(!0);try{const f=s.trim().replace(/\s/g,""),p=await lf(f);d(p)}catch(f){g(f instanceof Error?f.message:"   "),d(null)}finally{o(!1)}},S=()=>{if(!c){g("    /");return}t(s.trim().replace(/\s/g,""),c)};return n.jsx(Tf,{title:"  / ",onClose:e,children:n.jsxs("div",{children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"   *"}),n.jsx("input",{type:"text",className:`form-input ${a?"error":""}`,value:s,onChange:N=>_(N.target.value),placeholder:" (10/12 )   (13/15 )",maxLength:15,onKeyDown:N=>N.key==="Enter"&&!l&&j()}),a&&n.jsx("div",{className:"form-error",children:a}),n.jsx("small",{className:"form-hint",children:"  (10/12 )  / (13/15 )"})]}),n.jsx("div",{className:"modal-actions modal-actions--spaced",children:n.jsx("button",{type:"button",className:"btn btn-primary",onClick:j,disabled:l||!!a||!s.trim(),children:l?"...":" "})}),h&&n.jsx("div",{className:"modal-error modal-error--spaced",children:h}),c&&n.jsx("div",{className:"org-data-section",children:n.jsx(Cf,{data:c,showFullOkvedDescriptions:!0})}),n.jsxs("div",{className:"modal-actions modal-actions--section",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:e,children:""}),n.jsx("button",{type:"button",className:"btn btn-primary",onClick:S,disabled:!c,children:""})]})]})})}function vb({onClose:e,onSuccess:t,initialInnData:s}){const[r,a]=u.useState(""),[i,l]=u.useState(""),[o,c]=u.useState(""),[d,h]=u.useState(""),[g,m]=u.useState(""),[_,j]=u.useState(1),[S,N]=u.useState([]),[f,p]=u.useState([]),[v,x]=u.useState(1),[C,M]=u.useState(null),[O,E]=u.useState(null),[W,z]=u.useState(""),[A,G]=u.useState(""),[H,V]=u.useState(""),[Y,ne]=u.useState(!1),[J,D]=u.useState(null);u.useEffect(()=>{s&&(s.name&&!d&&h(s.short_name||s.name),s.management&&!i&&l(s.management))},[s]),u.useEffect(()=>{rf().then(q=>{q.length>0?N(q):N([{id:1,name:""},{id:2,name:"-"}])}).catch(()=>N([{id:1,name:""},{id:2,name:"-"}]))},[]),u.useEffect(()=>{cj(_).then(q=>{p(q),q.length>0&&!q.find(ve=>ve.id===v)&&x(q[0].id)}).catch(()=>p([]))},[_]);const P=q=>{const ve=Pf(q);c(ve)},w=q=>{const ve=mb(q);G(ve)},T=async q=>{q.preventDefault(),V("");const ve=Hr(o);if(ve.length!==11){V("     +7 000 000 00 00");return}if(A&&A.length!==10){V("    ..");return}if(!r.trim()){V("Telegram ID ");return}const ze=parseInt(r.trim(),10);if(isNaN(ze)||ze<=0){V("Telegram ID    ");return}ne(!0),D(null);try{const we={tg_id:parseInt(r.trim(),10),fio:i,phone:ve,shop_name:d,description:g||void 0,city_id:_,district_id:v,metro_id:C||void 0,metro_walk_minutes:O||void 0,map_url:W||void 0};if(s!=null&&s.inn&&(we.inn=s.inn),s!=null&&s.ogrn&&(we.ogrn=s.ogrn),A){const[Ce,jt,K]=A.split(".");Ce&&jt&&K&&(we.placement_expired_at=`${K}-${jt}-${Ce}`)}const be=await uj(we);(be==null?void 0:be.status)==="ok"||(be==null?void 0:be.status)===void 0?be.web_login&&be.web_password?D({web_login:be.web_login,web_password:be.web_password}):(t(),e()):(be==null?void 0:be.status)==="exists"?V("  ."):V(" .  .")}catch(we){V(we instanceof Error?we.message:"")}finally{ne(!1)}},B=()=>{D(null),t(),e()};return n.jsx(Tf,{title:J?"  ":" ",onClose:J?B:e,children:J?n.jsxs("div",{className:"credentials-block",children:[n.jsx("p",{className:"credentials-hint",children:"    .       -."}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"credentials-value",children:[n.jsx("code",{children:J.web_login}),n.jsx("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:()=>navigator.clipboard.writeText(J.web_login),children:""})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:""}),n.jsxs("div",{className:"credentials-value",children:[n.jsx("code",{children:J.web_password}),n.jsx("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:()=>navigator.clipboard.writeText(J.web_password),children:""})]})]}),n.jsx("div",{className:"modal-actions",children:n.jsx("button",{type:"button",className:"btn btn-primary",onClick:B,children:""})})]}):n.jsxs("form",{onSubmit:T,children:[(s==null?void 0:s.ogrn)&&n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:""}),n.jsx("input",{type:"text",className:"form-input",value:s.ogrn,disabled:!0})]}),(s==null?void 0:s.inn)&&n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:""}),n.jsx("input",{type:"text",className:"form-input",value:s.inn,disabled:!0}),n.jsx("small",{className:"form-hint",children:"   DaData"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Telegram ID *"}),n.jsx("input",{type:"text",className:"form-input",value:r,onChange:q=>a(q.target.value.replace(/\D/g,"")),placeholder:" Telegram ID ",required:!0}),n.jsx("small",{className:"form-hint",children:"Telegram ID  ().  ."})]}),n.jsx(Ls,{label:"",value:i,onChange:l,required:!0}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:" *"}),n.jsx("input",{type:"tel",className:"form-input",value:o,onChange:q=>P(q.target.value),placeholder:"+7 000 000 00 00",maxLength:17,required:!0}),n.jsx("small",{className:"form-hint",children:": +7 000 000 00 00"})]}),n.jsx(Ls,{label:" ",value:d,onChange:h,required:!0}),n.jsx(Ls,{label:"",value:g,onChange:m,textarea:!0}),n.jsx(Ls,{label:"",render:n.jsx("select",{className:"form-input",value:_,onChange:q=>j(parseInt(q.target.value,10)),children:S.map(q=>n.jsx("option",{value:q.id,children:q.name},q.id))})}),n.jsx(Ls,{label:"",render:n.jsx("select",{className:"form-input",value:v,onChange:q=>x(parseInt(q.target.value,10)),children:(f.length>0?f:dc).map(q=>n.jsx("option",{value:q.id,children:q.name},q.id))})}),n.jsx(db,{metroId:C,metroWalkMinutes:O,onMetroChange:(q,ve)=>{M(q),E(ve)}}),n.jsx(Ls,{label:"   (.)",value:W,onChange:z}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"  "}),n.jsx("input",{type:"text",className:"form-input",value:A,onChange:q=>w(q.target.value),placeholder:"..",maxLength:10}),n.jsx("small",{className:"form-hint",children:": ..   "}),n.jsx("input",{type:"date",className:"form-input form-input--secondary",onChange:q=>{if(q.target.value){const ve=new Date(q.target.value),ze=String(ve.getDate()).padStart(2,"0"),we=String(ve.getMonth()+1).padStart(2,"0"),be=ve.getFullYear();G(`${ze}.${we}.${be}`)}}})]}),H&&n.jsx("div",{className:"modal-error",children:H}),n.jsxs("div",{className:"modal-actions",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:e,children:""}),n.jsx("button",{type:"submit",className:"btn btn-primary",disabled:Y,children:Y?"...":""})]})]})})}const gb=[{group:"",items:[{id:"profile",label:"",icon:Su},{id:"address",label:"",icon:Nu},{id:"delivery",label:"",icon:fl},{id:"org",label:"",icon:mf}]},{group:"",items:[{id:"limits",label:"  ",icon:xf},{id:"placement",label:"",icon:hf},{id:"web",label:"-",icon:yf}]},{group:" ",items:[{id:"status",label:"",icon:Vi,danger:!0},{id:"delete",label:"",icon:ur,danger:!0}]}];function xb({seller:e,onClose:t,onSuccess:s,onUpdate:r}){const a=yt(),[i,l]=u.useState("profile"),o=u.useRef({}),c=u.useRef(null),[d,h]=u.useState(null),[g,m]=u.useState({}),[_,j]=u.useState(String(e.max_orders??"")),[S,N]=u.useState(String(e.default_daily_limit??"")),[f,p]=u.useState(e.subscription_plan??"free"),[v,x]=u.useState(os(e.placement_expired_at)),[C,M]=u.useState(null),[O,E]=u.useState(null),[W,z]=u.useState(!1),[A,G]=u.useState(!1),[H,V]=u.useState(!1),[Y,ne]=u.useState(!1),[J,D]=u.useState(null),[P,w]=u.useState(!1),[T,B]=u.useState(""),[q,ve]=u.useState([]),[ze,we]=u.useState(!1),[be,Ce]=u.useState(!1),jt=u.useCallback(R=>{l(R);const de=o.current[R];de&&c.current&&c.current.scrollTo({top:de.offsetTop-16,behavior:"smooth"})},[]);u.useEffect(()=>{const R=de=>{de.key==="Escape"&&t()};return document.addEventListener("keydown",R),()=>document.removeEventListener("keydown",R)},[t]),u.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}),[]),u.useEffect(()=>{const R=e.inn||e.ogrn;R&&(w(!0),lf(R).then(D).catch(()=>D(null)).finally(()=>w(!1)))},[e.inn,e.ogrn]),u.useEffect(()=>{_j(e.tg_id).then(E).catch(()=>E(null))},[e.tg_id]),u.useEffect(()=>{if(d!=="address"||T.trim().length<2){ve([]);return}let R=!1;return we(!0),af(T.trim()).then(de=>{R||(ve(de||[]),Ce(!0))}).finally(()=>{R||we(!1)}),()=>{R=!0}},[d,T]),u.useEffect(()=>{x(os(e.placement_expired_at))},[e.placement_expired_at]);const K=R=>{let de={};R==="profile"?de={fio:e.fio||"",phone:e.phone||"",shop_name:e.shop_name||"",description:e.description||"",hashtags:e.hashtags||""}:R==="address"?(de={district_id:e.district_id?String(e.district_id):"1",address_name:e.address_name||"",map_url:e.map_url||"",metro_id:e.metro_id?String(e.metro_id):"",metro_walk_minutes:e.metro_walk_minutes?String(e.metro_walk_minutes):""},B("")):R==="delivery"&&(de={delivery_type:e.delivery_type||"both",delivery_price:e.delivery_price!=null?String(e.delivery_price):"0"}),m(de),h(R)},X=()=>{h(null),m({}),B(""),Ce(!1)},me=(R,de)=>{m(Be=>({...Be,[R]:de}))},Le=async()=>{ne(!0);try{const R=[];for(const[Re,kt]of Object.entries(g)){const Aa=Re==="fio"?e.fio:Re==="phone"?e.phone:Re==="shop_name"?e.shop_name:Re==="description"?e.description:Re==="hashtags"?e.hashtags:Re==="district_id"?e.district_id:Re==="address_name"?e.address_name:Re==="map_url"?e.map_url:Re==="metro_id"?e.metro_id:Re==="metro_walk_minutes"?e.metro_walk_minutes:Re==="delivery_type"?e.delivery_type:Re==="delivery_price"?e.delivery_price:void 0,La=Aa!=null?String(Aa):"",Es=kt||"";Re==="phone"?Hr(La)!==Hr(Es)&&R.push(Zl(e.tg_id,Re,Hr(Es))):Es!==La&&R.push(Zl(e.tg_id,Re,Es))}if(R.length===0){X();return}(await Promise.all(R)).some(Re=>(Re==null?void 0:Re.status)!=="ok"&&(Re==null?void 0:Re.status)!==void 0)?a.error("    "):a.success(" ");const vn={...e};Object.entries(g).forEach(([Re,kt])=>{["district_id","metro_id","metro_walk_minutes"].includes(Re)?vn[Re]=kt?parseInt(kt,10):void 0:Re==="delivery_price"?vn[Re]=kt?parseFloat(kt):0:Re==="phone"?vn[Re]=Hr(kt):vn[Re]=kt}),r(vn),s(),X()}catch(R){a.error(R instanceof Error?R.message:" ")}finally{ne(!1)}},U=async()=>{ne(!0);try{const R=await pj(e.tg_id,!e.is_blocked);(R==null?void 0:R.status)==="ok"?(r({...e,is_blocked:!e.is_blocked}),s(),a.success(e.is_blocked?" ":" ")):a.error("")}catch(R){a.error(R instanceof Error?R.message:"")}finally{ne(!1)}},fe=async()=>{z(!0),M(null);try{const R=await Nj(e.tg_id);M({web_login:R.web_login,web_password:R.web_password}),E({web_login:R.web_login,web_password:R.web_password}),a.success("   ")}catch(R){a.error(R instanceof Error?R.message:"")}finally{z(!1)}},Ne=async()=>{const R=_.trim()===""?0:parseInt(_,10);if(isNaN(R)||R<0){a.error("  >= 0");return}ne(!0);try{const de=await hj(e.tg_id,R);(de==null?void 0:de.status)==="ok"?(a.success("   "),r({...e,max_orders:R}),s()):a.error((de==null?void 0:de.message)||"")}catch(de){a.error(de instanceof Error?de.message:"")}finally{ne(!1)}},ye=async()=>{const R=S.trim()===""?0:parseInt(S,10);if(isNaN(R)||R<0){a.error("  >= 0");return}ne(!0);try{const de=await vj(e.tg_id,R);(de==null?void 0:de.status)==="ok"?(a.success("  "),r({...e,default_daily_limit:R||void 0}),s()):a.error((de==null?void 0:de.message)||"")}catch(de){a.error(de instanceof Error?de.message:"")}finally{ne(!1)}},I=async()=>{ne(!0);try{const R=await fj(e.tg_id,f);(R==null?void 0:R.status)==="ok"?(a.success(" "),r({...e,subscription_plan:f}),s()):a.error((R==null?void 0:R.message)||"")}catch(R){a.error(R instanceof Error?R.message:"")}finally{ne(!1)}},se=async()=>{ne(!0);try{const R=v.trim()||"",de=await Zl(e.tg_id,"placement_expired_at",R);if((de==null?void 0:de.status)==="ok"){a.success("  ");const Be=R?pb(v):void 0;r({...e,placement_expired_at:Be}),s()}else a.error("  ")}catch(R){a.error(R instanceof Error?R.message:"")}finally{ne(!1)}},Me=async()=>{ne(!0);try{const R=await mj(e.tg_id);(R==null?void 0:R.status)==="ok"?(a.success(" "),s(),t()):a.error(" ")}catch(R){a.error(R instanceof Error?R.message:"")}finally{ne(!1)}},We=R=>{navigator.clipboard.writeText(R),a.success("")},Kt=R=>{const de=op.find(Be=>Be.value===R);return(de==null?void 0:de.label)||R||""},Cs=R=>{const de=dc.find(Be=>Be.id===R);return(de==null?void 0:de.name)||""},L=R=>R==="pro"?"Pro":R==="premium"?"Premium":"Free",te=()=>{if(!e.placement_expired_at)return{dot:"ok",text:"",sub:""};try{const R=new Date(e.placement_expired_at);if(Number.isNaN(R.getTime()))return{dot:"ok",text:"",sub:""};const de=new Date,Be=Math.ceil((R.getTime()-de.getTime())/(1e3*60*60*24));return Be<0?{dot:"expired",text:os(e.placement_expired_at),sub:` ${Math.abs(Be)} . `}:Be<=7?{dot:"warning",text:os(e.placement_expired_at),sub:` ${Be} .`}:{dot:"ok",text:os(e.placement_expired_at),sub:` ${Be} .`}}catch{return{dot:"ok",text:"",sub:""}}},Ee=()=>e.is_deleted?{indicator:"deleted",text:"",sub:e.deleted_at?` ${os(e.deleted_at)}`:""}:e.is_blocked?{indicator:"blocked",text:"",sub:""}:Ef(e.placement_expired_at)?{indicator:"expired",text:" ",sub:""}:{indicator:"active",text:"",sub:""},Fe=te(),dt=Ee();return n.jsx("div",{className:"sdm-overlay",onClick:t,children:n.jsxs("div",{className:"sdm-panel",onClick:R=>R.stopPropagation(),children:[n.jsxs("div",{className:"sdm-header",children:[n.jsx("div",{className:"sdm-avatar",children:n.jsx(Nn,{size:24})}),n.jsxs("div",{className:"sdm-header-info",children:[n.jsxs("div",{className:"sdm-header-top",children:[n.jsx("span",{className:"sdm-shop-name",children:e.shop_name||" "}),n.jsxs("div",{className:"sdm-header-badges",children:[n.jsx("span",{className:`sdm-plan-badge sdm-plan-badge--${e.subscription_plan||"free"}`,children:L(e.subscription_plan||"free")}),e.is_blocked&&n.jsx("span",{className:"badge badge-danger",children:""}),e.is_deleted&&n.jsx("span",{className:"badge badge-warning",children:""})]})]}),n.jsxs("div",{className:"sdm-seller-fio",children:[e.fio," ",n.jsxs("span",{className:"sdm-seller-id",children:["ID: ",e.tg_id]})]})]}),n.jsx("button",{className:"sdm-close-btn",onClick:t,children:n.jsx(Pa,{size:18})})]}),n.jsxs("div",{className:"sdm-body",children:[n.jsx("nav",{className:"sdm-sidebar",children:gb.map(R=>n.jsxs("div",{className:"sdm-nav-group",children:[n.jsx("div",{className:"sdm-nav-group-label",children:R.group}),R.items.map(de=>n.jsxs("button",{className:`sdm-nav-item ${i===de.id?"sdm-nav-item--active":""} ${de.danger?"sdm-nav-item--danger":""}`,onClick:()=>jt(de.id),children:[n.jsx(de.icon,{size:16,className:"sdm-nav-icon"}),de.label]},de.id))]},R.group))}),n.jsxs("div",{className:"sdm-content",ref:c,children:[n.jsxs("div",{ref:R=>{o.current.profile=R},className:"sdm-section",children:[n.jsxs("div",{className:"sdm-section-header",children:[n.jsxs("h3",{className:"sdm-section-title",children:[n.jsx(Su,{size:16})," "]}),d!=="profile"&&n.jsxs("button",{className:"sdm-edit-btn",onClick:()=>K("profile"),children:[n.jsx(eo,{size:14})," "]})]}),d==="profile"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"sdm-edit-field",children:[n.jsx("label",{className:"sdm-edit-label",children:" "}),n.jsx("input",{className:"sdm-edit-input",value:g.shop_name||"",onChange:R=>me("shop_name",R.target.value)})]}),n.jsxs("div",{className:"sdm-edit-field",children:[n.jsx("label",{className:"sdm-edit-label",children:""}),n.jsx("input",{className:"sdm-edit-input",value:g.fio||"",onChange:R=>me("fio",R.target.value)})]}),n.jsxs("div",{className:"sdm-edit-field",children:[n.jsx("label",{className:"sdm-edit-label",children:""}),n.jsx("input",{className:"sdm-edit-input",value:g.phone||"",onChange:R=>me("phone",Pf(R.target.value)),placeholder:"+7 000 000 00 00",maxLength:17})]}),n.jsxs("div",{className:"sdm-edit-field",children:[n.jsx("label",{className:"sdm-edit-label",children:""}),n.jsx("textarea",{className:"sdm-edit-input sdm-edit-input--textarea",value:g.description||"",onChange:R=>me("description",R.target.value),rows:3})]}),n.jsxs("div",{className:"sdm-edit-field",children:[n.jsx("label",{className:"sdm-edit-label",children:""}),n.jsx("input",{className:"sdm-edit-input",value:g.hashtags||"",onChange:R=>me("hashtags",R.target.value),placeholder:"# #"})]}),n.jsxs("div",{className:"sdm-section-actions",children:[n.jsx("button",{className:"sdm-btn sdm-btn--secondary",onClick:X,disabled:Y,children:""}),n.jsxs("button",{className:"sdm-btn sdm-btn--primary",onClick:Le,disabled:Y,children:[n.jsx(to,{size:14})," ",Y?"...":""]})]})]}):n.jsxs("div",{className:"sdm-field-grid",children:[n.jsxs("div",{className:"sdm-field",children:[n.jsx("div",{className:"sdm-field-label",children:""}),n.jsx("div",{className:"sdm-field-value",children:e.shop_name||n.jsx("span",{className:"sdm-field-value--muted",children:""})})]}),n.jsxs("div",{className:"sdm-field",children:[n.jsx("div",{className:"sdm-field-label",children:""}),n.jsx("div",{className:"sdm-field-value",children:e.fio||n.jsx("span",{className:"sdm-field-value--muted",children:""})})]}),n.jsxs("div",{className:"sdm-field",children:[n.jsx("div",{className:"sdm-field-label",children:""}),n.jsx("div",{className:"sdm-field-value",children:e.phone||n.jsx("span",{className:"sdm-field-value--muted",children:""})})]}),n.jsxs("div",{className:"sdm-field",children:[n.jsx("div",{className:"sdm-field-label",children:"Telegram ID"}),n.jsx("div",{className:"sdm-field-value",style:{fontFamily:"monospace"},children:e.tg_id})]}),n.jsxs("div",{className:"sdm-field sdm-field--full",children:[n.jsx("div",{className:"sdm-field-label",children:""}),n.jsx("div",{className:"sdm-field-value",children:e.description||n.jsx("span",{className:"sdm-field-value--muted",children:" "})})]}),e.hashtags&&n.jsxs("div",{className:"sdm-field sdm-field--full",children:[n.jsx("div",{className:"sdm-field-label",children:""}),n.jsx("div",{className:"sdm-field-value",children:e.hashtags})]})]})]}),n.jsxs("div",{ref:R=>{o.current.address=R},className:"sdm-section",children:[n.jsxs("div",{className:"sdm-section-header",children:[n.jsxs("h3",{className:"sdm-section-title",children:[n.jsx(Nu,{size:16})," "]}),d!=="address"&&n.jsxs("button",{className:"sdm-edit-btn",onClick:()=>K("address"),children:[n.jsx(eo,{size:14})," "]})]}),d==="address"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"sdm-edit-field",children:[n.jsx("label",{className:"sdm-edit-label",children:""}),n.jsx("select",{className:"sdm-edit-input sdm-edit-input--select",value:g.district_id||"1",onChange:R=>me("district_id",R.target.value),children:dc.map(R=>n.jsx("option",{value:R.id,children:R.name},R.id))})]}),n.jsxs("div",{className:"sdm-edit-field",children:[n.jsx("label",{className:"sdm-edit-label",children:""}),n.jsx("input",{className:"sdm-edit-input",value:g.address_name||"",onChange:R=>me("address_name",R.target.value),placeholder:". , . 1"})]}),n.jsxs("div",{className:"sdm-edit-field",children:[n.jsx("label",{className:"sdm-edit-label",children:"  "}),n.jsx("input",{className:"sdm-edit-input",value:g.map_url||"",onChange:R=>me("map_url",R.target.value),placeholder:"https://yandex.ru/maps/..."})]}),n.jsxs("div",{className:"sdm-edit-field",children:[n.jsx("label",{className:"sdm-edit-label",children:" "}),n.jsxs("div",{className:"sdm-metro-wrap",children:[n.jsx("input",{className:"sdm-edit-input",placeholder:" ...",value:T,onChange:R=>B(R.target.value),onFocus:()=>q.length>0&&Ce(!0)}),be&&n.jsx("div",{className:"sdm-metro-dropdown",children:T.trim().length<2?n.jsx("div",{className:"sdm-metro-hint",children:"  2 "}):ze?n.jsx("div",{className:"sdm-metro-hint",children:"..."}):q.length===0?n.jsx("div",{className:"sdm-metro-hint",children:"  "}):q.map(R=>n.jsxs("button",{type:"button",className:"sdm-metro-option",onClick:()=>{me("metro_id",String(R.id)),B(R.name),Ce(!1)},children:[R.line_color&&n.jsx("span",{className:"sdm-metro-line",style:{backgroundColor:R.line_color}}),R.name]},R.id))})]})]}),g.metro_id&&n.jsxs("div",{className:"sdm-edit-field",children:[n.jsx("label",{className:"sdm-edit-label",children:"   ()"}),n.jsx("input",{className:"sdm-edit-input",type:"number",min:"1",value:g.metro_walk_minutes||"",onChange:R=>me("metro_walk_minutes",R.target.value)})]}),n.jsxs("div",{className:"sdm-section-actions",children:[n.jsx("button",{className:"sdm-btn sdm-btn--secondary",onClick:X,disabled:Y,children:""}),n.jsxs("button",{className:"sdm-btn sdm-btn--primary",onClick:Le,disabled:Y,children:[n.jsx(to,{size:14})," ",Y?"...":""]})]})]}):n.jsxs("div",{className:"sdm-field-grid",children:[n.jsxs("div",{className:"sdm-field",children:[n.jsx("div",{className:"sdm-field-label",children:""}),n.jsx("div",{className:"sdm-field-value",children:Cs(e.district_id)})]}),n.jsxs("div",{className:"sdm-field",children:[n.jsx("div",{className:"sdm-field-label",children:""}),n.jsx("div",{className:"sdm-field-value",children:e.address_name||n.jsx("span",{className:"sdm-field-value--muted",children:""})})]}),n.jsxs("div",{className:"sdm-field",children:[n.jsx("div",{className:"sdm-field-label",children:""}),n.jsx("div",{className:"sdm-field-value",children:e.map_url?n.jsxs("a",{href:e.map_url,target:"_blank",rel:"noopener noreferrer",children:["  ",n.jsx(vf,{size:12,style:{display:"inline",verticalAlign:"middle"}})]}):n.jsx("span",{className:"sdm-field-value--muted",children:""})})]}),n.jsxs("div",{className:"sdm-field",children:[n.jsx("div",{className:"sdm-field-label",children:""}),n.jsxs("div",{className:"sdm-field-value",children:[e.metro_id?`ID: ${e.metro_id}`:n.jsx("span",{className:"sdm-field-value--muted",children:""}),e.metro_walk_minutes?` (${e.metro_walk_minutes} )`:""]})]})]})]}),n.jsxs("div",{ref:R=>{o.current.delivery=R},className:"sdm-section",children:[n.jsxs("div",{className:"sdm-section-header",children:[n.jsxs("h3",{className:"sdm-section-title",children:[n.jsx(fl,{size:16})," "]}),d!=="delivery"&&n.jsxs("button",{className:"sdm-edit-btn",onClick:()=>K("delivery"),children:[n.jsx(eo,{size:14})," "]})]}),d==="delivery"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"sdm-edit-field",children:[n.jsx("label",{className:"sdm-edit-label",children:" "}),n.jsx("select",{className:"sdm-edit-input sdm-edit-input--select",value:g.delivery_type||"both",onChange:R=>me("delivery_type",R.target.value),children:op.map(R=>n.jsx("option",{value:R.value,children:R.label},R.value))})]}),n.jsxs("div",{className:"sdm-edit-field",children:[n.jsx("label",{className:"sdm-edit-label",children:"  ()"}),n.jsx("input",{className:"sdm-edit-input",type:"number",min:"0",step:"1",value:g.delivery_price||"0",onChange:R=>me("delivery_price",R.target.value)})]}),n.jsxs("div",{className:"sdm-section-actions",children:[n.jsx("button",{className:"sdm-btn sdm-btn--secondary",onClick:X,disabled:Y,children:""}),n.jsxs("button",{className:"sdm-btn sdm-btn--primary",onClick:Le,disabled:Y,children:[n.jsx(to,{size:14})," ",Y?"...":""]})]})]}):n.jsxs("div",{className:"sdm-field-grid",children:[n.jsxs("div",{className:"sdm-field",children:[n.jsx("div",{className:"sdm-field-label",children:""}),n.jsx("div",{className:"sdm-field-value",children:Kt(e.delivery_type)})]}),n.jsxs("div",{className:"sdm-field",children:[n.jsx("div",{className:"sdm-field-label",children:""}),n.jsxs("div",{className:"sdm-field-value",children:[e.delivery_price??0," "]})]})]})]}),n.jsxs("div",{ref:R=>{o.current.org=R},className:"sdm-section",children:[n.jsx("div",{className:"sdm-section-header",children:n.jsxs("h3",{className:"sdm-section-title",children:[n.jsx(mf,{size:16})," "]})}),e.inn||e.ogrn?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"sdm-field-grid",children:[e.inn&&n.jsxs("div",{className:"sdm-field",children:[n.jsx("div",{className:"sdm-field-label",children:""}),n.jsx("div",{className:"sdm-field-value",style:{fontFamily:"monospace"},children:e.inn})]}),e.ogrn&&n.jsxs("div",{className:"sdm-field",children:[n.jsx("div",{className:"sdm-field-label",children:""}),n.jsx("div",{className:"sdm-field-value",style:{fontFamily:"monospace"},children:e.ogrn})]})]}),n.jsx("div",{className:"sdm-divider"}),P?n.jsx("div",{className:"sdm-loading",children:n.jsx("div",{className:"loader"})}):J?n.jsx(Cf,{data:J,showFullOkvedDescriptions:!1}):n.jsx("p",{className:"sdm-hint",children:"    "})]}):n.jsx("p",{className:"sdm-hint",children:"    "})]}),n.jsxs("div",{ref:R=>{o.current.limits=R},className:"sdm-section",children:[n.jsx("div",{className:"sdm-section-header",children:n.jsxs("h3",{className:"sdm-section-title",children:[n.jsx(xf,{size:16}),"   "]})}),n.jsxs("div",{className:"sdm-stat-row",children:[n.jsxs("div",{className:"sdm-stat-item",children:[n.jsx("span",{className:"sdm-stat-label",children:" "}),n.jsx("span",{className:"sdm-stat-value",children:e.active_orders??0})]}),n.jsxs("div",{className:"sdm-stat-item",children:[n.jsx("span",{className:"sdm-stat-label",children:" "}),n.jsx("span",{className:"sdm-stat-value",children:e.pending_requests??0})]}),n.jsxs("div",{className:"sdm-stat-item",children:[n.jsx("span",{className:"sdm-stat-label",children:"  "}),n.jsx("span",{className:"sdm-stat-value",children:e.plan_limit_cap??""})]})]}),n.jsxs("div",{className:"sdm-edit-field",children:[n.jsx("label",{className:"sdm-edit-label",children:" "}),n.jsxs("div",{className:"sdm-inline-row",children:[n.jsxs("select",{className:"sdm-edit-input sdm-edit-input--select",value:f,onChange:R=>p(R.target.value),children:[n.jsx("option",{value:"free",children:"Free ( 10 /)"}),n.jsx("option",{value:"pro",children:"Pro ( 50 /)"}),n.jsx("option",{value:"premium",children:"Premium ( 100 /)"})]}),n.jsx("button",{className:"sdm-btn sdm-btn--primary",onClick:I,disabled:Y,children:""})]})]}),n.jsx("div",{className:"sdm-divider"}),n.jsxs("div",{className:"sdm-edit-field",children:[n.jsx("label",{className:"sdm-edit-label",children:"  "}),n.jsx("p",{className:"sdm-hint",children:"-  . 0   =  ."}),n.jsxs("div",{className:"sdm-inline-row",children:[n.jsx("input",{className:"sdm-edit-input",type:"number",min:0,value:S,onChange:R=>N(R.target.value),placeholder:" "}),n.jsx("button",{className:"sdm-btn sdm-btn--primary",onClick:ye,disabled:Y,children:""})]})]}),n.jsx("div",{className:"sdm-divider"}),n.jsxs("div",{className:"sdm-edit-field",children:[n.jsx("label",{className:"sdm-edit-label",children:"   ()"}),n.jsx("p",{className:"sdm-hint",children:"    . 0 = ."}),n.jsxs("div",{className:"sdm-inline-row",children:[n.jsx("input",{className:"sdm-edit-input",type:"number",min:0,value:_,onChange:R=>j(R.target.value),placeholder:" "}),n.jsx("button",{className:"sdm-btn sdm-btn--primary",onClick:Ne,disabled:Y,children:""})]})]})]}),n.jsxs("div",{ref:R=>{o.current.placement=R},className:"sdm-section",children:[n.jsx("div",{className:"sdm-section-header",children:n.jsxs("h3",{className:"sdm-section-title",children:[n.jsx(hf,{size:16})," "]})}),n.jsxs("div",{className:"sdm-expiry",children:[n.jsx("span",{className:`sdm-expiry-dot sdm-expiry-dot--${Fe.dot}`}),n.jsx("span",{className:"sdm-expiry-text",children:Fe.text}),Fe.sub&&n.jsx("span",{className:"sdm-expiry-sub",children:Fe.sub})]}),n.jsx("div",{className:"sdm-divider"}),n.jsxs("div",{className:"sdm-edit-field",children:[n.jsx("label",{className:"sdm-edit-label",children:"  "}),n.jsx("p",{className:"sdm-hint",children:"..    "}),n.jsxs("div",{className:"sdm-inline-row",children:[n.jsx("input",{className:"sdm-edit-input",placeholder:"..",value:v===""?"":v,onChange:R=>x(R.target.value)}),n.jsx("input",{type:"date",className:"sdm-edit-input",style:{maxWidth:180},onChange:R=>{if(R.target.value){const de=new Date(R.target.value),Be=String(de.getDate()).padStart(2,"0"),vn=String(de.getMonth()+1).padStart(2,"0"),Re=de.getFullYear();x(`${Be}.${vn}.${Re}`)}}}),n.jsx("button",{className:"sdm-btn sdm-btn--primary",onClick:se,disabled:Y,children:""})]})]})]}),n.jsxs("div",{ref:R=>{o.current.web=R},className:"sdm-section",children:[n.jsx("div",{className:"sdm-section-header",children:n.jsxs("h3",{className:"sdm-section-title",children:[n.jsx(yf,{size:16})," -"]})}),n.jsxs("p",{className:"sdm-hint",children:["    - .  :  Seller",e.tg_id,",   ",e.tg_id,"."]}),(O==null?void 0:O.web_login)&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"sdm-credential",children:[n.jsx("span",{className:"sdm-credential-label",children:""}),n.jsx("span",{className:"sdm-credential-value",children:O.web_login}),n.jsx("div",{className:"sdm-credential-actions",children:n.jsx("button",{className:"sdm-btn sdm-btn--icon sdm-btn--secondary",onClick:()=>We(O.web_login),title:"",children:n.jsx(Vr,{size:14})})})]}),n.jsxs("div",{className:"sdm-credential",children:[n.jsx("span",{className:"sdm-credential-label",children:""}),n.jsx("span",{className:"sdm-credential-value",children:O.web_password!=null?A?O.web_password:"":" "}),n.jsx("div",{className:"sdm-credential-actions",children:O.web_password!=null&&n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"sdm-btn sdm-btn--icon sdm-btn--secondary",onClick:()=>G(!A),title:A?"":"",children:A?n.jsx(er,{size:14}):n.jsx(vs,{size:14})}),n.jsx("button",{className:"sdm-btn sdm-btn--icon sdm-btn--secondary",onClick:()=>We(O.web_password),title:"",children:n.jsx(Vr,{size:14})})]})})]})]}),C&&n.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"rgba(34, 197, 94, 0.08)",borderRadius:8},children:[n.jsx("p",{className:"sdm-hint",style:{color:"var(--success)",marginBottom:"0.5rem"},children:"  :"}),n.jsxs("div",{className:"sdm-credential",children:[n.jsx("span",{className:"sdm-credential-label",children:""}),n.jsx("span",{className:"sdm-credential-value",children:C.web_login}),n.jsx("div",{className:"sdm-credential-actions",children:n.jsx("button",{className:"sdm-btn sdm-btn--icon sdm-btn--secondary",onClick:()=>We(C.web_login),children:n.jsx(Vr,{size:14})})})]}),n.jsxs("div",{className:"sdm-credential",children:[n.jsx("span",{className:"sdm-credential-label",children:""}),n.jsx("span",{className:"sdm-credential-value",children:C.web_password}),n.jsx("div",{className:"sdm-credential-actions",children:n.jsx("button",{className:"sdm-btn sdm-btn--icon sdm-btn--secondary",onClick:()=>We(C.web_password),children:n.jsx(Vr,{size:14})})})]})]}),n.jsx("div",{style:{marginTop:"1rem"},children:n.jsx("button",{className:"sdm-btn sdm-btn--secondary",onClick:fe,disabled:W,children:W?"...":" /  "})})]}),n.jsxs("div",{ref:R=>{o.current.status=R},className:"sdm-section",children:[n.jsx("div",{className:"sdm-section-header",children:n.jsxs("h3",{className:"sdm-section-title",children:[n.jsx(Vi,{size:16})," "]})}),n.jsxs("div",{className:"sdm-status-row",children:[n.jsx("span",{className:`sdm-status-indicator sdm-status-indicator--${dt.indicator}`}),n.jsx("span",{className:"sdm-status-text",children:dt.text}),dt.sub&&n.jsx("span",{className:"sdm-status-sub",children:dt.sub})]}),e.active_orders&&e.active_orders>0&&!e.is_blocked&&n.jsxs("p",{className:"sdm-hint",style:{color:"var(--warning)"},children:["  ",e.active_orders,"  .      ."]}),n.jsxs("button",{className:`sdm-btn ${e.is_blocked?"sdm-btn--success":"sdm-btn--warning"}`,onClick:U,disabled:Y,children:[n.jsx(Vi,{size:14}),e.is_blocked?"":""]})]}),n.jsxs("div",{ref:R=>{o.current.delete=R},className:"sdm-section sdm-section--danger",children:[n.jsx("div",{className:"sdm-section-header",children:n.jsxs("h3",{className:"sdm-section-title",children:[n.jsx(ur,{size:16})," "]})}),n.jsx("p",{className:"sdm-hint",children:"  .         ."}),n.jsxs("label",{className:"sdm-confirm-check",children:[n.jsx("input",{type:"checkbox",checked:H,onChange:R=>V(R.target.checked)})," ,    "]}),n.jsxs("button",{className:"sdm-btn sdm-btn--danger",onClick:Me,disabled:Y||!H,children:[n.jsx(ur,{size:14}),Y?"...":" "]})]})]})]})]})})}function Tf({title:e,onClose:t,children:s}){return n.jsx("div",{className:"modal-overlay",onClick:t,children:n.jsxs("div",{className:"modal",onClick:r=>r.stopPropagation(),children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h2",{children:e}),n.jsx("button",{className:"modal-close",onClick:t,children:""})]}),n.jsx("div",{className:"modal-body",children:s})]})})}function Ls({label:e,value:t,onChange:s,required:r,type:a="text",textarea:i,render:l}){return n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{className:"form-label",children:[e,r&&" *"]}),l??(i?n.jsx("textarea",{className:"form-input",value:t||"",onChange:o=>s==null?void 0:s(o.target.value),rows:3}):n.jsx("input",{type:a,className:"form-input",value:t||"",onChange:o=>s==null?void 0:s(o.target.value),required:r}))]})}function Ta(e,t="tab"){const[s,r]=nf(),a=s.get(t)||e,i=u.useCallback(l=>{r(o=>{const c=new URLSearchParams(o);return l===e?c.delete(t):c.set(t,l),c},{replace:!0})},[e,t,r]);return[a,i]}function ao(e){return e.toISOString().slice(0,10)}function Ka(e,t,s){const r=new Date,a=ao(r);if(e==="1d")return{date_from:a,date_to:a};if(e==="7d"){const i=new Date(r);return i.setDate(i.getDate()-6),{date_from:ao(i),date_to:a}}if(e==="30d"){const i=new Date(r);return i.setDate(i.getDate()-29),{date_from:ao(i),date_to:a}}return{date_from:t||a,date_to:s||a}}function yb(e){return e>=100?"load-pct--danger":e>=75?"load-pct--warning":""}function jb(){const[e,t]=u.useState([]),[s,r]=u.useState(!0),[a,i]=u.useState(null),[l,o]=u.useState("30d"),[c,d]=u.useState(()=>Ka("30d").date_from),[h,g]=u.useState(()=>Ka("30d").date_to),m=u.useCallback(async x=>{r(!0),t([]);try{const[C,M]=await Promise.all([gj(x),xj().catch(O=>(console.warn("Limits analytics load failed:",O),null))]);t((C==null?void 0:C.daily_sales)??[]),i(M||null)}catch{t([])}finally{r(!1)}},[]);u.useEffect(()=>{if(l==="custom")return;const{date_from:x,date_to:C}=Ka(l);m({date_from:x,date_to:C})},[l,m]);const _=e.reduce((x,C)=>x+(C.orders||0),0),j=e.reduce((x,C)=>x+(C.revenue||0),0),S=Math.round(j*.18),N=_>0?Math.round(j/_):0,f=x=>{if(o(x),x!=="custom"){const{date_from:C,date_to:M}=Ka(x);d(C),g(M)}else m({date_from:c,date_to:h})},p=()=>{c&&h&&(o("custom"),m({date_from:c,date_to:h}))},v=e.map(x=>({date:x.date,revenue:x.revenue,orders:x.orders}));return s&&e.length===0?n.jsx("div",{className:"stats-loading",children:n.jsx("div",{className:"loader"})}):n.jsxs("div",{className:"stats-page",children:[n.jsxs("div",{className:"stats-summary card",children:[n.jsx("h3",{children:" "}),n.jsxs("div",{className:"stats-range-row",children:[n.jsx("span",{className:"range-label",children:":"}),n.jsxs("div",{className:"range-buttons",children:[n.jsx("button",{type:"button",className:`btn btn-sm ${l==="1d"?"btn-primary":"btn-secondary"}`,onClick:()=>f("1d"),children:"1 "}),n.jsx("button",{type:"button",className:`btn btn-sm ${l==="7d"?"btn-primary":"btn-secondary"}`,onClick:()=>f("7d"),children:"7 "}),n.jsx("button",{type:"button",className:`btn btn-sm ${l==="30d"?"btn-primary":"btn-secondary"}`,onClick:()=>f("30d"),children:""}),n.jsx("button",{type:"button",className:`btn btn-sm ${l==="custom"?"btn-primary":"btn-secondary"}`,onClick:()=>f("custom"),children:" "})]}),l==="custom"&&n.jsxs("div",{className:"range-custom",children:[n.jsx("input",{type:"date",className:"form-input form-input-sm",value:c,onChange:x=>d(x.target.value)}),n.jsx("span",{className:"range-sep",children:""}),n.jsx("input",{type:"date",className:"form-input form-input-sm",value:h,onChange:x=>g(x.target.value)}),n.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:p,children:""})]})]}),n.jsxs("div",{className:"summary-grid",children:[n.jsxs("div",{className:"summary-item",children:[n.jsx("span",{className:"summary-label",children:""}),n.jsx("span",{className:"summary-value",children:_})]}),n.jsxs("div",{className:"summary-item",children:[n.jsx("span",{className:"summary-label",children:""}),n.jsxs("span",{className:"summary-value",children:[j.toLocaleString("ru")," "]})]}),n.jsxs("div",{className:"summary-item accent",children:[n.jsx("span",{className:"summary-label",children:"  (18%)"}),n.jsxs("span",{className:"summary-value",children:[S.toLocaleString("ru")," "]})]}),n.jsxs("div",{className:"summary-item",children:[n.jsx("span",{className:"summary-label",children:" "}),n.jsxs("span",{className:"summary-value",children:[N.toLocaleString("ru")," "]})]})]}),n.jsx("div",{className:"stats-chart-block",children:n.jsx("div",{className:"seller-stats-chart card",children:s?n.jsx("div",{className:"seller-chart-loading"}):n.jsx(gl,{data:v})})})]}),a&&n.jsxs("div",{className:"stats-summary card stats-limits-card",children:[n.jsx("h3",{children:" "}),n.jsxs("div",{className:"summary-grid",children:[n.jsxs("div",{className:"summary-item",children:[n.jsx("span",{className:"summary-label",children:" "}),n.jsx("span",{className:"summary-value",children:a.total_sellers})]}),n.jsxs("div",{className:"summary-item",children:[n.jsx("span",{className:"summary-label",children:" "}),n.jsx("span",{className:"summary-value",children:a.active_today})]}),n.jsxs("div",{className:"summary-item accent",children:[n.jsx("span",{className:"summary-label",children:" "}),n.jsx("span",{className:"summary-value",children:a.exhausted})]}),n.jsxs("div",{className:"summary-item",children:[n.jsx("span",{className:"summary-label",children:"  "}),n.jsx("span",{className:"summary-value",children:a.closed_today})]}),n.jsxs("div",{className:"summary-item",children:[n.jsx("span",{className:"summary-label",children:" "}),n.jsx("span",{className:"summary-value",children:a.no_limit})]}),n.jsxs("div",{className:"summary-item",children:[n.jsx("span",{className:"summary-label",children:" "}),n.jsxs("span",{className:"summary-value",children:[a.avg_load_pct,"%"]})]})]}),Object.keys(a.by_plan).length>0&&n.jsxs("div",{className:"stats-table-section",children:[n.jsx("h4",{className:"stats-table-heading",children:" "}),n.jsxs("table",{className:"stats-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:""}),n.jsx("th",{className:"text-right",children:""}),n.jsx("th",{className:"text-right",children:""}),n.jsx("th",{className:"text-right",children:""})]})}),n.jsx("tbody",{children:Object.entries(a.by_plan).map(([x,C])=>n.jsxs("tr",{children:[n.jsx("td",{children:x==="free"?"Free":x==="pro"?"Pro":"Premium"}),n.jsx("td",{className:"text-right",children:C.total}),n.jsx("td",{className:"text-right",children:C.active}),n.jsx("td",{className:"text-right",children:C.exhausted})]},x))})]})]}),a.top_loaded.length>0&&n.jsxs("div",{className:"stats-table-section",children:[n.jsx("h4",{className:"stats-table-heading",children:"-10 "}),n.jsxs("table",{className:"stats-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:""}),n.jsx("th",{className:"text-right",children:""}),n.jsx("th",{className:"text-right",children:""}),n.jsx("th",{className:"text-right",children:""}),n.jsx("th",{children:""})]})}),n.jsx("tbody",{children:a.top_loaded.map(x=>n.jsxs("tr",{children:[n.jsx("td",{children:x.shop_name||x.fio}),n.jsx("td",{className:"text-right",children:x.used}),n.jsx("td",{className:"text-right",children:x.limit}),n.jsxs("td",{className:`text-right ${yb(x.load_pct)}`,children:[x.load_pct,"%"]}),n.jsx("td",{children:x.plan==="free"?"Free":x.plan==="pro"?"Pro":"Premium"})]},x.seller_id))})]})]})]})]})}const bb={pending:"",accepted:"",assembling:"",in_transit:"",done:"",completed:"",rejected:"",cancelled:""},_b={pending:"pending",accepted:"active",assembling:"active",in_transit:"active",done:"done",completed:"done",rejected:"rejected",cancelled:"cancelled"};function Rs(e){return`${e.toLocaleString("ru-RU")} `}function Nb(e){return e?new Date(e).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}):""}function wb(e){return e==="pro"?"Pro":e==="premium"?"Premium":"Free"}function Sb({sellerId:e,seller:t,financeRow:s,platformMetrics:r,dateFrom:a,dateTo:i,onClose:l}){const[o,c]=u.useState(null),[d,h]=u.useState(!0);u.useEffect(()=>{h(!0),cf({seller_id:e,date_from:a,date_to:i,per_page:10}).then(c).catch(()=>c(null)).finally(()=>h(!1))},[e,a,i]);const g=(t==null?void 0:t.shop_name)||(s==null?void 0:s.shop_name)||` #${e}`,m=(s==null?void 0:s.orders)??0,_=(s==null?void 0:s.revenue)??0,j=(s==null?void 0:s.commission)??0,S=m>0?Math.round(_/m):0,N=(s==null?void 0:s.share_pct)??0,f=(t==null?void 0:t.max_orders)??(t==null?void 0:t.default_daily_limit)??0,p=(t==null?void 0:t.active_orders)??0,v=f>0?Math.round(p/f*100):0,x=r.avg_check||0,C=x>0?Math.round((S-x)/x*100):0,M=(o==null?void 0:o.status_breakdown)??{},O=Object.values(M).reduce((A,G)=>A+G,0),E={pending:0,active:0,done:0,rejected:0,cancelled:0};for(const[A,G]of Object.entries(M)){const H=_b[A]||"cancelled";E[H]+=G}const W=t!=null&&t.placement_expired_at?new Date(t.placement_expired_at)<new Date:!1,z=t!=null&&t.placement_expired_at?new Date(t.placement_expired_at).toLocaleDateString("ru-RU"):null;return n.jsxs(ms,{isOpen:!0,onClose:l,title:`: ${g}`,size:"xl",children:[n.jsx("div",{className:"sam-section",children:n.jsxs("div",{className:"sam-profile",children:[n.jsxs("div",{className:"sam-profile-main",children:[n.jsx("div",{className:"sam-shop-name",children:g}),(t==null?void 0:t.fio)&&n.jsx("div",{className:"sam-fio",children:t.fio}),n.jsxs("div",{className:"sam-badges",children:[n.jsx("span",{className:`sam-badge sam-badge--${(t==null?void 0:t.subscription_plan)||"free"}`,children:wb(t==null?void 0:t.subscription_plan)}),z&&n.jsxs("span",{className:`sam-badge ${W?"sam-badge--expired":"sam-badge--active"}`,children:[W?"":"","  ",z]}),(t==null?void 0:t.is_blocked)&&n.jsx("span",{className:"sam-badge sam-badge--blocked",children:""})]})]}),n.jsxs("div",{className:"sam-profile-meta",children:[(t==null?void 0:t.phone)&&n.jsx("span",{children:t.phone}),(t==null?void 0:t.inn)&&n.jsxs("span",{children:[": ",t.inn]}),(t==null?void 0:t.ogrn)&&n.jsxs("span",{children:[": ",t.ogrn]})]})]})}),n.jsxs("div",{className:"sam-section",children:[n.jsx("div",{className:"sam-section-title",children:"  "}),n.jsxs("div",{className:"sam-kpi-grid",children:[n.jsxs("div",{className:"sam-kpi",children:[n.jsx("div",{className:"sam-kpi-label",children:""}),n.jsx("div",{className:"sam-kpi-value",children:m})]}),n.jsxs("div",{className:"sam-kpi",children:[n.jsx("div",{className:"sam-kpi-label",children:""}),n.jsx("div",{className:"sam-kpi-value",children:Rs(_)})]}),n.jsxs("div",{className:"sam-kpi sam-kpi--accent",children:[n.jsx("div",{className:"sam-kpi-label",children:" 18%"}),n.jsx("div",{className:"sam-kpi-value",children:Rs(j)})]}),n.jsxs("div",{className:"sam-kpi",children:[n.jsx("div",{className:"sam-kpi-label",children:" "}),n.jsx("div",{className:"sam-kpi-value",children:Rs(S)})]}),n.jsxs("div",{className:"sam-kpi",children:[n.jsx("div",{className:"sam-kpi-label",children:" "}),n.jsxs("div",{className:"sam-kpi-value",children:[N,"%"]})]}),n.jsxs("div",{className:"sam-kpi",children:[n.jsx("div",{className:"sam-kpi-label",children:""}),n.jsx("div",{className:"sam-kpi-value",children:f>0?`${v}%`:""}),f>0&&n.jsx("div",{className:"sam-load-bar",children:n.jsx("div",{className:`sam-load-fill ${v>=100?"sam-load-fill--danger":v>=75?"sam-load-fill--warning":""}`,style:{width:`${Math.min(v,100)}%`}})})]})]})]}),n.jsxs("div",{className:"sam-section",children:[n.jsx("div",{className:"sam-section-title",children:"  "}),n.jsxs("div",{className:"sam-compare-grid",children:[n.jsxs("div",{className:"sam-compare-item",children:[n.jsx("div",{className:"sam-compare-label",children:" "}),n.jsxs("div",{className:"sam-compare-row",children:[n.jsx("span",{children:""}),n.jsx("span",{className:"sam-compare-value",children:Rs(S)})]}),n.jsxs("div",{className:"sam-compare-row",children:[n.jsx("span",{children:""}),n.jsx("span",{className:"sam-compare-value",children:Rs(x)})]}),n.jsxs("div",{className:"sam-compare-row",children:[n.jsx("span",{children:""}),n.jsxs("span",{className:`sam-indicator ${C>0?"sam-indicator--up":C<0?"sam-indicator--down":"sam-indicator--neutral"}`,children:[C>0?"+":"",C,"%"]})]})]}),n.jsxs("div",{className:"sam-compare-item",children:[n.jsx("div",{className:"sam-compare-label",children:" "}),n.jsx("div",{className:"sam-compare-row",children:n.jsxs("span",{children:[N,"%  "]})}),n.jsx("div",{className:"sam-load-bar",style:{marginTop:8},children:n.jsx("div",{className:"sam-load-fill",style:{width:`${Math.min(N,100)}%`}})})]}),n.jsxs("div",{className:"sam-compare-item",children:[n.jsx("div",{className:"sam-compare-label",children:" "}),n.jsxs("div",{className:"sam-compare-row",children:[n.jsx("span",{children:""}),n.jsx("span",{className:"sam-compare-value",children:m})]}),n.jsxs("div",{className:"sam-compare-row",children:[n.jsx("span",{children:""}),n.jsx("span",{className:"sam-compare-value",children:r.orders})]})]})]})]}),d?n.jsx("div",{className:"sam-section",children:n.jsx("div",{className:"sam-loading",children:n.jsx("div",{className:"loader"})})}):O>0?n.jsxs("div",{className:"sam-section",children:[n.jsx("div",{className:"sam-section-title",children:" "}),n.jsx("div",{className:"sam-status-bar-wrap",children:n.jsxs("div",{className:"sam-status-bar",children:[E.pending>0&&n.jsx("div",{className:"sam-status-bar-segment sam-status-bar-segment--pending",style:{width:`${E.pending/O*100}%`}}),E.active>0&&n.jsx("div",{className:"sam-status-bar-segment sam-status-bar-segment--active",style:{width:`${E.active/O*100}%`}}),E.done>0&&n.jsx("div",{className:"sam-status-bar-segment sam-status-bar-segment--done",style:{width:`${E.done/O*100}%`}}),E.rejected>0&&n.jsx("div",{className:"sam-status-bar-segment sam-status-bar-segment--rejected",style:{width:`${E.rejected/O*100}%`}}),E.cancelled>0&&n.jsx("div",{className:"sam-status-bar-segment sam-status-bar-segment--cancelled",style:{width:`${E.cancelled/O*100}%`}})]})}),n.jsxs("div",{className:"sam-status-legend",children:[E.pending>0&&n.jsxs("div",{className:"sam-legend-item",children:[n.jsx("div",{className:"sam-legend-dot sam-legend-dot--pending"}),n.jsxs("span",{children:[" (",E.pending,")"]})]}),E.active>0&&n.jsxs("div",{className:"sam-legend-item",children:[n.jsx("div",{className:"sam-legend-dot sam-legend-dot--active"}),n.jsxs("span",{children:["  (",E.active,")"]})]}),E.done>0&&n.jsxs("div",{className:"sam-legend-item",children:[n.jsx("div",{className:"sam-legend-dot sam-legend-dot--done"}),n.jsxs("span",{children:[" (",E.done,")"]})]}),E.rejected>0&&n.jsxs("div",{className:"sam-legend-item",children:[n.jsx("div",{className:"sam-legend-dot sam-legend-dot--rejected"}),n.jsxs("span",{children:[" (",E.rejected,")"]})]}),E.cancelled>0&&n.jsxs("div",{className:"sam-legend-item",children:[n.jsx("div",{className:"sam-legend-dot sam-legend-dot--cancelled"}),n.jsxs("span",{children:[" (",E.cancelled,")"]})]})]})]}):null,!d&&o&&o.orders.length>0&&n.jsxs("div",{className:"sam-section",children:[n.jsx("div",{className:"sam-section-title",children:" "}),n.jsxs("table",{className:"sam-orders-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:""}),n.jsx("th",{className:"text-right",children:""}),n.jsx("th",{children:""}),n.jsx("th",{children:""})]})}),n.jsx("tbody",{children:o.orders.slice(0,10).map(A=>n.jsxs("tr",{children:[n.jsx("td",{children:A.id}),n.jsx("td",{children:A.buyer_fio||`#${A.buyer_id}`}),n.jsx("td",{className:"text-right",children:Rs(A.total_price)}),n.jsx("td",{children:n.jsx("span",{className:`sam-order-status sam-order-status--${A.status}`,children:bb[A.status]||A.status})}),n.jsx("td",{children:Nb(A.created_at)})]},A.id))})]})]}),t&&n.jsxs("div",{className:"sam-section",children:[n.jsx("div",{className:"sam-section-title",children:" "}),n.jsxs("div",{className:"sam-ops-grid",children:[n.jsxs("div",{className:"sam-ops-item",children:[n.jsx("div",{className:"sam-ops-label",children:" "}),n.jsxs("div",{className:"sam-ops-value",children:[p,f>0?` / ${f}`:""]})]}),n.jsxs("div",{className:"sam-ops-item",children:[n.jsx("div",{className:"sam-ops-label",children:" "}),n.jsx("div",{className:"sam-ops-value",children:t.pending_requests??0})]}),n.jsxs("div",{className:"sam-ops-item",children:[n.jsx("div",{className:"sam-ops-label",children:" "}),n.jsx("div",{className:"sam-ops-value",children:t.default_daily_limit??""})]}),t.weekly_schedule&&Object.keys(t.weekly_schedule).length>0&&n.jsxs("div",{className:"sam-ops-item",children:[n.jsx("div",{className:"sam-ops-label",children:""}),n.jsx("div",{className:"sam-ops-value",style:{fontSize:"var(--text-xs)"},children:Object.entries(t.weekly_schedule).filter(([,A])=>A>0).map(([A,G])=>`${A}: ${G}`).join(", ")||""})]})]})]})]})}function Os(e){return e.toISOString().slice(0,10)}function cp(e){return`${e.toLocaleString("ru-RU")} `}function kb(){const[e,t]=u.useState(null),[s,r]=u.useState([]),[a,i]=u.useState(!0),[l,o]=u.useState("30d"),[c,d]=u.useState(()=>{const A=new Date;return A.setDate(A.getDate()-29),Os(A)}),[h,g]=u.useState(()=>Os(new Date)),[m,_]=u.useState("revenue"),[j,S]=u.useState("desc"),[N,f]=u.useState(""),[p,v]=u.useState(null),x=u.useCallback(async()=>{i(!0);try{let A=c,G=h;if(l!=="custom"){G=Os(new Date);const J=new Date;l==="7d"?J.setDate(J.getDate()-6):l==="30d"?J.setDate(J.getDate()-29):J.setDate(J.getDate()-89),A=Os(J)}const H={date_from:A,date_to:G},[V,Y]=await Promise.all([uf(H),ju()]);t(V),r(Y||[])}catch{t(null)}finally{i(!1)}},[l,c,h]);u.useEffect(()=>{x()},[x]);const C=A=>{if(o(A),A!=="custom"){g(Os(new Date));const H=new Date;A==="7d"?H.setDate(H.getDate()-6):A==="30d"?H.setDate(H.getDate()-29):H.setDate(H.getDate()-89),d(Os(H))}},M=A=>{m===A?S(G=>G==="asc"?"desc":"asc"):(_(A),S("desc"))},O=u.useMemo(()=>{if(!e)return[];let A=[...e.by_seller];if(N.trim()){const G=N.trim().toLowerCase();A=A.filter(H=>H.shop_name.toLowerCase().includes(G))}return A.sort((G,H)=>{const V=G[m],Y=H[m];if(typeof V=="string"&&typeof Y=="string")return j==="asc"?V.localeCompare(Y):Y.localeCompare(V);const ne=Number(V)||0,J=Number(Y)||0;return j==="asc"?ne-J:J-ne}),A},[e,m,j,N]),E=({column:A})=>m!==A?n.jsx("span",{className:"ss-sort-icon ss-sort-icon--inactive",children:""}):j==="asc"?n.jsx(Hj,{size:14,className:"ss-sort-icon"}):n.jsx(Uj,{size:14,className:"ss-sort-icon"}),W=p?s.find(A=>A.tg_id===p):void 0,z=p?e==null?void 0:e.by_seller.find(A=>A.seller_id===p):void 0;return n.jsxs("div",{className:"stats-page",children:[n.jsxs("div",{className:"ss-controls",children:[n.jsx("div",{className:"ss-presets",children:["7d","30d","90d","custom"].map(A=>n.jsx("button",{className:`af-preset-btn ${l===A?"af-preset-btn--active":""}`,onClick:()=>C(A),children:A==="7d"?"7 ":A==="30d"?"30 ":A==="90d"?"90 ":""},A))}),l==="custom"&&n.jsxs("div",{className:"ss-custom-range",children:[n.jsx("input",{type:"date",className:"af-input",value:c,onChange:A=>d(A.target.value)}),n.jsx("span",{className:"af-sep",children:""}),n.jsx("input",{type:"date",className:"af-input",value:h,onChange:A=>g(A.target.value)}),n.jsx("button",{className:"af-apply-btn",onClick:x,children:""})]}),n.jsxs("div",{className:"ss-search",children:[n.jsx(_f,{size:14,className:"ss-search-icon"}),n.jsx("input",{type:"text",className:"ss-search-input",placeholder:"  ...",value:N,onChange:A=>f(A.target.value)})]})]}),a?n.jsx("div",{className:"stats-loading",children:n.jsx("div",{className:"loader"})}):e?n.jsxs("div",{className:"card ss-table-card",children:[n.jsx("div",{className:"ss-table-header",children:n.jsxs("h3",{children:[" (",O.length,")"]})}),n.jsxs("div",{className:"ss-table-wrap",children:[n.jsxs("table",{className:"ss-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsxs("th",{className:"ss-th ss-th--clickable",onClick:()=>M("shop_name"),children:[" ",n.jsx(E,{column:"shop_name"})]}),n.jsx("th",{className:"ss-th",children:""}),n.jsxs("th",{className:"ss-th ss-th--clickable ss-th--right",onClick:()=>M("orders"),children:[" ",n.jsx(E,{column:"orders"})]}),n.jsxs("th",{className:"ss-th ss-th--clickable ss-th--right",onClick:()=>M("revenue"),children:[" ",n.jsx(E,{column:"revenue"})]}),n.jsxs("th",{className:"ss-th ss-th--clickable ss-th--right",onClick:()=>M("commission"),children:[" 18% ",n.jsx(E,{column:"commission"})]}),n.jsxs("th",{className:"ss-th ss-th--clickable ss-th--right",onClick:()=>M("share_pct"),children:[" ",n.jsx(E,{column:"share_pct"})]})]})}),n.jsx("tbody",{children:O.map(A=>n.jsxs("tr",{className:"ss-row",onClick:()=>v(A.seller_id),children:[n.jsx("td",{className:"ss-cell-name",children:A.shop_name}),n.jsx("td",{children:n.jsx("span",{className:`af-plan-badge af-plan-badge--${A.plan}`,children:A.plan==="free"?"Free":A.plan==="pro"?"Pro":"Premium"})}),n.jsx("td",{className:"ss-cell-num",children:A.orders}),n.jsx("td",{className:"ss-cell-num",children:cp(A.revenue)}),n.jsx("td",{className:"ss-cell-num ss-cell-commission",children:cp(A.commission)}),n.jsxs("td",{className:"ss-cell-share",children:[n.jsx("div",{className:"af-share-bar",children:n.jsx("div",{className:"af-share-fill",style:{width:`${Math.min(A.share_pct,100)}%`}})}),n.jsxs("span",{children:[A.share_pct,"%"]})]})]},A.seller_id))})]}),O.length===0&&n.jsx("p",{className:"ss-empty",children:"    "})]})]}):n.jsx("div",{className:"ss-empty",children:"   "}),p&&e&&n.jsx(Sb,{sellerId:p,seller:W,financeRow:z,platformMetrics:e.period,dateFrom:c,dateTo:h,onClose:()=>v(null)})]})}const Cb=[{key:"overview",label:""},{key:"sellers",label:" "}];function Eb(){const[e,t]=Ta("overview");return n.jsxs("div",{children:[n.jsx(tt,{title:"",subtitle:" "}),n.jsx(on,{tabs:Cb,activeTab:e,onChange:t}),e==="overview"&&n.jsx(jb,{}),e==="sellers"&&n.jsx(kb,{})]})}const Pb=[{value:"",label:" "},{value:"pending",label:""},{value:"accepted",label:""},{value:"assembling",label:""},{value:"in_transit",label:""},{value:"done",label:""},{value:"completed",label:""},{value:"rejected",label:""},{value:"cancelled",label:""}],io={pending:"warning",accepted:"info",assembling:"info",in_transit:"info",done:"success",completed:"success",rejected:"danger",cancelled:"neutral"},lo={pending:"",accepted:"",assembling:"",in_transit:"",done:"",completed:"",rejected:"",cancelled:""};function oo(e){return e?new Date(e).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}):""}function Or(e){return`${e.toLocaleString("ru-RU")} `}function up(e){return e.toISOString().slice(0,10)}function Tb(){const[e,t]=u.useState(null),[s,r]=u.useState([]),[a,i]=u.useState(!0),[l,o]=u.useState(null),[c,d]=u.useState(""),[h,g]=u.useState(""),[m,_]=u.useState(()=>{const x=new Date;return x.setDate(x.getDate()-30),up(x)}),[j,S]=u.useState(()=>up(new Date)),[N,f]=u.useState(1),p=u.useCallback(async()=>{i(!0);try{const x={page:N,per_page:30};c&&(x.status=c),h&&(x.seller_id=Number(h)),m&&(x.date_from=m),j&&(x.date_to=j);const C=await cf(x);t(C)}catch{t(null)}finally{i(!1)}},[c,h,m,j,N]);u.useEffect(()=>{p()},[p]),u.useEffect(()=>{ju().then(r).catch(()=>r([]))},[]);const v=()=>{f(1),p()};return n.jsxs("div",{className:"admin-orders",children:[n.jsx(tt,{title:"",subtitle:"   "}),e&&n.jsxs("div",{className:"ao-summary",children:[n.jsxs("div",{className:"ao-summary-item",children:[n.jsx("span",{className:"ao-summary-label",children:""}),n.jsx("span",{className:"ao-summary-value",children:e.total})]}),n.jsxs("div",{className:"ao-summary-item",children:[n.jsx("span",{className:"ao-summary-label",children:" "}),n.jsx("span",{className:"ao-summary-value",children:Or(e.total_amount)})]}),Object.entries(e.status_breakdown).map(([x,C])=>n.jsxs("div",{className:"ao-summary-item",children:[n.jsx(sn,{variant:io[x]||"neutral",children:lo[x]||x}),n.jsx("span",{className:"ao-summary-count",children:C})]},x))]}),n.jsxs("div",{className:"ao-filters",children:[n.jsx(gf,{size:16,className:"ao-filter-icon"}),n.jsx("select",{value:c,onChange:x=>{d(x.target.value),f(1)},className:"ao-select",children:Pb.map(x=>n.jsx("option",{value:x.value,children:x.label},x.value))}),n.jsxs("select",{value:h,onChange:x=>{g(x.target.value),f(1)},className:"ao-select ao-select--wide",children:[n.jsx("option",{value:"",children:" "}),s.map(x=>n.jsx("option",{value:x.tg_id,children:x.shop_name||x.fio},x.tg_id))]}),n.jsx("input",{type:"date",className:"ao-input",value:m,onChange:x=>_(x.target.value)}),n.jsx("span",{className:"ao-sep",children:""}),n.jsx("input",{type:"date",className:"ao-input",value:j,onChange:x=>S(x.target.value)}),n.jsx("button",{className:"ao-btn",onClick:v,children:""})]}),a?n.jsx("div",{className:"ao-loading",children:n.jsx("div",{className:"loader"})}):!e||e.orders.length===0?n.jsx("div",{className:"ao-empty",children:"    "}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"ao-table-wrap",children:n.jsxs("table",{className:"ao-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:""}),n.jsx("th",{children:""}),n.jsx("th",{children:""}),n.jsx("th",{children:""}),n.jsx("th",{children:""}),n.jsx("th",{children:""}),n.jsx("th",{})]})}),n.jsx("tbody",{children:e.orders.map(x=>n.jsxs("tr",{className:"ao-row",onClick:()=>o(x),children:[n.jsx("td",{className:"ao-cell-id",children:x.id}),n.jsx("td",{className:"ao-cell-date",children:oo(x.created_at)}),n.jsx("td",{className:"ao-cell-seller",children:x.seller_name}),n.jsxs("td",{className:"ao-cell-buyer",children:[x.buyer_fio||`#${x.buyer_id}`,x.buyer_phone&&n.jsx("span",{className:"ao-phone",children:x.buyer_phone})]}),n.jsx("td",{className:"ao-cell-price",children:Or(x.total_price)}),n.jsx("td",{children:n.jsx(sn,{variant:io[x.status]||"neutral",children:lo[x.status]||x.status})}),n.jsxs("td",{className:"ao-cell-type",children:[x.is_preorder&&n.jsx("span",{className:"ao-preorder-badge",children:""}),x.delivery_type===""||x.delivery_type==="delivery"?"":""]}),n.jsx("td",{children:n.jsx(vs,{size:14,className:"ao-eye"})})]},x.id))})]})}),e.pages>1&&n.jsxs("div",{className:"ao-pagination",children:[n.jsx("button",{disabled:N<=1,onClick:()=>f(N-1),className:"ao-page-btn",children:n.jsx(bu,{size:16})}),n.jsxs("span",{className:"ao-page-info",children:[N,"  ",e.pages]}),n.jsx("button",{disabled:N>=e.pages,onClick:()=>f(N+1),className:"ao-page-btn",children:n.jsx(xr,{size:16})})]})]}),l&&n.jsx("div",{className:"ao-modal-overlay",onClick:()=>o(null),children:n.jsxs("div",{className:"ao-modal",onClick:x=>x.stopPropagation(),children:[n.jsxs("div",{className:"ao-modal-header",children:[n.jsxs("h3",{children:[" #",l.id]}),n.jsx("button",{className:"ao-modal-close",onClick:()=>o(null),children:""})]}),n.jsxs("div",{className:"ao-modal-body",children:[n.jsxs("div",{className:"ao-detail-grid",children:[n.jsxs("div",{className:"ao-detail-row",children:[n.jsx("span",{className:"ao-detail-label",children:""}),n.jsx(sn,{variant:io[l.status]||"neutral",children:lo[l.status]||l.status})]}),n.jsxs("div",{className:"ao-detail-row",children:[n.jsx("span",{className:"ao-detail-label",children:""}),n.jsx("span",{children:oo(l.created_at)})]}),n.jsxs("div",{className:"ao-detail-row",children:[n.jsx("span",{className:"ao-detail-label",children:""}),n.jsx("span",{children:l.seller_name})]}),n.jsxs("div",{className:"ao-detail-row",children:[n.jsx("span",{className:"ao-detail-label",children:""}),n.jsxs("span",{children:[l.buyer_fio||`#${l.buyer_id}`," ",l.buyer_phone&&`(${l.buyer_phone})`]})]}),n.jsxs("div",{className:"ao-detail-row",children:[n.jsx("span",{className:"ao-detail-label",children:""}),n.jsx("span",{className:"ao-detail-price",children:Or(l.total_price)})]}),l.original_price&&l.original_price!==l.total_price&&n.jsxs("div",{className:"ao-detail-row",children:[n.jsx("span",{className:"ao-detail-label",children:" "}),n.jsx("span",{className:"ao-detail-original",children:Or(l.original_price)})]}),l.points_discount>0&&n.jsxs("div",{className:"ao-detail-row",children:[n.jsx("span",{className:"ao-detail-label",children:" "}),n.jsxs("span",{children:["-",Or(l.points_discount)]})]}),n.jsxs("div",{className:"ao-detail-row",children:[n.jsx("span",{className:"ao-detail-label",children:" "}),n.jsx("span",{children:l.delivery_type||""})]}),l.address&&n.jsxs("div",{className:"ao-detail-row",children:[n.jsx("span",{className:"ao-detail-label",children:""}),n.jsx("span",{children:l.address})]}),l.comment&&n.jsxs("div",{className:"ao-detail-row",children:[n.jsx("span",{className:"ao-detail-label",children:""}),n.jsx("span",{children:l.comment})]}),l.is_preorder&&l.preorder_delivery_date&&n.jsxs("div",{className:"ao-detail-row",children:[n.jsx("span",{className:"ao-detail-label",children:" "}),n.jsx("span",{children:l.preorder_delivery_date})]}),l.completed_at&&n.jsxs("div",{className:"ao-detail-row",children:[n.jsx("span",{className:"ao-detail-label",children:""}),n.jsx("span",{children:oo(l.completed_at)})]})]}),n.jsxs("div",{className:"ao-detail-items",children:[n.jsx("div",{className:"ao-detail-label",children:""}),n.jsx("pre",{className:"ao-items-pre",children:l.items_info})]})]})]})})]})}function dp(e){return`${e.toLocaleString("ru-RU")} `}function pp(e){return e?new Date(e).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"2-digit"}):""}function Ab(){const[e,t]=u.useState(null),[s,r]=u.useState([]),[a,i]=u.useState(!0),[l,o]=u.useState(""),[c,d]=u.useState(""),[h,g]=u.useState(1),m=u.useCallback(async()=>{i(!0);try{const _={page:h,per_page:30};l&&(_.city_id=Number(l)),c&&(_.min_orders=Number(c));const j=await Sj(_);t(j)}catch{t(null)}finally{i(!1)}},[l,c,h]);return u.useEffect(()=>{m()},[m]),u.useEffect(()=>{rf().then(r).catch(()=>r([]))},[]),n.jsxs("div",{className:"admin-customers",children:[n.jsx(tt,{title:"",subtitle:"  "}),e&&n.jsxs("div",{className:"ac-summary-grid",children:[n.jsxs("div",{className:"ac-summary-card",children:[n.jsx("div",{className:"ac-summary-label",children:" "}),n.jsx("div",{className:"ac-summary-value",children:e.summary.total_buyers.toLocaleString("ru")})]}),n.jsxs("div",{className:"ac-summary-card",children:[n.jsx("div",{className:"ac-summary-label",children:" "}),n.jsx("div",{className:"ac-summary-value",children:e.summary.active_buyers.toLocaleString("ru")})]}),n.jsxs("div",{className:"ac-summary-card",children:[n.jsx("div",{className:"ac-summary-label",children:" "}),n.jsx("div",{className:"ac-summary-value",children:e.summary.new_today})]}),n.jsxs("div",{className:"ac-summary-card ac-summary-card--accent",children:[n.jsx("div",{className:"ac-summary-label",children:" LTV"}),n.jsx("div",{className:"ac-summary-value",children:dp(e.summary.avg_ltv)})]})]}),e&&e.city_distribution.length>0&&n.jsxs("div",{className:"ac-city-bar",children:[n.jsx("div",{className:"ac-city-title",children:""}),n.jsx("div",{className:"ac-city-items",children:e.city_distribution.map(_=>n.jsxs("div",{className:"ac-city-item",children:[n.jsx("span",{className:"ac-city-name",children:_.city}),n.jsx("div",{className:"ac-city-bar-bg",children:n.jsx("div",{className:"ac-city-bar-fill",style:{width:`${Math.round(_.count/(e.summary.total_buyers||1)*100)}%`}})}),n.jsx("span",{className:"ac-city-count",children:_.count})]},_.city))})]}),n.jsxs("div",{className:"ac-filters",children:[n.jsx(gf,{size:16,className:"ac-filter-icon"}),n.jsxs("select",{value:l,onChange:_=>{o(_.target.value),g(1)},className:"ac-select",children:[n.jsx("option",{value:"",children:" "}),s.map(_=>n.jsx("option",{value:_.id,children:_.name},_.id))]}),n.jsx("input",{type:"number",placeholder:". ",className:"ac-input",value:c,onChange:_=>{d(_.target.value),g(1)},min:"0"})]}),a?n.jsx("div",{className:"ac-loading",children:n.jsx("div",{className:"loader"})}):!e||e.customers.length===0?n.jsx("div",{className:"ac-empty",children:"   "}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"ac-table-wrap",children:n.jsxs("table",{className:"ac-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:""}),n.jsx("th",{children:""}),n.jsx("th",{children:""}),n.jsx("th",{children:""}),n.jsx("th",{children:""}),n.jsx("th",{children:" "}),n.jsx("th",{children:""})]})}),n.jsx("tbody",{children:e.customers.map(_=>n.jsxs("tr",{children:[n.jsx("td",{className:"ac-cell-name",children:_.fio||_.username||`#${_.tg_id}`}),n.jsx("td",{className:"ac-cell-phone",children:_.phone||""}),n.jsx("td",{className:"ac-cell-city",children:_.city||""}),n.jsx("td",{className:"ac-cell-num",children:_.orders_count}),n.jsx("td",{className:"ac-cell-num ac-cell-spent",children:dp(_.total_spent)}),n.jsx("td",{className:"ac-cell-date",children:pp(_.last_order_at)}),n.jsx("td",{className:"ac-cell-date",children:pp(_.registered_at)})]},_.tg_id))})]})}),e.pages>1&&n.jsxs("div",{className:"ac-pagination",children:[n.jsx("button",{disabled:h<=1,onClick:()=>g(h-1),className:"ac-page-btn",children:n.jsx(bu,{size:16})}),n.jsxs("span",{className:"ac-page-info",children:[h,"  ",e.pages]}),n.jsx("button",{disabled:h>=e.pages,onClick:()=>g(h+1),className:"ac-page-btn",children:n.jsx(xr,{size:16})})]})]})]})}function as(e){return`${e.toLocaleString("ru-RU")} `}function Ms(e){return e.toISOString().slice(0,10)}function mp(e,t){return t?Math.round((e-t)/t*100):e>0?100:0}function Lb(){const[e,t]=u.useState(null),[s,r]=u.useState(!0),[a,i]=u.useState("30d"),[l,o]=u.useState("day"),[c,d]=u.useState(()=>{const f=new Date;return f.setDate(f.getDate()-29),Ms(f)}),[h,g]=u.useState(()=>Ms(new Date)),m=u.useCallback(async()=>{r(!0);try{let f=c,p=h;if(a!=="custom"){p=Ms(new Date);const M=new Date;a==="7d"?M.setDate(M.getDate()-6):a==="30d"?M.setDate(M.getDate()-29):M.setDate(M.getDate()-89),f=Ms(M)}const x=await uf({date_from:f,date_to:p,group_by:l});t(x)}catch{t(null)}finally{r(!1)}},[a,l,c,h]);u.useEffect(()=>{m()},[m]);const _=f=>{if(i(f),f!=="custom"){g(Ms(new Date));const v=new Date;f==="7d"?v.setDate(v.getDate()-6):f==="30d"?v.setDate(v.getDate()-29):v.setDate(v.getDate()-89),d(Ms(v))}},j=e?mp(e.period.revenue,e.previous_period.revenue):0,S=e?mp(e.period.orders,e.previous_period.orders):0,N=(e==null?void 0:e.series.map(f=>({date:f.period,revenue:f.revenue,orders:f.orders})))||[];return n.jsxs("div",{className:"admin-finance",children:[n.jsx(tt,{title:"",subtitle:" "}),n.jsxs("div",{className:"af-controls",children:[n.jsx("div",{className:"af-presets",children:["7d","30d","90d","custom"].map(f=>n.jsx("button",{className:`af-preset-btn ${a===f?"af-preset-btn--active":""}`,onClick:()=>_(f),children:f==="7d"?"7 ":f==="30d"?"30 ":f==="90d"?"90 ":""},f))}),a==="custom"&&n.jsxs("div",{className:"af-custom-range",children:[n.jsx("input",{type:"date",className:"af-input",value:c,onChange:f=>d(f.target.value)}),n.jsx("span",{className:"af-sep",children:""}),n.jsx("input",{type:"date",className:"af-input",value:h,onChange:f=>g(f.target.value)}),n.jsx("button",{className:"af-apply-btn",onClick:m,children:""})]}),n.jsxs("div",{className:"af-group-by",children:[n.jsx("span",{className:"af-group-label",children:":"}),["day","week","month"].map(f=>n.jsx("button",{className:`af-group-btn ${l===f?"af-group-btn--active":""}`,onClick:()=>o(f),children:f==="day"?"":f==="week"?"":""},f))]})]}),s?n.jsx("div",{className:"af-loading",children:n.jsx("div",{className:"loader"})}):e?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"af-kpi-grid",children:[n.jsxs("div",{className:"af-kpi",children:[n.jsxs("div",{className:"af-kpi-header",children:[n.jsx("span",{className:"af-kpi-label",children:""}),n.jsxs("span",{className:`af-trend ${j>=0?"af-trend--up":"af-trend--down"}`,children:[j>=0?n.jsx(dr,{size:12}):n.jsx(Hi,{size:12}),j>=0?"+":"",j,"%"]})]}),n.jsx("div",{className:"af-kpi-value",children:as(e.period.revenue)}),n.jsxs("div",{className:"af-kpi-prev",children:[". : ",as(e.previous_period.revenue)]})]}),n.jsxs("div",{className:"af-kpi af-kpi--accent",children:[n.jsxs("div",{className:"af-kpi-header",children:[n.jsx("span",{className:"af-kpi-label",children:"  (18%)"}),n.jsx(ff,{size:14})]}),n.jsx("div",{className:"af-kpi-value",children:as(e.period.profit)}),n.jsxs("div",{className:"af-kpi-prev",children:[". : ",as(e.previous_period.profit)]})]}),n.jsxs("div",{className:"af-kpi",children:[n.jsxs("div",{className:"af-kpi-header",children:[n.jsx("span",{className:"af-kpi-label",children:""}),n.jsxs("span",{className:`af-trend ${S>=0?"af-trend--up":"af-trend--down"}`,children:[S>=0?n.jsx(dr,{size:12}):n.jsx(Hi,{size:12}),S>=0?"+":"",S,"%"]})]}),n.jsx("div",{className:"af-kpi-value",children:e.period.orders.toLocaleString("ru")}),n.jsxs("div",{className:"af-kpi-prev",children:[". : ",e.previous_period.orders.toLocaleString("ru")]})]}),n.jsxs("div",{className:"af-kpi",children:[n.jsx("div",{className:"af-kpi-header",children:n.jsx("span",{className:"af-kpi-label",children:" "})}),n.jsx("div",{className:"af-kpi-value",children:as(e.period.avg_check||0)})]})]}),n.jsxs("div",{className:"af-chart-card",children:[n.jsx("h3",{className:"af-chart-title",children:" "}),n.jsx(gl,{data:N})]}),e.by_seller.length>0&&n.jsxs("div",{className:"af-seller-card",children:[n.jsx("h3",{className:"af-seller-title",children:"  "}),n.jsx("div",{className:"af-seller-table-wrap",children:n.jsxs("table",{className:"af-seller-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:""}),n.jsx("th",{children:""}),n.jsx("th",{children:""}),n.jsx("th",{children:""}),n.jsx("th",{children:" 18%"}),n.jsx("th",{children:""})]})}),n.jsx("tbody",{children:e.by_seller.map(f=>n.jsxs("tr",{children:[n.jsx("td",{className:"af-cell-name",children:f.shop_name}),n.jsx("td",{children:n.jsx("span",{className:`af-plan-badge af-plan-badge--${f.plan}`,children:f.plan==="free"?"Free":f.plan==="pro"?"Pro":"Premium"})}),n.jsx("td",{className:"af-cell-num",children:f.orders}),n.jsx("td",{className:"af-cell-num",children:as(f.revenue)}),n.jsx("td",{className:"af-cell-num af-cell-commission",children:as(f.commission)}),n.jsxs("td",{className:"af-cell-share",children:[n.jsx("div",{className:"af-share-bar",children:n.jsx("div",{className:"af-share-fill",style:{width:`${Math.min(f.share_pct,100)}%`}})}),n.jsxs("span",{children:[f.share_pct,"%"]})]})]},f.seller_id))})]})})]})]}):n.jsx("div",{className:"af-empty",children:"   "})]})}let Af=null;function Rb(e){Af=e}function ks(){return Af??""}function ku(){return sessionStorage.getItem("seller_token")}async function ue(e,t={}){const s=`${ks()}${e}`,r=ku(),a={"Content-Type":"application/json",...t.headers};r&&(a["X-Seller-Token"]=r);const i=await fetch(s,{...t,headers:a});if(!i.ok){const l=await i.json().catch(()=>({detail:i.statusText}));throw new Error(l.detail||`HTTP ${i.status}`)}return i.json()}function pc(e){if(e==null||String(e).trim()==="")return null;const t=String(e).trim();if(t.startsWith("http://")||t.startsWith("https://"))return t;const s=t.startsWith("/")?t:`/${t}`;if(!s.startsWith("/static/"))return null;const r=(ks()||"").replace(/\/$/,"");return r?`${r}${s}`:s}async function Cu(){return ue("/seller-web/me")}async function Ob(){return ue("/seller-web/dashboard/alerts")}async function Qi(e){return ue("/seller-web/me",{method:"PUT",body:JSON.stringify(e)})}async function hi(e){const t=new URLSearchParams;e!=null&&e.status&&t.set("status",e.status),e!=null&&e.date_from&&t.set("date_from",e.date_from),e!=null&&e.date_to&&t.set("date_to",e.date_to),(e==null?void 0:e.preorder)!==void 0&&t.set("preorder",String(e.preorder));const s=t.toString()?`?${t.toString()}`:"";return ue(`/seller-web/orders${s}`)}async function Mb(e){return ue(`/seller-web/orders/${e}`)}async function Db(e){return ue(`/seller-web/orders/${e}/accept`,{method:"POST"})}async function $b(e){return ue(`/seller-web/orders/${e}/reject`,{method:"POST"})}async function Ib(e,t){return ue(`/seller-web/orders/${e}/status?status=${encodeURIComponent(t)}`,{method:"PUT"})}async function zb(e,t){return ue(`/seller-web/orders/${e}/price?new_price=${t}`,{method:"PUT"})}async function mc(e){const t=new URLSearchParams;e!=null&&e.period&&t.set("period",e.period),e!=null&&e.date_from&&t.set("date_from",e.date_from),e!=null&&e.date_to&&t.set("date_to",e.date_to);const s=t.toString(),r=s?`?${s}`:"";return ue(`/seller-web/stats${r}`)}async function Fb(e){const t=new URLSearchParams;e!=null&&e.period&&t.set("period",e.period),e!=null&&e.date_from&&t.set("date_from",e.date_from),e!=null&&e.date_to&&t.set("date_to",e.date_to);const s=t.toString(),r=s?`?${s}`:"";return ue(`/seller-web/stats/customers${r}`)}async function Wb(e){const t=ku();if(!t)throw new Error(" ");const s=new URLSearchParams;e!=null&&e.period&&s.set("period",e.period),e!=null&&e.date_from&&s.set("date_from",e.date_from),e!=null&&e.date_to&&s.set("date_to",e.date_to);const r=s.toString(),a=r?`?${r}`:"",i=await fetch(`${ks()}/seller-web/stats/export${a}`,{headers:{"X-Seller-Token":t}});if(!i.ok)throw new Error(" ");return i.blob()}async function Ub(e){const t=new URLSearchParams;(e==null?void 0:e.preorder)!==void 0&&t.set("preorder",String(e.preorder));const s=t.toString()?`?${t.toString()}`:"";return ue(`/seller-web/products${s}`)}async function Lf(e){const t=sessionStorage.getItem("seller_token"),s=new FormData;s.append("file",e);const r=await fetch(`${ks()}/seller-web/upload-photo`,{method:"POST",headers:t?{"X-Seller-Token":t}:{},body:s});if(!r.ok){const a=await r.json().catch(()=>({detail:r.statusText}));throw new Error(a.detail||`HTTP ${r.status}`)}return r.json()}function Bb(e){if(e==null||String(e).trim()==="")return null;const t=String(e).trim();if(t.startsWith("http://")||t.startsWith("https://"))return t;const s=t.startsWith("/")?t:`/${t}`;if(!s.startsWith("/static/"))return null;const r=(ks()||"").replace(/\/$/,"");return r?`${r}${s}`:s}async function qb(e){const t=sessionStorage.getItem("seller_token"),s=new FormData;s.append("file",e);const r=await fetch(`${ks()}/seller-web/upload-banner`,{method:"POST",headers:t?{"X-Seller-Token":t}:{},body:s});if(!r.ok){const a=await r.json().catch(()=>({detail:r.statusText}));throw new Error(a.detail||`HTTP ${r.status}`)}return r.json()}async function Vb(e){return ue("/seller-web/products",{method:"POST",body:JSON.stringify(e)})}async function Rf(e,t){return ue(`/seller-web/products/${e}`,{method:"PUT",body:JSON.stringify(t)})}async function Hb(e){return ue(`/seller-web/products/${e}`,{method:"DELETE"})}async function Qb(e){return ue(`/seller-web/products/${e}/recalculate`,{method:"POST"})}async function Gb(e){return ue(`/seller-web/limits?max_orders=${e}`,{method:"PUT"})}async function Yb(e){return ue(`/seller-web/default-limit?default_daily_limit=${e}`,{method:"PUT"})}async function Kb(){return ue("/seller-web/close-for-today",{method:"POST"})}async function hp(e){return ue("/seller-web/weekly-schedule",{method:"PUT",body:JSON.stringify({schedule:e})})}async function fp(e){return ue("/seller-web/working-hours",{method:"PUT",body:JSON.stringify({working_hours:e})})}async function Jb(e){return ue("/seller-web/security/change-credentials",{method:"PUT",body:JSON.stringify(e)})}async function Xb(){return ue("/seller-web/loyalty/settings")}async function Zb(e){return ue("/seller-web/loyalty/settings",{method:"PUT",body:JSON.stringify(e)})}async function e_(){return ue("/seller-web/customers/tags")}async function t_(){return ue("/seller-web/customers/all")}async function n_(e){return ue("/seller-web/customers",{method:"POST",body:JSON.stringify(e)})}async function s_(e){return ue(`/seller-web/customers/${e}`)}async function r_(e,t){return ue(`/seller-web/customers/${e}/sales`,{method:"POST",body:JSON.stringify({amount:t})})}async function a_(e){return ue(`/seller-web/customers/${e}/orders`)}async function i_(e,t){return ue(`/seller-web/customers/${e}/deduct`,{method:"POST",body:JSON.stringify({points:t})})}async function l_(e,t){return ue(`/seller-web/customers/${e}`,{method:"PATCH",body:JSON.stringify(t)})}async function Of(e,t){return ue(`/seller-web/customers/${e}/events`,{method:"POST",body:JSON.stringify(t)})}async function o_(e,t,s){return ue(`/seller-web/customers/${e}/events/${t}`,{method:"PUT",body:JSON.stringify(s)})}async function c_(e,t){return ue(`/seller-web/customers/${e}/events/${t}`,{method:"DELETE"})}async function u_(e=7){return ue(`/seller-web/dashboard/upcoming-events?days=${e}`)}async function d_(){const e=ku();if(!e)throw new Error(" ");const t=await fetch(`${ks()}/seller-web/customers/export`,{headers:{"X-Seller-Token":e}});if(!t.ok)throw new Error(" ");return t.blob()}async function p_(){return ue("/seller-web/flowers")}async function m_(e){return ue("/seller-web/flowers",{method:"POST",body:JSON.stringify(e)})}async function h_(e){return ue(`/seller-web/flowers/${e}`,{method:"DELETE"})}async function Mf(){return ue("/seller-web/receptions")}async function f_(e){return ue("/seller-web/receptions",{method:"POST",body:JSON.stringify(e)})}async function v_(e,t){return ue(`/seller-web/receptions/${e}`,{method:"PUT",body:JSON.stringify(t)})}async function g_(e){return ue(`/seller-web/receptions/${e}`)}async function x_(e,t){return ue(`/seller-web/receptions/${e}/items`,{method:"POST",body:JSON.stringify(t)})}async function y_(e,t){return ue(`/seller-web/receptions/items/${e}`,{method:"PUT",body:JSON.stringify(t)})}async function j_(e){return ue(`/seller-web/receptions/items/${e}`,{method:"DELETE"})}async function b_(e,t){return ue(`/seller-web/receptions/items/${e}/write-off`,{method:"POST",body:JSON.stringify(t)})}async function __(e,t){const s=new URLSearchParams;e&&s.set("date_from",e),t&&s.set("date_to",t);const r=s.toString()?`?${s.toString()}`:"";return ue(`/seller-web/write-offs/stats${r}`)}async function N_(e){return ue(`/seller-web/receptions/${e}/inventory`)}async function w_(e,t){return ue(`/seller-web/receptions/${e}/inventory/check`,{method:"POST",body:JSON.stringify(t)})}async function S_(e,t){return ue(`/seller-web/receptions/${e}/inventory/apply`,{method:"POST",body:JSON.stringify(t)})}async function Df(){return ue("/seller-web/inventory/all")}async function k_(e){return ue("/seller-web/inventory/all/check",{method:"POST",body:JSON.stringify(e)})}async function C_(e){return ue("/seller-web/inventory/all/apply",{method:"POST",body:JSON.stringify(e)})}async function $f(){return ue("/seller-web/bouquets")}async function E_(e){return ue("/seller-web/bouquets",{method:"POST",body:JSON.stringify(e)})}async function P_(e,t){return ue(`/seller-web/bouquets/${e}`,{method:"PUT",body:JSON.stringify(t)})}async function T_(e){return ue(`/seller-web/bouquets/${e}`,{method:"DELETE"})}async function A_(){return ue("/seller-web/subscribers")}async function L_(){return ue("/seller-web/subscribers/count")}async function R_(e){return ue(`/seller-web/preorder-summary?date=${encodeURIComponent(e)}`)}async function O_(e){const t=new URLSearchParams;e!=null&&e.period&&t.set("period",e.period),e!=null&&e.date_from&&t.set("date_from",e.date_from),e!=null&&e.date_to&&t.set("date_to",e.date_to);const s=t.toString(),r=s?`?${s}`:"";return ue(`/seller-web/preorder-analytics${r}`)}function M_({data:e,width:t=200,height:s=48}){if(e.length<2)return null;const r=2,a=Math.max(...e.map(h=>h.revenue),1),i=Math.min(...e.map(h=>h.revenue),0),l=a-i||1,o=e.map((h,g)=>{const m=r+g/(e.length-1)*(t-r*2),_=r+(1-(h.revenue-i)/l)*(s-r*2);return{x:m,y:_}}),c=o.map((h,g)=>`${g===0?"M":"L"} ${h.x} ${h.y}`).join(" "),d=`${c} L ${o[o.length-1].x} ${s} L ${o[0].x} ${s} Z`;return n.jsxs("svg",{width:t,height:s,viewBox:`0 0 ${t} ${s}`,className:"mini-sparkline",children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"sparkGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"0%",stopColor:"rgba(123, 142, 255, 0.4)"}),n.jsx("stop",{offset:"100%",stopColor:"rgba(123, 142, 255, 0.02)"})]})}),n.jsx("path",{d,fill:"url(#sparkGrad)"}),n.jsx("path",{d:c,fill:"none",stroke:"var(--accent, #7b8eff)",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})]})}const D_=45*1e3,$_="flurai",I_=new Intl.NumberFormat("ru-RU",{maximumFractionDigits:0});function co(e){return`${I_.format(e)} `}function vp({current:e,previous:t}){if(t==null||t===0)return null;const s=(e-t)/t*100,r=Math.abs(Math.round(s));if(r===0)return null;const a=s>0?"up":"down",i=s>0?"":"";return n.jsxs("span",{className:`trend-badge trend-badge--${a}`,children:[i," ",r,"%"]})}function z_(){var E,W,z,A,G;const[e,t]=u.useState(null),[s,r]=u.useState(null),[a,i]=u.useState(null),[l,o]=u.useState(0),[c,d]=u.useState(0),[h,g]=u.useState(null),[m,_]=u.useState(0),[j,S]=u.useState([]),[N,f]=u.useState(!0),p=u.useRef(null);if(u.useEffect(()=>{(async()=>{try{const[V,Y,ne,J,D,P,w,T]=await Promise.all([Cu(),mc(),mc({period:"7d"}),hi({status:"pending"}),hi({status:"accepted,assembling,in_transit"}),Ob(),L_().catch(()=>({count:0})),u_(14).catch(()=>[])]);t(V),r(Y),i(ne);const B=(J==null?void 0:J.length)??0;o(B),p.current=B,d((D==null?void 0:D.length)??0),g(P),_(w.count),S(T)}catch{t(null),r(null),i(null),g(null)}finally{f(!1)}})()},[]),u.useEffect(()=>{typeof window>"u"||!("Notification"in window)||Notification.permission==="default"&&Notification.requestPermission().catch(()=>{})},[]),u.useEffect(()=>{const V=setInterval(async()=>{try{const Y=await hi({status:"pending"}),ne=(Y==null?void 0:Y.length)??0,J=p.current;if(document.visibilityState==="hidden"&&J!==null&&ne>J&&Notification.permission==="granted"){const P=ne-J===1?"   ":`   : ${ne-J}`;new Notification($_,{body:P})}p.current=ne,o(ne)}catch{}},D_);return()=>clearInterval(V)},[]),N)return n.jsx("div",{className:"dashboard-loading",children:n.jsx("div",{className:"loader"})});const v=(((E=h==null?void 0:h.low_stock_bouquets)==null?void 0:E.length)??0)+(((W=h==null?void 0:h.expiring_items)==null?void 0:W.length)??0)>0,x=(s==null?void 0:s.commission_rate)??18,C=(a==null?void 0:a.total_revenue)??0,M=(a==null?void 0:a.net_revenue)??0,O=((z=a==null?void 0:a.daily_sales)==null?void 0:z.map(H=>({date:H.date,revenue:H.revenue})))??[];return n.jsxs("div",{className:"dashboard",children:[n.jsx(tt,{title:"",subtitle:(e==null?void 0:e.shop_name)||" "}),n.jsxs("div",{className:"dashboard-hero-row",children:[n.jsxs("div",{className:"dashboard-hero-card dashboard-hero-card--accent",children:[n.jsxs("div",{className:"dashboard-hero-content",children:[n.jsx("span",{className:"dashboard-hero-label",children:"  7 "}),n.jsx("span",{className:"dashboard-hero-value",children:co(C)}),n.jsx(vp,{current:C,previous:a==null?void 0:a.previous_period_revenue})]}),O.length>=2&&n.jsx(M_,{data:O,width:160,height:48})]}),n.jsxs("div",{className:"dashboard-hero-card",children:[n.jsxs("div",{className:"dashboard-hero-content",children:[n.jsxs("span",{className:"dashboard-hero-label",children:["  (",x,"%)"]}),n.jsx("span",{className:"dashboard-hero-value",children:co(M)})]}),n.jsxs("div",{className:"dashboard-hero-secondary",children:[n.jsxs("span",{className:"dashboard-hero-orders",children:[(a==null?void 0:a.total_completed_orders)??0," ",F_((a==null?void 0:a.total_completed_orders)??0)]}),n.jsx(vp,{current:(a==null?void 0:a.total_completed_orders)??0,previous:a==null?void 0:a.previous_period_orders})]})]})]}),v&&n.jsxs(hn,{className:"dashboard-alerts-card",children:[n.jsxs("div",{className:"dashboard-alerts-header",children:[n.jsx(uc,{size:18}),n.jsx("h3",{children:""})]}),(A=h==null?void 0:h.low_stock_bouquets)!=null&&A.length?n.jsxs("p",{className:"dashboard-alert-text",children:[n.jsx(sn,{variant:"warning",size:"sm",children:" "})," ",h.low_stock_bouquets.map(H=>n.jsxs(Xe,{to:"/catalog?tab=bouquets",className:"dashboard-alert-link",children:[H.name," ( : ",H.can_assemble_count,")"]},H.id)).reduce((H,V,Y)=>Y===0?[V]:[...H,", ",V],[])]}):null,(G=h==null?void 0:h.expiring_items)!=null&&G.length?n.jsxs("p",{className:"dashboard-alert-text",children:[n.jsx(sn,{variant:"danger",size:"sm",children:" "})," ",h.expiring_items.slice(0,5).map((H,V)=>n.jsxs("span",{children:[H.flower_name,"  ",H.reception_name," (",H.days_left," .)"]},V)).reduce((H,V,Y)=>Y===0?[V]:[...H,", ",V],[])," ",n.jsx(Xe,{to:"/stock?tab=receptions",className:"dashboard-alert-link",children:" "})]}):null]}),j.length>0&&n.jsxs(hn,{className:"dashboard-events-card",children:[n.jsx("h3",{className:"dashboard-section-title",children:"  "}),n.jsx("div",{className:"dashboard-events-list",children:j.map((H,V)=>n.jsxs(Xe,{to:`/customers/${H.customer_id}`,className:"dashboard-event-row",children:[n.jsx("span",{className:"dashboard-event-icon",children:H.type==="birthday"?"":""}),n.jsxs("span",{className:"dashboard-event-body",children:[n.jsx("strong",{children:H.customer_name}),"  ",H.title]}),H.days_until===0&&n.jsx(sn,{variant:"danger",size:"sm",children:""}),H.days_until===1&&n.jsx(sn,{variant:"warning",size:"sm",children:""}),H.days_until>1&&n.jsxs(sn,{variant:"neutral",size:"sm",children:[" ",H.days_until," ."]})]},V))})]}),n.jsxs("div",{className:"dashboard-quick-actions",children:[n.jsxs(Xe,{to:"/stock?tab=receptions",className:"btn btn-primary",children:[n.jsx(_0,{size:16})," "]}),n.jsxs(Xe,{to:"/customers",className:"btn btn-secondary",children:[n.jsx(ba,{size:16})," "]}),n.jsxs(Xe,{to:"/catalog",className:"btn btn-secondary",children:[n.jsx(Nn,{size:16})," "]}),n.jsxs(Xe,{to:"/stock?tab=inventory",className:"btn btn-secondary",children:[n.jsx(e0,{size:16})," "]})]}),n.jsxs("div",{className:"dashboard-stats-grid",children:[n.jsx(Vt,{label:"  ",value:l,link:{to:"/orders?tab=pending",label:""}}),n.jsx(Vt,{label:" ",value:c,link:{to:"/orders?tab=active",label:""}}),n.jsx(Vt,{label:" ( )",value:(s==null?void 0:s.total_completed_orders)??0}),n.jsx(Vt,{label:" ( )",value:co((s==null?void 0:s.total_revenue)??0)}),e&&n.jsx(Vt,{label:"  / ",value:e.limit_set_for_today?`${e.orders_used_today??0} / ${e.max_orders??0}`:" "}),n.jsx(Vt,{label:"",value:m,link:{to:"/customers?tab=subscribers",label:""}})]}),n.jsxs("div",{className:"dashboard-nav-grid",children:[n.jsx(no,{to:"/orders",icon:n.jsx(tr,{size:20}),title:"",description:",    "}),n.jsx(no,{to:"/settings",icon:n.jsx(wu,{size:20}),title:" ",description:", , "}),n.jsx(no,{to:"/analytics",icon:n.jsx(hl,{size:20}),title:" ",description:"   "})]})]})}function F_(e){const t=Math.abs(e)%100,s=t%10;return t>10&&t<20?"":s>1&&s<5?"":s===1?"":""}const W_={pending:"",accepted:"",assembling:"",in_transit:" ",done:"",completed:"",rejected:"",cancelled:""};function U_(e){return e.replace(/\d+:/g,"").replace(/x\s*/g,"  ")}function B_(e){return["done","completed"].includes(e)?"success":["rejected","cancelled"].includes(e)?"danger":e==="pending"?"warning":["accepted","assembling","in_transit"].includes(e)?"info":"neutral"}function q_({type:e}){return e==="delivery"?n.jsx("span",{className:"delivery-badge delivery-badge--delivery",children:" "}):e==="pickup"?n.jsx("span",{className:"delivery-badge delivery-badge--pickup",children:" "}):null}function gp(e){const t=new Date(e),s=new Date,r=new Date(t.getFullYear(),t.getMonth(),t.getDate()),a=new Date(s.getFullYear(),s.getMonth(),s.getDate()),i=r.getTime()-a.getTime(),l=Math.round(i/(1e3*60*60*24));return l<0?{days:l,label:`${Math.abs(l)} . `,className:"waiting-countdown waiting-countdown--overdue"}:l===0?{days:l,label:"    !",className:"waiting-countdown waiting-countdown--today"}:l===1?{days:l,label:"!",className:"waiting-countdown waiting-countdown--tomorrow"}:{days:l,label:` ${l} .`,className:"waiting-countdown"}}function V_(){const e=yt(),t=ns(),[s]=nf(),r=s.get("tab")||"pending",[a,i]=u.useState(()=>r==="active"?"active":r==="history"?"history":r==="preorder"?"preorder":"pending"),[l,o]=u.useState("requests"),[c,d]=u.useState([]),[h,g]=u.useState(!0),[m,_]=u.useState(""),[j,S]=u.useState(""),[N,f]=u.useState(null),[p,v]=u.useState(""),[x,C]=u.useState(""),[M,O]=u.useState(null),[E,W]=u.useState(!1),z=u.useCallback(async()=>{g(!0);try{let w,T,B,q;a==="preorder"?(q=!0,l==="requests"?w="pending":l==="waiting"?w="accepted":w="pending,accepted,assembling,in_transit,done,completed"):a==="pending"?(w="pending",q=!1):a==="active"?w="accepted,assembling,in_transit":(w="done,completed",m&&(T=m),j&&(B=j));const ve=await hi({status:w,date_from:T,date_to:B,preorder:q});d(ve||[])}catch{d([])}finally{g(!1)}},[a,l,m,j]);u.useEffect(()=>{z()},[z]);const A=async w=>{const B=` : ${w.total_price??0} .

  ?     .`;if(await t({message:B}))try{await Db(w.id),z()}catch(q){e.error(q instanceof Error?q.message:"")}},G=async w=>{if(await t({message:" ?"}))try{await $b(w),z()}catch(T){e.error(T instanceof Error?T.message:"")}},H=async(w,T)=>{try{await Ib(w,T),z()}catch(B){e.error(B instanceof Error?B.message:"")}},V=async w=>{const T=parseFloat(p);if(isNaN(T)||T<0){e.warning("  ");return}try{await zb(w,T),f(null),v(""),z()}catch(B){e.error(B instanceof Error?B.message:"")}},Y=w=>{if(!w)return"";try{return new Date(w).toLocaleString("ru")}catch{return w}},ne=async w=>{if(w){W(!0);try{const T=await R_(w);O(T)}catch{O(null)}finally{W(!1)}}},J=a==="preorder"&&l==="requests",D=a==="preorder"&&l==="waiting",P=w=>n.jsxs("div",{className:"order-card card",children:[n.jsxs("div",{className:"order-header",children:[n.jsxs("span",{className:"order-id",children:[" #",w.id]}),n.jsxs("div",{className:"order-header__badges",children:[n.jsx(q_,{type:w.delivery_type}),n.jsx(sn,{variant:B_(w.status),children:W_[w.status]||w.status})]})]}),(w.buyer_fio||w.buyer_phone)&&n.jsxs("div",{className:"order-buyer-info",children:[w.buyer_fio&&n.jsx("span",{children:w.buyer_fio}),w.buyer_phone&&n.jsx("span",{children:w.buyer_phone}),w.customer_id&&n.jsx(Xe,{to:`/customers/${w.customer_id}`,className:"order-buyer-link",children:"  "})]}),n.jsxs("div",{className:"order-data-rows",children:[n.jsx(je,{label:"",value:U_(w.items_info)}),n.jsx(je,{label:"",accent:!0,value:N===w.id?n.jsxs("span",{className:"price-edit",children:[n.jsx("input",{type:"number",value:p,onChange:T=>v(T.target.value),className:"form-input price-edit-input"}),n.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>V(w.id),children:"OK"}),n.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>{f(null),v("")},children:""})]}):n.jsxs(n.Fragment,{children:[w.total_price," ",w.original_price!=null&&Math.abs((w.original_price??0)-(w.total_price??0))>.01&&n.jsxs("span",{className:"original-price",children:[" (: ",w.original_price," )"]}),(a==="pending"||J)&&n.jsx("button",{className:"btn btn-sm btn-secondary price-change-btn",onClick:()=>{f(w.id),v(String(w.total_price??""))},title:"     ",children:" "})]})}),n.jsx(je,{label:"",value:w.delivery_type==="delivery"?"":""}),n.jsx(je,{label:"",value:w.address}),w.is_preorder&&w.preorder_delivery_date&&n.jsx(je,{label:" ",value:n.jsxs(n.Fragment,{children:[new Date(w.preorder_delivery_date).toLocaleDateString("ru-RU"),D&&(()=>{const T=gp(w.preorder_delivery_date);return n.jsxs("span",{className:T.className,children:["  ",T.label]})})()]})}),(w.points_discount??0)>0&&n.jsx(je,{label:" ",value:n.jsxs("span",{className:"points-discount",children:["",w.points_discount,"  (",w.points_used," )"]})}),w.is_preorder&&n.jsx("span",{className:"preorder-label",children:""}),n.jsx(je,{label:"",value:Y(w.created_at),muted:!0})]}),a==="pending"&&n.jsxs("div",{className:"order-actions",children:[n.jsx("button",{className:"btn btn-primary",onClick:()=>A(w),children:" "}),n.jsx("button",{className:"btn btn-secondary",onClick:()=>G(w.id),children:" "})]}),J&&n.jsxs("div",{className:"order-actions",children:[n.jsx("button",{className:"btn btn-primary",onClick:()=>A(w),children:"  "}),n.jsx("button",{className:"btn btn-secondary",onClick:()=>G(w.id),children:" "})]}),D&&w.preorder_delivery_date&&(gp(w.preorder_delivery_date).days<=0?n.jsx("div",{className:"order-actions",children:n.jsx("button",{className:"btn btn-primary",onClick:()=>H(w.id,"assembling"),children:" "})}):null),a==="active"&&w.status==="accepted"&&n.jsxs("div",{className:"order-actions",children:[n.jsx("button",{className:"btn btn-secondary",onClick:()=>H(w.id,"assembling"),children:" "}),n.jsx("button",{className:"btn btn-secondary",onClick:()=>H(w.id,"in_transit"),children:"  "}),n.jsx("button",{className:"btn btn-primary",onClick:()=>H(w.id,"done"),children:" "})]}),a==="active"&&w.status==="assembling"&&n.jsxs("div",{className:"order-actions",children:[n.jsx("button",{className:"btn btn-secondary",onClick:()=>H(w.id,"in_transit"),children:"  "}),n.jsx("button",{className:"btn btn-primary",onClick:()=>H(w.id,"done"),children:" "})]}),a==="active"&&w.status==="in_transit"&&n.jsx("div",{className:"order-actions",children:n.jsx("button",{className:"btn btn-primary",onClick:()=>H(w.id,"done"),children:" "})})]},w.id);return n.jsxs("div",{className:"seller-orders-page",children:[n.jsx(tt,{title:""}),n.jsx(on,{tabs:[{key:"pending",label:"  "},{key:"active",label:" "},{key:"history",label:" "},{key:"preorder",label:""}],activeTab:a,onChange:w=>i(w)}),a==="preorder"&&n.jsx(on,{size:"small",tabs:[{key:"requests",label:""},{key:"waiting",label:""},{key:"dashboard",label:" "}],activeTab:l,onChange:w=>o(w)}),a==="preorder"&&l==="dashboard"&&n.jsxs("div",{className:"card preorder-dashboard-card",children:[n.jsx("h3",{className:"preorder-dashboard-title",children:"    "}),n.jsxs("div",{className:"preorder-dashboard-controls",children:[n.jsx("input",{type:"date",value:x,onChange:w=>C(w.target.value),className:"form-input"}),n.jsx("button",{className:"btn btn-primary btn-sm",disabled:!x||E,onClick:()=>ne(x),children:E?"...":""})]}),M&&n.jsxs("div",{className:"preorder-dashboard-result",children:[n.jsxs("p",{className:"preorder-dashboard-summary",children:[n.jsx("strong",{children:":"})," ",new Date(M.date).toLocaleDateString("ru-RU")," |",n.jsx("strong",{children:":"})," ",M.total_orders," |",n.jsx("strong",{children:":"})," ",M.total_amount.toFixed(0)," "]}),M.items.length>0?n.jsx("div",{className:"table-wrap preorder-dashboard-table",children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:""}),n.jsx("th",{children:"-"}),n.jsx("th",{children:""}),n.jsx("th",{children:""})]})}),n.jsx("tbody",{children:M.items.map(w=>n.jsxs("tr",{children:[n.jsx("td",{children:w.product_name}),n.jsx("td",{children:w.total_quantity}),n.jsx("td",{children:w.orders_count}),n.jsxs("td",{children:[w.total_amount.toFixed(0)," "]})]},w.product_id))})]})}):n.jsx("p",{className:"empty-text",children:"     "})]})]}),a==="pending"&&c.length>0&&n.jsx("p",{className:"orders-hint",children:"     (    ),     ."}),J&&c.length>0&&n.jsx("p",{className:"orders-hint",children:"   .    ."}),D&&c.length>0&&n.jsx("p",{className:"orders-hint",children:"    .          ."}),a==="history"&&n.jsxs("div",{className:"orders-date-filter card",children:[n.jsx(ae,{label:"",children:n.jsx("input",{type:"date",value:m,onChange:w=>_(w.target.value),className:"form-input"})}),n.jsx(ae,{label:"",children:n.jsx("input",{type:"date",value:j,onChange:w=>S(w.target.value),className:"form-input"})})]}),a==="preorder"&&l==="dashboard"?null:h?n.jsx("div",{className:"orders-loading",children:n.jsx("div",{className:"loader"})}):c.length===0?n.jsx(Nt,{title:J?"   ":D?"  ":" ",message:"  ,    "}):n.jsx("div",{className:"orders-list",children:c.map(P)})]})}const H_={pending:"",accepted:"",assembling:"",in_transit:" ",done:"",completed:"",rejected:""};function xp(e){return e.replace(/\d+:/g,"").replace(/x\s*/g,"  ")}function uo(e){if(!e)return"";try{return new Date(e).toLocaleString("ru")}catch{return e}}function Q_(){const{orderId:e}=Jh(),t=ts(),[s,r]=u.useState(null),[a,i]=u.useState(!0);if(u.useEffect(()=>{const o=e?parseInt(e,10):NaN;if(isNaN(o)){i(!1);return}let c=!1;return Mb(o).then(d=>{c||r(d)}).catch(()=>{c||r(null)}).finally(()=>{c||i(!1)}),()=>{c=!0}},[e]),a)return n.jsx("div",{className:"seller-orders-page",children:n.jsx("div",{className:"orders-loading",children:n.jsx("div",{className:"loader"})})});if(!s)return n.jsxs("div",{className:"seller-orders-page",children:[n.jsx("button",{type:"button",className:"back",onClick:()=>t("/orders"),children:"   "}),n.jsx("p",{children:"  ."})]});const l=s.delivery_type==="delivery"?"":"";return n.jsxs("div",{className:"seller-orders-page seller-order-detail",children:[n.jsx("button",{type:"button",className:"back no-print",onClick:()=>t("/orders"),children:"   "}),n.jsxs("div",{className:"order-card card order-detail-card",children:[n.jsxs("div",{className:"order-print-area",children:[n.jsx("div",{className:"print-label-header",children:n.jsxs("span",{className:"print-order-id",children:[" #",s.id]})}),s.address&&n.jsxs("div",{className:"print-address",children:[n.jsx("strong",{children:":"})," ",s.address]}),n.jsxs("div",{className:"print-items",children:[n.jsx("strong",{children:":"})," ",xp(s.items_info)]}),n.jsxs("div",{className:"print-delivery",children:[n.jsx("strong",{children:":"})," ",l]}),n.jsxs("div",{className:"print-meta",children:[n.jsxs("span",{children:[": ",s.total_price," "]}),n.jsxs("span",{children:[": ",uo(s.created_at)]})]}),n.jsx("div",{className:"print-label-footer",children:n.jsxs("span",{className:"print-order-id",children:[" #",s.id]})})]}),n.jsxs("div",{className:"order-header",children:[n.jsxs("span",{className:"order-id",children:[" #",s.id]}),n.jsx("span",{className:`order-status status-${s.status}`,children:H_[s.status]||s.status})]}),n.jsxs("div",{className:"order-body",children:[n.jsx("h3",{children:""}),n.jsxs("p",{children:[n.jsx("strong",{children:":"})," ",s.buyer_fio??""]}),n.jsxs("p",{children:[n.jsx("strong",{children:":"})," ",s.buyer_phone??""]}),s.customer_id!=null&&n.jsx("p",{children:n.jsx(Xe,{to:`/customers/${s.customer_id}`,children:"    "})}),n.jsx("h3",{children:""}),n.jsx("p",{children:xp(s.items_info)}),n.jsxs("p",{children:[n.jsx("strong",{children:":"})," ",s.total_price," "]}),s.original_price!=null&&Math.abs((s.original_price??0)-(s.total_price??0))>.01&&n.jsxs("p",{className:"original-price",children:[": ",s.original_price," "]}),s.is_preorder&&n.jsxs(n.Fragment,{children:[n.jsx("h3",{children:""}),n.jsxs("p",{children:[n.jsx("strong",{children:"  ():"})," ",s.preorder_delivery_date?new Date(s.preorder_delivery_date).toLocaleDateString("ru-RU"):""]})]}),n.jsx("h3",{children:""}),n.jsxs("p",{children:[n.jsx("strong",{children:":"})," ",l]}),s.address&&n.jsxs("p",{children:[n.jsx("strong",{children:":"})," ",s.address]}),n.jsxs("p",{className:"order-date",children:[n.jsx("strong",{children:":"})," ",uo(s.created_at)]}),s.completed_at&&n.jsxs("p",{className:"order-date",children:[n.jsx("strong",{children:":"})," ",uo(s.completed_at)]})]}),n.jsx("div",{className:"order-detail-actions no-print",children:n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>window.print(),children:" / "})})]})]})}var hc=function(e,t){return hc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,r){s.__proto__=r}||function(s,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])},hc(e,t)};function G_(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");hc(e,t);function s(){this.constructor=e}e.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}var ot=function(){return ot=Object.assign||function(t){for(var s,r=1,a=arguments.length;r<a;r++){s=arguments[r];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},ot.apply(this,arguments)};var yp=!1,cs,fc,vc,fi,vi,If,gi,gc,xc,yc,zf,jc,bc,Ff,Wf;function Ct(){if(!yp){yp=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),s=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(jc=/\b(iPhone|iP[ao]d)/.exec(e),bc=/\b(iP[ao]d)/.exec(e),yc=/Android/i.exec(e),Ff=/FBAN\/\w+;/i.exec(e),Wf=/Mobile/i.exec(e),zf=!!/Win64/.exec(e),t){cs=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,cs&&document&&document.documentMode&&(cs=document.documentMode);var r=/(?:Trident\/(\d+.\d+))/.exec(e);If=r?parseFloat(r[1])+4:cs,fc=t[2]?parseFloat(t[2]):NaN,vc=t[3]?parseFloat(t[3]):NaN,fi=t[4]?parseFloat(t[4]):NaN,fi?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),vi=t&&t[1]?parseFloat(t[1]):NaN):vi=NaN}else cs=fc=vc=vi=fi=NaN;if(s){if(s[1]){var a=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);gi=a?parseFloat(a[1].replace("_",".")):!0}else gi=!1;gc=!!s[2],xc=!!s[3]}else gi=gc=xc=!1}}var _c={ie:function(){return Ct()||cs},ieCompatibilityMode:function(){return Ct()||If>cs},ie64:function(){return _c.ie()&&zf},firefox:function(){return Ct()||fc},opera:function(){return Ct()||vc},webkit:function(){return Ct()||fi},safari:function(){return _c.webkit()},chrome:function(){return Ct()||vi},windows:function(){return Ct()||gc},osx:function(){return Ct()||gi},linux:function(){return Ct()||xc},iphone:function(){return Ct()||jc},mobile:function(){return Ct()||jc||bc||yc||Wf},nativeApp:function(){return Ct()||Ff},android:function(){return Ct()||yc},ipad:function(){return Ct()||bc}},Y_=_c,K_=!!(typeof window<"u"&&window.document&&window.document.createElement),J_={canUseDOM:K_},X_=J_,Uf=X_,Bf;Uf.canUseDOM&&(Bf=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function Z_(e,t){if(!Uf.canUseDOM||t&&!("addEventListener"in document))return!1;var s="on"+e,r=s in document;if(!r){var a=document.createElement("div");a.setAttribute(s,"return;"),r=typeof a[s]=="function"}return!r&&Bf&&e==="wheel"&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var eN=Z_,tN=Y_,nN=eN,jp=10,bp=40,_p=800;function qf(e){var t=0,s=0,r=0,a=0;return"detail"in e&&(s=e.detail),"wheelDelta"in e&&(s=-e.wheelDelta/120),"wheelDeltaY"in e&&(s=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=s,s=0),r=t*jp,a=s*jp,"deltaY"in e&&(a=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||a)&&e.deltaMode&&(e.deltaMode==1?(r*=bp,a*=bp):(r*=_p,a*=_p)),r&&!t&&(t=r<1?-1:1),a&&!s&&(s=a<1?-1:1),{spinX:t,spinY:s,pixelX:r,pixelY:a}}qf.getEventType=function(){return tN.firefox()?"DOMMouseScroll":nN("wheel")?"wheel":"mousewheel"};var sN=qf,rN=sN;const aN=Ap(rN);function iN(e,t,s,r,a,i){i===void 0&&(i=0);var l=pr(e,t,i),o=l.width,c=l.height,d=Math.min(o,s),h=Math.min(c,r);return d>h*a?{width:h*a,height:h}:{width:d,height:d/a}}function lN(e){return e.width>e.height?e.width/e.naturalWidth:e.height/e.naturalHeight}function Mr(e,t,s,r,a){a===void 0&&(a=0);var i=pr(t.width,t.height,a),l=i.width,o=i.height;return{x:Np(e.x,l,s.width,r),y:Np(e.y,o,s.height,r)}}function Np(e,t,s,r){var a=t*r/2-s/2;return xl(e,-a,a)}function wp(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function Sp(e,t){return Math.atan2(t.y-e.y,t.x-e.x)*180/Math.PI}function oN(e,t,s,r,a,i,l){i===void 0&&(i=0),l===void 0&&(l=!0);var o=l?cN:uN,c=pr(t.width,t.height,i),d=pr(t.naturalWidth,t.naturalHeight,i),h={x:o(100,((c.width-s.width/a)/2-e.x/a)/c.width*100),y:o(100,((c.height-s.height/a)/2-e.y/a)/c.height*100),width:o(100,s.width/c.width*100/a),height:o(100,s.height/c.height*100/a)},g=Math.round(o(d.width,h.width*d.width/100)),m=Math.round(o(d.height,h.height*d.height/100)),_=d.width>=d.height*r,j=_?{width:Math.round(m*r),height:m}:{width:g,height:Math.round(g/r)},S=ot(ot({},j),{x:Math.round(o(d.width-j.width,h.x*d.width/100)),y:Math.round(o(d.height-j.height,h.y*d.height/100))});return{croppedAreaPercentages:h,croppedAreaPixels:S}}function cN(e,t){return Math.min(e,Math.max(0,t))}function uN(e,t){return t}function dN(e,t,s,r,a,i){var l=pr(t.width,t.height,s),o=xl(r.width/l.width*(100/e.width),a,i),c={x:o*l.width/2-r.width/2-l.width*o*(e.x/100),y:o*l.height/2-r.height/2-l.height*o*(e.y/100)};return{crop:c,zoom:o}}function pN(e,t,s){var r=lN(t);return s.height>s.width?s.height/(e.height*r):s.width/(e.width*r)}function mN(e,t,s,r,a,i){s===void 0&&(s=0);var l=pr(t.naturalWidth,t.naturalHeight,s),o=xl(pN(e,t,r),a,i),c=r.height>r.width?r.height/e.height:r.width/e.width,d={x:((l.width-e.width)/2-e.x)*c,y:((l.height-e.height)/2-e.y)*c};return{crop:d,zoom:o}}function kp(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function hN(e){return e*Math.PI/180}function pr(e,t,s){var r=hN(s);return{width:Math.abs(Math.cos(r)*e)+Math.abs(Math.sin(r)*t),height:Math.abs(Math.sin(r)*e)+Math.abs(Math.cos(r)*t)}}function xl(e,t,s){return Math.min(Math.max(e,t),s)}function Ja(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(function(s){return typeof s=="string"&&s.length>0}).join(" ").trim()}var fN=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,vN=1,gN=3,xN=1,yN=function(e){G_(t,e);function t(){var s=e!==null&&e.apply(this,arguments)||this;return s.cropperRef=u.createRef(),s.imageRef=u.createRef(),s.videoRef=u.createRef(),s.containerPosition={x:0,y:0},s.containerRef=null,s.styleRef=null,s.containerRect=null,s.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},s.dragStartPosition={x:0,y:0},s.dragStartCrop={x:0,y:0},s.gestureZoomStart=0,s.gestureRotationStart=0,s.isTouching=!1,s.lastPinchDistance=0,s.lastPinchRotation=0,s.rafDragTimeout=null,s.rafPinchTimeout=null,s.wheelTimer=null,s.currentDoc=typeof document<"u"?document:null,s.currentWindow=typeof window<"u"?window:null,s.resizeObserver=null,s.previousCropSize=null,s.isInitialized=!1,s.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},s.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!s.containerRef)){var r=!0;s.resizeObserver=new window.ResizeObserver(function(a){if(r){r=!1;return}s.computeSizes()}),s.resizeObserver.observe(s.containerRef)}},s.preventZoomSafari=function(r){return r.preventDefault()},s.cleanEvents=function(){s.currentDoc&&(s.currentDoc.removeEventListener("mousemove",s.onMouseMove),s.currentDoc.removeEventListener("mouseup",s.onDragStopped),s.currentDoc.removeEventListener("touchmove",s.onTouchMove),s.currentDoc.removeEventListener("touchend",s.onDragStopped),s.currentDoc.removeEventListener("gesturechange",s.onGestureChange),s.currentDoc.removeEventListener("gestureend",s.onGestureEnd),s.currentDoc.removeEventListener("scroll",s.onScroll))},s.clearScrollEvent=function(){s.containerRef&&s.containerRef.removeEventListener("wheel",s.onWheel),s.wheelTimer&&clearTimeout(s.wheelTimer)},s.onMediaLoad=function(){var r=s.computeSizes();r&&(s.previousCropSize=r,s.emitCropData(),s.setInitialCrop(r),s.isInitialized=!0),s.props.onMediaLoaded&&s.props.onMediaLoaded(s.mediaSize)},s.setInitialCrop=function(r){if(s.props.initialCroppedAreaPercentages){var a=dN(s.props.initialCroppedAreaPercentages,s.mediaSize,s.props.rotation,r,s.props.minZoom,s.props.maxZoom),i=a.crop,l=a.zoom;s.props.onCropChange(i),s.props.onZoomChange&&s.props.onZoomChange(l)}else if(s.props.initialCroppedAreaPixels){var o=mN(s.props.initialCroppedAreaPixels,s.mediaSize,s.props.rotation,r,s.props.minZoom,s.props.maxZoom),i=o.crop,l=o.zoom;s.props.onCropChange(i),s.props.onZoomChange&&s.props.onZoomChange(l)}},s.computeSizes=function(){var r,a,i,l,o,c,d=s.imageRef.current||s.videoRef.current;if(d&&s.containerRef){s.containerRect=s.containerRef.getBoundingClientRect(),s.saveContainerPosition();var h=s.containerRect.width/s.containerRect.height,g=((r=s.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((a=s.videoRef.current)===null||a===void 0?void 0:a.videoWidth)||0,m=((i=s.imageRef.current)===null||i===void 0?void 0:i.naturalHeight)||((l=s.videoRef.current)===null||l===void 0?void 0:l.videoHeight)||0,_=d.offsetWidth<g||d.offsetHeight<m,j=g/m,S=void 0;if(_)switch(s.state.mediaObjectFit){default:case"contain":S=h>j?{width:s.containerRect.height*j,height:s.containerRect.height}:{width:s.containerRect.width,height:s.containerRect.width/j};break;case"horizontal-cover":S={width:s.containerRect.width,height:s.containerRect.width/j};break;case"vertical-cover":S={width:s.containerRect.height*j,height:s.containerRect.height};break}else S={width:d.offsetWidth,height:d.offsetHeight};s.mediaSize=ot(ot({},S),{naturalWidth:g,naturalHeight:m}),s.props.setMediaSize&&s.props.setMediaSize(s.mediaSize);var N=s.props.cropSize?s.props.cropSize:iN(s.mediaSize.width,s.mediaSize.height,s.containerRect.width,s.containerRect.height,s.props.aspect,s.props.rotation);return(((o=s.state.cropSize)===null||o===void 0?void 0:o.height)!==N.height||((c=s.state.cropSize)===null||c===void 0?void 0:c.width)!==N.width)&&s.props.onCropSizeChange&&s.props.onCropSizeChange(N),s.setState({cropSize:N},s.recomputeCropPosition),s.props.setCropSize&&s.props.setCropSize(N),N}},s.saveContainerPosition=function(){if(s.containerRef){var r=s.containerRef.getBoundingClientRect();s.containerPosition={x:r.left,y:r.top}}},s.onMouseDown=function(r){s.currentDoc&&(r.preventDefault(),s.currentDoc.addEventListener("mousemove",s.onMouseMove),s.currentDoc.addEventListener("mouseup",s.onDragStopped),s.saveContainerPosition(),s.onDragStart(t.getMousePoint(r)))},s.onMouseMove=function(r){return s.onDrag(t.getMousePoint(r))},s.onScroll=function(r){s.currentDoc&&(r.preventDefault(),s.saveContainerPosition())},s.onTouchStart=function(r){s.currentDoc&&(s.isTouching=!0,!(s.props.onTouchRequest&&!s.props.onTouchRequest(r))&&(s.currentDoc.addEventListener("touchmove",s.onTouchMove,{passive:!1}),s.currentDoc.addEventListener("touchend",s.onDragStopped),s.saveContainerPosition(),r.touches.length===2?s.onPinchStart(r):r.touches.length===1&&s.onDragStart(t.getTouchPoint(r.touches[0]))))},s.onTouchMove=function(r){r.preventDefault(),r.touches.length===2?s.onPinchMove(r):r.touches.length===1&&s.onDrag(t.getTouchPoint(r.touches[0]))},s.onGestureStart=function(r){s.currentDoc&&(r.preventDefault(),s.currentDoc.addEventListener("gesturechange",s.onGestureChange),s.currentDoc.addEventListener("gestureend",s.onGestureEnd),s.gestureZoomStart=s.props.zoom,s.gestureRotationStart=s.props.rotation)},s.onGestureChange=function(r){if(r.preventDefault(),!s.isTouching){var a=t.getMousePoint(r),i=s.gestureZoomStart-1+r.scale;if(s.setNewZoom(i,a,{shouldUpdatePosition:!0}),s.props.onRotationChange){var l=s.gestureRotationStart+r.rotation;s.props.onRotationChange(l)}}},s.onGestureEnd=function(r){s.cleanEvents()},s.onDragStart=function(r){var a,i,l=r.x,o=r.y;s.dragStartPosition={x:l,y:o},s.dragStartCrop=ot({},s.props.crop),(i=(a=s.props).onInteractionStart)===null||i===void 0||i.call(a)},s.onDrag=function(r){var a=r.x,i=r.y;s.currentWindow&&(s.rafDragTimeout&&s.currentWindow.cancelAnimationFrame(s.rafDragTimeout),s.rafDragTimeout=s.currentWindow.requestAnimationFrame(function(){if(s.state.cropSize&&!(a===void 0||i===void 0)){var l=a-s.dragStartPosition.x,o=i-s.dragStartPosition.y,c={x:s.dragStartCrop.x+l,y:s.dragStartCrop.y+o},d=s.props.restrictPosition?Mr(c,s.mediaSize,s.state.cropSize,s.props.zoom,s.props.rotation):c;s.props.onCropChange(d)}}))},s.onDragStopped=function(){var r,a;s.isTouching=!1,s.cleanEvents(),s.emitCropData(),(a=(r=s.props).onInteractionEnd)===null||a===void 0||a.call(r)},s.onWheel=function(r){if(s.currentWindow&&!(s.props.onWheelRequest&&!s.props.onWheelRequest(r))){r.preventDefault();var a=t.getMousePoint(r),i=aN(r).pixelY,l=s.props.zoom-i*s.props.zoomSpeed/200;s.setNewZoom(l,a,{shouldUpdatePosition:!0}),s.state.hasWheelJustStarted||s.setState({hasWheelJustStarted:!0},function(){var o,c;return(c=(o=s.props).onInteractionStart)===null||c===void 0?void 0:c.call(o)}),s.wheelTimer&&clearTimeout(s.wheelTimer),s.wheelTimer=s.currentWindow.setTimeout(function(){return s.setState({hasWheelJustStarted:!1},function(){var o,c;return(c=(o=s.props).onInteractionEnd)===null||c===void 0?void 0:c.call(o)})},250)}},s.getPointOnContainer=function(r,a){var i=r.x,l=r.y;if(!s.containerRect)throw new Error("The Cropper is not mounted");return{x:s.containerRect.width/2-(i-a.x),y:s.containerRect.height/2-(l-a.y)}},s.getPointOnMedia=function(r){var a=r.x,i=r.y,l=s.props,o=l.crop,c=l.zoom;return{x:(a+o.x)/c,y:(i+o.y)/c}},s.setNewZoom=function(r,a,i){var l=i===void 0?{}:i,o=l.shouldUpdatePosition,c=o===void 0?!0:o;if(!(!s.state.cropSize||!s.props.onZoomChange)){var d=xl(r,s.props.minZoom,s.props.maxZoom);if(c){var h=s.getPointOnContainer(a,s.containerPosition),g=s.getPointOnMedia(h),m={x:g.x*d-h.x,y:g.y*d-h.y},_=s.props.restrictPosition?Mr(m,s.mediaSize,s.state.cropSize,d,s.props.rotation):m;s.props.onCropChange(_)}s.props.onZoomChange(d)}},s.getCropData=function(){if(!s.state.cropSize)return null;var r=s.props.restrictPosition?Mr(s.props.crop,s.mediaSize,s.state.cropSize,s.props.zoom,s.props.rotation):s.props.crop;return oN(r,s.mediaSize,s.state.cropSize,s.getAspect(),s.props.zoom,s.props.rotation,s.props.restrictPosition)},s.emitCropData=function(){var r=s.getCropData();if(r){var a=r.croppedAreaPercentages,i=r.croppedAreaPixels;s.props.onCropComplete&&s.props.onCropComplete(a,i),s.props.onCropAreaChange&&s.props.onCropAreaChange(a,i)}},s.emitCropAreaChange=function(){var r=s.getCropData();if(r){var a=r.croppedAreaPercentages,i=r.croppedAreaPixels;s.props.onCropAreaChange&&s.props.onCropAreaChange(a,i)}},s.recomputeCropPosition=function(){var r,a;if(s.state.cropSize){var i=s.props.crop;if(s.isInitialized&&(!((r=s.previousCropSize)===null||r===void 0)&&r.width)&&(!((a=s.previousCropSize)===null||a===void 0)&&a.height)){var l=Math.abs(s.previousCropSize.width-s.state.cropSize.width)>1e-6||Math.abs(s.previousCropSize.height-s.state.cropSize.height)>1e-6;if(l){var o=s.state.cropSize.width/s.previousCropSize.width,c=s.state.cropSize.height/s.previousCropSize.height;i={x:s.props.crop.x*o,y:s.props.crop.y*c}}}var d=s.props.restrictPosition?Mr(i,s.mediaSize,s.state.cropSize,s.props.zoom,s.props.rotation):i;s.previousCropSize=s.state.cropSize,s.props.onCropChange(d),s.emitCropData()}},s.onKeyDown=function(r){var a,i,l=s.props,o=l.crop,c=l.onCropChange,d=l.keyboardStep,h=l.zoom,g=l.rotation,m=d;if(s.state.cropSize){r.shiftKey&&(m*=.2);var _=ot({},o);switch(r.key){case"ArrowUp":_.y-=m,r.preventDefault();break;case"ArrowDown":_.y+=m,r.preventDefault();break;case"ArrowLeft":_.x-=m,r.preventDefault();break;case"ArrowRight":_.x+=m,r.preventDefault();break;default:return}s.props.restrictPosition&&(_=Mr(_,s.mediaSize,s.state.cropSize,h,g)),r.repeat||(i=(a=s.props).onInteractionStart)===null||i===void 0||i.call(a),c(_)}},s.onKeyUp=function(r){var a,i;switch(r.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":r.preventDefault();break;default:return}s.emitCropData(),(i=(a=s.props).onInteractionEnd)===null||i===void 0||i.call(a)},s}return t.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=fN,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},t.prototype.componentWillUnmount=function(){var s,r;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(s=this.resizeObserver)===null||s===void 0||s.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((r=this.styleRef.parentNode)===null||r===void 0||r.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},t.prototype.componentDidUpdate=function(s){var r,a,i,l,o,c,d,h,g;s.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):s.aspect!==this.props.aspect?this.computeSizes():s.objectFit!==this.props.objectFit?this.computeSizes():s.zoom!==this.props.zoom?this.recomputeCropPosition():((r=s.cropSize)===null||r===void 0?void 0:r.height)!==((a=this.props.cropSize)===null||a===void 0?void 0:a.height)||((i=s.cropSize)===null||i===void 0?void 0:i.width)!==((l=this.props.cropSize)===null||l===void 0?void 0:l.width)?this.computeSizes():(((o=s.crop)===null||o===void 0?void 0:o.x)!==((c=this.props.crop)===null||c===void 0?void 0:c.x)||((d=s.crop)===null||d===void 0?void 0:d.y)!==((h=this.props.crop)===null||h===void 0?void 0:h.y))&&this.emitCropAreaChange(),s.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),s.video!==this.props.video&&((g=this.videoRef.current)===null||g===void 0||g.load());var m=this.getObjectFit();m!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:m},this.computeSizes)},t.prototype.getAspect=function(){var s=this.props,r=s.cropSize,a=s.aspect;return r?r.width/r.height:a},t.prototype.getObjectFit=function(){var s,r,a,i;if(this.props.objectFit==="cover"){var l=this.imageRef.current||this.videoRef.current;if(l&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var o=this.containerRect.width/this.containerRect.height,c=((s=this.imageRef.current)===null||s===void 0?void 0:s.naturalWidth)||((r=this.videoRef.current)===null||r===void 0?void 0:r.videoWidth)||0,d=((a=this.imageRef.current)===null||a===void 0?void 0:a.naturalHeight)||((i=this.videoRef.current)===null||i===void 0?void 0:i.videoHeight)||0,h=c/d;return h<o?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},t.prototype.onPinchStart=function(s){var r=t.getTouchPoint(s.touches[0]),a=t.getTouchPoint(s.touches[1]);this.lastPinchDistance=wp(r,a),this.lastPinchRotation=Sp(r,a),this.onDragStart(kp(r,a))},t.prototype.onPinchMove=function(s){var r=this;if(!(!this.currentDoc||!this.currentWindow)){var a=t.getTouchPoint(s.touches[0]),i=t.getTouchPoint(s.touches[1]),l=kp(a,i);this.onDrag(l),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var o=wp(a,i),c=r.props.zoom*(o/r.lastPinchDistance);r.setNewZoom(c,l,{shouldUpdatePosition:!1}),r.lastPinchDistance=o;var d=Sp(a,i),h=r.props.rotation+(d-r.lastPinchRotation);r.props.onRotationChange&&r.props.onRotationChange(h),r.lastPinchRotation=d})}},t.prototype.render=function(){var s=this,r,a=this.props,i=a.image,l=a.video,o=a.mediaProps,c=a.cropperProps,d=a.transform,h=a.crop,g=h.x,m=h.y,_=a.rotation,j=a.zoom,S=a.cropShape,N=a.showGrid,f=a.roundCropAreaPixels,p=a.style,v=p.containerStyle,x=p.cropAreaStyle,C=p.mediaStyle,M=a.classes,O=M.containerClassName,E=M.cropAreaClassName,W=M.mediaClassName,z=(r=this.state.mediaObjectFit)!==null&&r!==void 0?r:this.getObjectFit();return u.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(G){return s.containerRef=G},"data-testid":"container",style:v,className:Ja("reactEasyCrop_Container",O)},i?u.createElement("img",ot({alt:"",className:Ja("reactEasyCrop_Image",z==="contain"&&"reactEasyCrop_Contain",z==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",z==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",W)},o,{src:i,ref:this.imageRef,style:ot(ot({},C),{transform:d||"translate(".concat(g,"px, ").concat(m,"px) rotate(").concat(_,"deg) scale(").concat(j,")")}),onLoad:this.onMediaLoad})):l&&u.createElement("video",ot({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:Ja("reactEasyCrop_Video",z==="contain"&&"reactEasyCrop_Contain",z==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",z==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",W)},o,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:ot(ot({},C),{transform:d||"translate(".concat(g,"px, ").concat(m,"px) rotate(").concat(_,"deg) scale(").concat(j,")")}),controls:!1}),(Array.isArray(l)?l:[{src:l}]).map(function(A){return u.createElement("source",ot({key:A.src},A))})),this.state.cropSize&&u.createElement("div",ot({ref:this.cropperRef,style:ot(ot({},x),{width:f?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:f?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:Ja("reactEasyCrop_CropArea",S==="round"&&"reactEasyCrop_CropAreaRound",N&&"reactEasyCrop_CropAreaGrid",E)},c)))},t.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:gN,minZoom:vN,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:xN},t.getMousePoint=function(s){return{x:Number(s.clientX),y:Number(s.clientY)}},t.getTouchPoint=function(s){return{x:Number(s.clientX),y:Number(s.clientY)}},t}(u.Component);function jN(e){return new Promise((t,s)=>{const r=new Image;r.addEventListener("load",()=>t(r)),r.addEventListener("error",a=>s(a)),r.crossOrigin="anonymous",r.src=e})}async function bN(e,t){const s=await jN(e),r=document.createElement("canvas"),a=r.getContext("2d");if(!a)throw new Error("Canvas context not available");return r.width=t.width,r.height=t.height,a.drawImage(s,t.x,t.y,t.width,t.height,0,0,t.width,t.height),new Promise((i,l)=>{r.toBlob(o=>{o?i(o):l(new Error("Canvas toBlob failed"))},"image/jpeg",.92)})}function Vf({isOpen:e,imageSrc:t,onCropComplete:s,onClose:r}){const[a,i]=u.useState({x:0,y:0}),[l,o]=u.useState(1),[c,d]=u.useState(null),[h,g]=u.useState(!1),m=u.useCallback((j,S)=>{d(S)},[]),_=async()=>{if(c){g(!0);try{const j=await bN(t,c);s(j)}catch{}finally{g(!1)}}};return n.jsxs(ms,{isOpen:e,onClose:r,title:" ",size:"lg",footer:n.jsxs("div",{className:"image-crop-modal__actions",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:r,children:""}),n.jsx("button",{type:"button",className:"btn btn-primary",onClick:_,disabled:h,children:h?"...":""})]}),children:[n.jsx("div",{className:"image-crop-modal__container",children:n.jsx(yN,{image:t,crop:a,zoom:l,aspect:1,onCropChange:i,onZoomChange:o,onCropComplete:m})}),n.jsxs("div",{className:"image-crop-modal__zoom",children:[n.jsx("label",{className:"image-crop-modal__zoom-label",children:""}),n.jsx("input",{type:"range",min:1,max:3,step:.1,value:l,onChange:j=>o(Number(j.target.value)),className:"image-crop-modal__zoom-slider"})]})]})}const _N=[".","","","",".","",""];function Hf({items:e,onChange:t,className:s}){const r=(l,o,c)=>{const d=e.map((h,g)=>{if(g!==l)return h;if(o==="qty"){const m=c===""?null:parseFloat(c);return{...h,qty:m}}return o==="unit"?{...h,unit:c||null}:{...h,[o]:c}});t(d)},a=()=>{t([...e,{name:"",qty:null,unit:"."}])},i=l=>{t(e.filter((o,c)=>c!==l))};return n.jsxs("div",{className:`composition-editor${s?` ${s}`:""}`,children:[n.jsx("label",{className:"form-field-label",children:""}),e.map((l,o)=>n.jsxs("div",{className:"composition-editor__row",children:[n.jsx("input",{type:"text",className:"form-input composition-editor__name",placeholder:"",value:l.name,onChange:c=>r(o,"name",c.target.value)}),n.jsx("input",{type:"number",className:"form-input composition-editor__qty",placeholder:"-",min:0,step:"any",value:l.qty??"",onChange:c=>r(o,"qty",c.target.value)}),n.jsxs("select",{className:"form-input composition-editor__unit",value:l.unit??"",onChange:c=>r(o,"unit",c.target.value),children:[n.jsx("option",{value:"",children:""}),_N.map(c=>n.jsx("option",{value:c,children:c},c))]}),n.jsx("button",{type:"button",className:"btn btn-sm composition-editor__remove",onClick:()=>i(o),"aria-label":"",children:""})]},o)),n.jsx("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:a,children:"+ "})]})}function NN({name:e,price:t,description:s,photoUrl:r,composition:a}){const i=parseFloat(t),l=!isNaN(i)&&i>0?`${Math.round(i)} `:" ",o=a.filter(c=>c.name.trim());return n.jsxs("div",{className:"pem-preview",children:[n.jsx("div",{className:"pem-preview-label",children:"  "}),r?n.jsx("img",{className:"pem-preview-image",src:r,alt:""}):n.jsx("div",{className:"pem-preview-image-placeholder",children:n.jsx(_u,{size:32})}),n.jsxs("div",{className:"pem-preview-info",children:[n.jsxs("div",{className:"pem-preview-header",children:[n.jsx("span",{className:"pem-preview-name",children:e||" "}),n.jsx("span",{className:"pem-preview-price",children:l})]}),s&&n.jsx("p",{className:"pem-preview-desc",children:s}),o.length>0&&n.jsx("div",{className:"pem-preview-composition",children:o.map((c,d)=>n.jsxs("span",{className:"pem-preview-comp-item",children:[c.name,c.qty!=null?` ${c.qty}`:"",c.unit?` ${c.unit}`:""]},d))})]})]})}function wN(){const e=u.useRef(""),t=u.useCallback(r=>{e.current=JSON.stringify(r)},[]),s=u.useCallback(r=>JSON.stringify(r)!==e.current,[]);return{takeSnapshot:t,isDirty:s}}function SN({product:e,onClose:t,onSaved:s}){const r=yt(),a=ns(),i=u.useRef(null),[l,o]=u.useState({name:"",description:"",price:"",quantity:""}),[c,d]=u.useState([]),[h,g]=u.useState(!0),[m,_]=u.useState([]),[j,S]=u.useState(!1),[N,f]=u.useState(null),[p,v]=u.useState({}),[x,C]=u.useState(!1),[M,O]=u.useState(!1),[E,W]=u.useState(null),z=u.useRef([]),{takeSnapshot:A,isDirty:G}=wN();u.useEffect(()=>{var Le;if(!e)return;const K={name:e.name,description:e.description||"",price:String(e.price),quantity:String(e.quantity)};o(K),g(e.is_active!==!1),d(e.composition??[]),v({}),S(!1),f(null),O(!1);const X=(Le=e.photo_ids)!=null&&Le.length?e.photo_ids:e.photo_id?[e.photo_id]:[],me=X.map(U=>({type:"kept",id:U}));_(me),A({...K,isActive:e.is_active!==!1,photos:X,composition:e.composition??[]})},[e,A]),u.useEffect(()=>()=>{m.forEach(K=>{K.type==="new"&&URL.revokeObjectURL(K.preview)})},[]);const H=()=>{const K={};l.name.trim()||(K.name=" "),l.description.length>2e3&&(K.description=" 2000 ");const X=parseFloat(l.price);(isNaN(X)||X<=0)&&(K.price="   0");const me=parseInt(l.quantity,10);return(isNaN(me)||me<0)&&(K.quantity="  "),v(K),Object.keys(K).length===0},V=async K=>{if(K.preventDefault(),!(!e||!H())){S(!0);try{const X=m.filter(ye=>ye.type==="new"),me=X.length,Le=[];for(let ye=0;ye<me;ye++){f(Math.round(ye/me*100));const I=await Lf(X[ye].file);I.photo_id&&Le.push(I.photo_id)}me>0&&f(100);let U=0;const fe=[];for(const ye of m)ye.type==="kept"?fe.push(ye.id):U<Le.length&&(fe.push(Le[U]),U++);const Ne=c.filter(ye=>ye.name.trim());await Rf(e.id,{name:l.name.trim(),description:l.description,price:parseFloat(l.price),quantity:parseInt(l.quantity,10),photo_ids:fe.slice(0,3),is_active:h,composition:Ne}),s()}catch(X){r.error(X instanceof Error?X.message:" ")}finally{S(!1),f(null)}}},Y=u.useCallback(async()=>{const K=m.map(me=>me.type==="kept"?me.id:me.file.name+me.file.size),X={...l,isActive:h,photos:K,composition:c};return G(X)?a({title:" ",message:"  ?    .",confirmLabel:"",cancelLabel:"",danger:!0}):!0},[l,h,m,c,G,a]),ne=m.length,J=ne<3,D=(K,X)=>{const me=K+X;me<0||me>=m.length||_(Le=>{const U=[...Le];return[U[K],U[me]]=[U[me],U[K]],U})},P=K=>{_(X=>{const me=X[K];return me.type==="new"&&URL.revokeObjectURL(me.preview),X.filter((Le,U)=>U!==K)})},w=K=>{const X=Array.from(K.target.files||[]).filter(me=>me.type.startsWith("image/"));X.length!==0&&(K.target.value="",T(X))},T=K=>{const X=3-m.length;if(X<=0)return;const me=K.slice(0,X);z.current=me.slice(1),W(URL.createObjectURL(me[0]))},B=K=>{const X=new File([K],`cropped-${Date.now()}.jpg`,{type:"image/jpeg"}),me=URL.createObjectURL(X),Le={type:"new",file:X,preview:me};_(fe=>[...fe,Le].slice(0,3)),E&&URL.revokeObjectURL(E),W(null);const U=z.current.shift();U&&W(URL.createObjectURL(U))},q=()=>{E&&URL.revokeObjectURL(E),W(null),z.current=[]},ve=K=>{K.preventDefault(),K.stopPropagation(),C(!0)},ze=K=>{K.preventDefault(),K.stopPropagation(),C(!1)},we=K=>{K.preventDefault(),K.stopPropagation(),C(!1);const X=Array.from(K.dataTransfer.files).filter(me=>me.type.startsWith("image/"));X.length!==0&&T(X)},be=m[0],Ce=be?be.type==="kept"?pc(be.id):be.preview:null,jt=n.jsxs("div",{className:"pem-footer",children:[n.jsx("div",{className:"pem-footer-left",children:N!=null&&n.jsx("div",{className:"pem-progress",children:n.jsx("div",{className:"pem-progress-bar",style:{width:`${N}%`}})})}),n.jsxs("div",{className:"pem-footer-right",children:[n.jsx("button",{type:"button",className:"btn btn-ghost",onClick:t,disabled:j,children:""}),n.jsx("button",{type:"button",className:"btn btn-primary",disabled:j,onClick:()=>{var K;return(K=i.current)==null?void 0:K.requestSubmit()},children:j?N!=null?` ${N}%...`:"...":""})]})]});return n.jsxs(n.Fragment,{children:[n.jsx(ms,{isOpen:e!=null,onClose:t,title:" ",size:"xl",beforeClose:Y,footer:jt,children:n.jsx("form",{onSubmit:V,ref:i,className:"pem-form",children:n.jsxs("div",{className:"pem-layout",children:[n.jsxs("div",{className:"pem-main",children:[n.jsxs("section",{className:"pem-section",children:[n.jsx("h3",{className:"pem-section-title",children:""}),n.jsxs("div",{className:`pem-photo-zone${x?" pem-photo-zone--dragover":""}`,onDragOver:ve,onDragLeave:ze,onDrop:we,children:[m.map((K,X)=>{const me=K.type==="kept"?pc(K.id)||"":K.preview;return n.jsxs("div",{className:"pem-photo-item",children:[n.jsx("img",{src:me,alt:""}),X===0&&n.jsx("span",{className:"pem-photo-main-badge",children:""}),n.jsxs("div",{className:"pem-photo-actions",children:[n.jsxs("div",{className:"pem-photo-actions-move",children:[X>0&&n.jsx("button",{type:"button",className:"pem-photo-action-btn",onClick:()=>D(X,-1),"aria-label":" ",children:n.jsx(bu,{size:14})}),X<m.length-1&&n.jsx("button",{type:"button",className:"pem-photo-action-btn",onClick:()=>D(X,1),"aria-label":" ",children:n.jsx(xr,{size:14})})]}),n.jsx("button",{type:"button",className:"pem-photo-action-btn pem-photo-action-btn--danger",onClick:()=>P(X),"aria-label":" ",children:n.jsx(ur,{size:14})})]})]},K.type==="kept"?K.id:`new-${X}`)}),J&&n.jsxs("label",{className:"pem-photo-add",children:[n.jsx(bf,{size:20}),n.jsx("span",{children:""}),n.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/webp,image/gif",onChange:w,multiple:!0,hidden:!0})]})]}),n.jsxs("div",{className:"pem-photo-hint",children:[ne," / 3 ",J&&"     +"]})]}),n.jsxs("section",{className:"pem-section",children:[n.jsx("h3",{className:"pem-section-title",children:""}),n.jsx(ae,{label:"",required:!0,error:p.name,children:n.jsx("input",{type:"text",value:l.name,onChange:K=>{o(X=>({...X,name:K.target.value})),p.name&&v(X=>{const{name:me,...Le}=X;return Le})},className:"form-input",placeholder:" "})}),n.jsx(ae,{label:"",charCount:l.description.length,maxChars:2e3,error:p.description,children:n.jsx("textarea",{value:l.description,onChange:K=>{o(X=>({...X,description:K.target.value})),p.description&&v(X=>{const{description:me,...Le}=X;return Le})},className:"form-input",rows:5,placeholder:"  "})}),n.jsx(Hf,{items:c,onChange:d})]}),n.jsxs("section",{className:"pem-section",children:[n.jsx("h3",{className:"pem-section-title",children:"  "}),n.jsxs("div",{className:"pem-field-row",children:[n.jsx(ae,{label:" ()",required:!0,error:p.price,children:n.jsx("input",{type:"number",min:1,value:l.price,onChange:K=>{o(X=>({...X,price:K.target.value})),p.price&&v(X=>{const{price:me,...Le}=X;return Le})},className:"form-input",placeholder:"0"})}),n.jsx(ae,{label:"",error:p.quantity,children:n.jsx("input",{type:"number",min:0,value:l.quantity,onChange:K=>{o(X=>({...X,quantity:K.target.value})),p.quantity&&v(X=>{const{quantity:me,...Le}=X;return Le})},className:"form-input",placeholder:"0"})})]}),n.jsx("div",{className:"pem-toggle-row",children:n.jsx(_a,{checked:h,onChange:g,label:"  "})})]}),n.jsx("button",{type:"button",className:"pem-preview-toggle",onClick:()=>O(K=>!K),children:M?" ":"   "})]}),n.jsx("aside",{className:`pem-preview-col${M?" pem-preview-col--visible":""}`,children:n.jsx(NN,{name:l.name,price:l.price,description:l.description,photoUrl:Ce,composition:c})})]})})}),E&&n.jsx(Vf,{isOpen:!!E,imageSrc:E,onCropComplete:B,onClose:q})]})}function kN(){const e=yt(),t=ns(),[s,r]=u.useState("regular"),[a,i]=u.useState(null),[l,o]=u.useState([]),[c,d]=u.useState(!0),[h,g]=u.useState(null),[m,_]=u.useState(!1),[j,S]=u.useState("choice"),[N,f]=u.useState([]),[p,v]=u.useState(null),[x,C]=u.useState({name:"",description:"",price:"",quantity:"1"}),[M,O]=u.useState([]),[E,W]=u.useState([]),[z,A]=u.useState([]),[G,H]=u.useState("50"),[V,Y]=u.useState(0),[ne,J]=u.useState(null),[D,P]=u.useState(null),[w,T]=u.useState(null),B=u.useRef([]),q=async()=>{d(!0);try{const U=s==="preorder",[fe,Ne]=await Promise.all([Cu(),Ub({preorder:U})]);i(fe),o(Ne??[])}catch{i(null),o([])}finally{d(!1)}};u.useEffect(()=>{q()},[s]);const ve=l.filter(U=>U.is_active!==!1).length,ze=async U=>{const fe=U.is_active===!1;g(U.id);const Ne=U.is_active;o(ye=>ye.map(I=>I.id===U.id?{...I,is_active:fe}:I));try{await Rf(U.id,{is_active:fe})}catch(ye){o(I=>I.map(se=>se.id===U.id?{...se,is_active:Ne}:se)),e.error(ye instanceof Error?ye.message:" ")}finally{g(null)}},we=async U=>{if(U.preventDefault(),!a)return;const fe=parseFloat(x.price),Ne=parseInt(x.quantity,10);if(isNaN(fe)||fe<0||isNaN(Ne)||Ne<0){e.warning("   ");return}try{const ye=[];for(const Me of E.slice(0,3)){const We=await Lf(Me);We.photo_id&&ye.push(We.photo_id)}const I={seller_id:a.seller_id,name:x.name,description:x.description,price:fe,quantity:Ne,is_preorder:s==="preorder"};ye.length&&(I.photo_ids=ye);const se=M.filter(Me=>Me.name.trim());se.length&&(I.composition=se),p!=null&&(I.bouquet_id=p,I.cost_price=V,I.markup_percent=parseFloat(G)||0),await Vb(I),C({name:"",description:"",price:"",quantity:"1"}),O([]),W([]),A([]),_(!1),S("choice"),v(null),Y(0),H("50"),q()}catch(ye){e.error(ye instanceof Error?ye.message:"")}},be=U=>{const fe=Array.from(U.target.files||[]).filter(I=>I.type.startsWith("image/"));if(fe.length===0)return;U.target.value="";const Ne=3-E.length;if(Ne<=0)return;const ye=fe.slice(0,Ne);B.current=ye.slice(1),T(URL.createObjectURL(ye[0]))},Ce=U=>{W(fe=>fe.filter((Ne,ye)=>ye!==U)),A(fe=>(URL.revokeObjectURL(fe[U]),fe.filter((Ne,ye)=>ye!==U)))},jt=async()=>{try{const U=await $f();f(U||[]),S("bouquet")}catch{f([]),S("bouquet")}},K=U=>{v(U.id);const fe=Math.max(0,U.can_assemble_count??0),Ne=U.total_price??0;Y(Ne);const ye=50;H(String(ye)),C({name:U.name,description:"",price:String(Math.round(Ne*(1+ye/100))),quantity:String(fe)})},X=async U=>{if(await t({message:" ?"}))try{await Hb(U),q()}catch(fe){e.error(fe instanceof Error?fe.message:"")}},me=U=>{const fe=new File([U],`cropped-${Date.now()}.jpg`,{type:"image/jpeg"}),Ne=[...E,fe].slice(0,3);W(Ne),A(I=>(I.forEach(se=>URL.revokeObjectURL(se)),Ne.map(se=>URL.createObjectURL(se)))),w&&URL.revokeObjectURL(w),T(null);const ye=B.current.shift();ye&&T(URL.createObjectURL(ye))},Le=()=>{w&&URL.revokeObjectURL(w),T(null),B.current=[]};return c?n.jsx("div",{className:"seller-showcase-loading",children:n.jsx("div",{className:"loader"})}):n.jsxs("div",{className:"seller-showcase-page",children:[n.jsx("p",{className:"seller-showcase-intro",children:"     . ,       mini app."}),n.jsx(on,{tabs:[{key:"regular",label:"  mini app",count:s==="regular"?l.length:void 0},{key:"preorder",label:"  "}],activeTab:s,onChange:U=>r(U)}),l.length>0&&n.jsxs("p",{className:"seller-showcase-stats",children:[" : ",ve,"  ",l.length]}),n.jsx("div",{className:"seller-showcase-toolbar",children:n.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>{_(!0),S("choice")},children:s==="preorder"?"   ":" "})}),m&&j==="choice"&&n.jsxs("div",{className:"seller-showcase-add-choice card",children:[n.jsx("h4",{children:"  ?"}),n.jsxs("div",{className:"seller-showcase-choice-buttons",children:[n.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>S("manual"),children:" "}),n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:jt,children:" "})]}),n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>_(!1),children:""})]}),m&&j==="bouquet"&&!p&&n.jsxs("div",{className:"seller-showcase-add-form card",children:[n.jsx("h4",{children:" "}),N.length===0?n.jsx("p",{className:"seller-showcase-empty-text",children:" .      ."}):n.jsx("ul",{className:"seller-showcase-bouquet-list",children:N.map(U=>n.jsx("li",{children:n.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>K(U),children:[U.name,"  ",U.total_price!=null?`${U.total_price.toFixed(0)} `:""]})},U.id))}),n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{_(!1),S("choice")},children:""})]}),m&&(j==="manual"||j==="bouquet"&&p)&&n.jsxs("form",{onSubmit:we,className:"seller-showcase-add-form card",children:[n.jsx("h4",{children:p?"  ":" "}),n.jsx(ae,{label:"",children:n.jsx("input",{type:"text",value:x.name,onChange:U=>C(fe=>({...fe,name:U.target.value})),className:"form-input",required:!0})}),n.jsx(ae,{label:"",children:n.jsx("textarea",{value:x.description,onChange:U=>C(fe=>({...fe,description:U.target.value})),className:"form-input"})}),n.jsx(Hf,{items:M,onChange:O}),p&&n.jsx("div",{className:"seller-showcase-cost-info",children:n.jsxs("span",{children:[" : ",n.jsxs("strong",{children:[V.toFixed(0)," "]})]})}),p?n.jsxs("div",{className:"seller-showcase-form-row-3",children:[n.jsx(ae,{label:" (%)",children:n.jsx("input",{type:"number",min:0,step:5,value:G,onChange:U=>{const fe=parseFloat(U.target.value)||0;H(U.target.value),C(Ne=>({...Ne,price:String(Math.round(V*(1+fe/100)))}))},className:"form-input"})}),n.jsx(ae,{label:" ()",hint:"   ",children:n.jsx("input",{type:"number",value:x.price,onChange:U=>C(fe=>({...fe,price:U.target.value})),className:"form-input",required:!0})}),n.jsx(ae,{label:"",hint:"   ",children:n.jsx("input",{type:"number",min:0,value:x.quantity,readOnly:!0,className:"form-input seller-showcase-form-input-readonly",title:"   "})})]}):n.jsxs("div",{className:"seller-showcase-form-row-2",children:[n.jsx(ae,{label:" ()",children:n.jsx("input",{type:"number",value:x.price,onChange:U=>C(fe=>({...fe,price:U.target.value})),className:"form-input",required:!0})}),n.jsx(ae,{label:"",children:n.jsx("input",{type:"number",min:0,value:x.quantity,onChange:U=>C(fe=>({...fe,quantity:U.target.value})),className:"form-input"})})]}),n.jsxs(ae,{label:"  ( 3 ., JPG/PNG/WebP/GIF)",children:[n.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/webp,image/gif",onChange:be,className:"form-input",multiple:!0}),z.length>0&&n.jsx("div",{className:"seller-showcase-photos-preview",children:z.map((U,fe)=>n.jsxs("div",{className:"seller-showcase-photo-preview-wrap",children:[n.jsx("img",{src:U,alt:` ${fe+1}`}),n.jsx("button",{type:"button",className:"seller-showcase-photo-remove",onClick:()=>Ce(fe),"aria-label":"",children:""})]},fe))})]}),n.jsxs("div",{className:"seller-showcase-form-actions",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{W([]),A([]),p?(S("bouquet"),v(null)):(_(!1),S("choice"))},children:""}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:""})]})]}),n.jsx(SN,{product:D,onClose:()=>P(null),onSaved:()=>{P(null),q()}}),l.length===0?n.jsx(Nt,{title:" ",message:"    "}):n.jsx("div",{className:"sc-product-list",children:l.map(U=>{const fe=U.photo_ids&&U.photo_ids[0]||U.photo_id,Ne=pc(fe??null),ye=U.is_active!==!1,I=U.stock_shortage&&U.stock_shortage.length>0,se=I?U.stock_shortage.map(We=>`${We.flower}: ${We.deficit}`).join(`
`):"",Me=U.bouquet_id&&U.cost_price!=null?`. ${Number(U.cost_price).toFixed(0)}  + ${Number(U.markup_percent??0).toFixed(0)}%`:"";return n.jsxs("div",{className:`sc-product-row${ye?"":" sc-product-row--hidden"}`,children:[n.jsx("div",{className:"sc-product-thumb",children:Ne?n.jsx("img",{src:Ne,alt:U.name,loading:"lazy"}):n.jsx("div",{className:"sc-product-thumb-placeholder",children:n.jsx(_u,{size:20})})}),n.jsxs("div",{className:"sc-product-info",children:[n.jsxs("div",{className:"sc-product-info-top",children:[n.jsx("span",{className:"sc-product-name",children:U.name}),n.jsxs("span",{className:"sc-product-price",children:[Number(U.price).toFixed(0)," "]})]}),(Me||U.description)&&n.jsx("span",{className:"sc-product-subtitle",children:Me||U.description})]}),n.jsxs("div",{className:"sc-product-meta",children:[n.jsxs("span",{className:`sc-product-stock${U.quantity<=2?" sc-product-stock--low":""}`,children:[U.quantity," ."]}),I&&n.jsx("span",{className:"sc-product-shortage-dot","data-tooltip":se,"aria-label":"  "})]}),n.jsxs("div",{className:"sc-product-actions",children:[n.jsx("button",{type:"button",className:`sc-action-btn${ye?"":" sc-action-btn--vis-off"}`,onClick:()=>ze(U),disabled:h===U.id,"data-tooltip":ye?"":"","aria-label":ye?"  mini app":"  mini app",children:ye?n.jsx(vs,{size:16}):n.jsx(er,{size:16})}),U.bouquet_id&&n.jsx("button",{type:"button",className:"sc-action-btn",disabled:ne===U.id,onClick:async()=>{J(U.id);try{await Qb(U.id),q()}catch(We){e.error(We instanceof Error?We.message:" ")}finally{J(null)}},"data-tooltip":"","aria-label":" ",children:n.jsx(C0,{size:16,className:ne===U.id?"animate-spin":""})}),n.jsx("button",{type:"button",className:"sc-action-btn",onClick:()=>P(U),"data-tooltip":"","aria-label":"",children:n.jsx(_s,{size:16})}),n.jsx("button",{type:"button",className:"sc-action-btn sc-action-btn--danger",onClick:()=>X(U.id),"data-tooltip":"","aria-label":"",children:n.jsx(ur,{size:16})})]})]},U.id)})}),w&&n.jsx(Vf,{isOpen:!!w,imageSrc:w,onCropComplete:me,onClose:Le})]})}function CN(){const e=yt(),t=ns(),[s,r]=u.useState([]),[a,i]=u.useState([]),[l,o]=u.useState(!0),[c,d]=u.useState(!1),[h,g]=u.useState(null),[m,_]=u.useState({name:"",packaging_cost:"0",items:[]}),j=async()=>{o(!0);try{const[E,W]=await Promise.all([S(),$f()]);r(E),i(W)}catch{r([]),i([])}finally{o(!1)}};u.useEffect(()=>{j()},[]);const S=async()=>(await Df()).map(W=>({flower_id:W.flower_id,flower_name:W.flower_name,remaining_quantity:W.total_remaining,avg_price:W.avg_price})),N=()=>{if(s.length===0)return;const E=s[0];_(W=>({...W,items:[...W.items,{flower_id:E.flower_id,flower_name:E.flower_name,quantity:1}]}))},f=(E,W,z)=>{_(A=>({...A,items:A.items.map((G,H)=>H===E?{...G,[W]:z}:G)}))},p=E=>{_(W=>({...W,items:W.items.filter((z,A)=>A!==E)}))},v=()=>{let E=0;for(const z of m.items){const A=s.find(H=>H.flower_id===z.flower_id),G=(A==null?void 0:A.avg_price)??0;E+=G*z.quantity}const W=parseFloat(m.packaging_cost)||0;return{cost:E,total:E+W,packaging:W}},x=async E=>{if(E.preventDefault(),!m.name.trim()||m.items.length===0){e.warning("      ");return}const W=parseFloat(m.packaging_cost)||0,z={name:m.name.trim(),packaging_cost:W,items:m.items.map(A=>({flower_id:A.flower_id,quantity:A.quantity}))};try{h?(await P_(h,z),g(null)):await E_(z),_({name:"",packaging_cost:"0",items:[]}),d(!1),await j()}catch(A){e.error(A instanceof Error?A.message:"")}},C=async E=>{if(await t({message:" ?"}))try{await T_(E),await j()}catch(W){e.error(W instanceof Error?W.message:"")}},M=E=>{g(E.id),_({name:E.name,packaging_cost:String(E.packaging_cost??0),items:(E.items||[]).map(W=>({flower_id:W.flower_id,flower_name:W.flower_name,quantity:W.quantity}))}),d(!0)};if(l)return n.jsx("div",{className:"seller-bouquets-loading",children:n.jsx("div",{className:"loader"})});const O=v();return n.jsxs("div",{className:"seller-bouquets-page",children:[n.jsx(tt,{title:" ",actions:n.jsx("button",{className:"btn btn-primary",onClick:()=>{d(!0),g(null),_({name:"",packaging_cost:"0",items:[]})},children:" "})}),c&&n.jsxs("form",{onSubmit:x,className:"card bouquet-form",children:[n.jsx("h3",{children:h?" ":" "}),n.jsx(ae,{label:"",required:!0,children:n.jsx("input",{type:"text",value:m.name,onChange:E=>_(W=>({...W,name:E.target.value})),className:"form-input",required:!0})}),n.jsx(ae,{label:"  ()",children:n.jsx("input",{type:"number",min:0,step:"0.01",value:m.packaging_cost,onChange:E=>_(W=>({...W,packaging_cost:E.target.value})),className:"form-input"})}),n.jsx("h4",{children:""}),n.jsx("p",{className:"section-hint",children:"     ."}),m.items.map((E,W)=>{const z=s.find(G=>G.flower_id===E.flower_id),A=(z==null?void 0:z.remaining_quantity)??1;return n.jsxs("div",{className:"bouquet-item-row",children:[n.jsx("select",{value:E.flower_id,onChange:G=>{const H=s.find(V=>V.flower_id===Number(G.target.value));H&&f(W,"flower_id",H.flower_id),H&&f(W,"flower_name",H.flower_name)},className:"form-input",children:s.map(G=>n.jsxs("option",{value:G.flower_id,children:[G.flower_name," ( ",G.remaining_quantity,", ~",G.avg_price.toFixed(0)," /)"]},G.flower_id))}),n.jsxs("div",{className:"qty-wrapper",children:[n.jsx("input",{type:"number",min:1,max:A,value:E.quantity,onChange:G=>{const H=parseInt(G.target.value,10)||1;f(W,"quantity",Math.min(H,A))},className:"form-input qty-input",placeholder:""}),n.jsxs("span",{className:"qty-hint",children:[": ",A]})]}),n.jsx("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:()=>p(W),children:""})]},W)}),n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:N,children:" "}),n.jsxs("div",{className:"bouquet-totals",children:[n.jsxs("p",{children:[" : ",O.cost.toFixed(0)," "]}),O.packaging>0&&n.jsxs("p",{children:[": ",O.packaging.toFixed(0)," "]}),n.jsxs("p",{children:[" : ",n.jsxs("strong",{children:[O.total.toFixed(0)," "]})]})]}),n.jsxs("div",{className:"form-actions",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{d(!1),g(null)},children:""}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:""})]})]}),n.jsxs("div",{className:"card shop-section",children:[n.jsx("h3",{children:" "}),a.length===0?n.jsx(Nt,{title:" ",message:"     ."}):n.jsx("div",{className:"bouquets-list",children:a.map(E=>n.jsxs("div",{className:`bouquet-card ${E.is_active===!1?"bouquet-card-inactive":""}`,children:[n.jsxs("div",{className:"bouquet-card-header",children:[n.jsx("strong",{children:E.name}),n.jsxs("span",{className:"bouquet-price",children:[".: ",E.total_price!=null?`${E.total_price.toFixed(0)} `:""]})]}),E.is_active===!1?n.jsx("p",{className:"bouquet-status bouquet-status-inactive",children:"        (   )"}):n.jsxs("p",{className:"bouquet-status bouquet-status-active",children:[" : ",n.jsx("strong",{children:E.can_assemble_count??0})," ."]}),E.items&&E.items.length>0&&n.jsx("ul",{className:"bouquet-composition",children:E.items.map((W,z)=>n.jsxs("li",{children:[W.flower_name,"  ",W.quantity]},z))}),n.jsxs("div",{className:"bouquet-actions",children:[n.jsx("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:()=>M(E),children:""}),n.jsx("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:()=>C(E.id),children:""})]})]},E.id))})]})]})}const EN=[{key:"showcase",label:""},{key:"bouquets",label:""}];function PN(){const[e,t]=Ta("showcase");return n.jsxs("div",{children:[n.jsx(tt,{title:"",subtitle:"   "}),n.jsx(on,{tabs:EN,activeTab:e,onChange:t}),e==="showcase"&&n.jsx(kN,{}),e==="bouquets"&&n.jsx(CN,{})]})}const TN=[{value:"wilted",label:""},{value:"broken",label:""},{value:"defect",label:""},{value:"other",label:""}];function AN(){const e=yt(),t=ns(),[s,r]=u.useState([]),[a,i]=u.useState([]),[l,o]=u.useState(null),[c,d]=u.useState(!0),[h,g]=u.useState(!1),[m,_]=u.useState(""),[j,S]=u.useState(""),[N,f]=u.useState(!1),[p,v]=u.useState(""),[x,C]=u.useState(""),[M,O]=u.useState(""),[E,W]=u.useState(""),[z,A]=u.useState(!1),[G,H]=u.useState(null),[V,Y]=u.useState({remaining_quantity:"",price_per_unit:"",shelf_life_days:""}),[ne,J]=u.useState(!1),[D,P]=u.useState({flower_id:0,quantity_initial:"1",arrival_date:"",shelf_life_days:"7",price_per_unit:""}),[w,T]=u.useState(null),[B,q]=u.useState({quantity:"",reason:"wilted",comment:""}),[ve,ze]=u.useState(!1),we=async()=>{try{const I=await p_();r(I||[])}catch{r([])}},be=async()=>{try{const I=await Mf();i(I||[])}catch{i([])}},Ce=async I=>{try{const se=await g_(I);o(se)}catch{o(null)}};u.useEffect(()=>{(async()=>{d(!0),await Promise.all([we(),be()]),d(!1)})()},[]);const jt=async I=>{if(I.preventDefault(),!!m.trim())try{await m_({name:m.trim(),default_shelf_life_days:j?parseInt(j,10):void 0}),_(""),S(""),g(!1),await we()}catch(se){e.error(se instanceof Error?se.message:"")}},K=async I=>{if(await t({message:"   ?"}))try{await h_(I),await we(),l&&await Ce(l.id)}catch(se){e.error(se instanceof Error?se.message:"")}},X=async I=>{if(I.preventDefault(),!!p.trim())try{const se=await f_({name:p.trim(),reception_date:x||void 0,supplier:M.trim()||void 0,invoice_number:E.trim()||void 0});v(""),C(""),O(""),W(""),f(!1),await be(),o({...se,items:[]}),await Ce(se.id)}catch(se){e.error(se instanceof Error?se.message:"")}},me=async()=>{if(l)try{await v_(l.id,{is_closed:!l.is_closed}),await be(),await Ce(l.id)}catch(I){e.error(I instanceof Error?I.message:"")}},Le=async I=>{if(I.preventDefault(),!l||!D.flower_id||!D.price_per_unit)return;const se=parseInt(D.quantity_initial,10),Me=parseInt(D.shelf_life_days,10),We=parseFloat(D.price_per_unit);if(isNaN(se)||se<1||isNaN(Me)||Me<1||isNaN(We)||We<0){e.warning(" ,    ");return}try{await x_(l.id,{flower_id:D.flower_id,quantity_initial:se,arrival_date:D.arrival_date||void 0,shelf_life_days:Me,price_per_unit:We}),P({flower_id:0,quantity_initial:"1",arrival_date:"",shelf_life_days:"7",price_per_unit:""}),A(!1),await Ce(l.id)}catch(Kt){e.error(Kt instanceof Error?Kt.message:"")}},U=async I=>{if(await t({message:" ?"}))try{await j_(I),l&&await Ce(l.id)}catch(se){e.error(se instanceof Error?se.message:"")}},fe=I=>{H(I.id),Y({remaining_quantity:String(I.remaining_quantity),price_per_unit:String(I.price_per_unit),shelf_life_days:String(I.shelf_life_days)})},Ne=async I=>{if(I.preventDefault(),G==null||!l)return;const se=parseInt(V.remaining_quantity,10),Me=parseFloat(V.price_per_unit.replace(",",".")),We=parseInt(V.shelf_life_days,10);if(isNaN(se)||se<0||isNaN(Me)||Me<0||isNaN(We)||We<1){e.warning(" ,    ");return}J(!0);try{await y_(G,{remaining_quantity:se,price_per_unit:Me,shelf_life_days:We}),H(null),await Ce(l.id)}catch(Kt){e.error(Kt instanceof Error?Kt.message:"")}finally{J(!1)}},ye=async I=>{if(I.preventDefault(),!w||!l)return;const se=parseInt(B.quantity,10);if(isNaN(se)||se<=0){e.warning("   0");return}if(se>w.remaining_quantity){e.warning(`    (${w.remaining_quantity})`);return}ze(!0);try{await b_(w.id,{quantity:se,reason:B.reason,comment:B.comment.trim()||void 0}),T(null),q({quantity:"",reason:"wilted",comment:""}),await Ce(l.id)}catch(Me){e.error(Me instanceof Error?Me.message:" ")}finally{ze(!1)}};return c?n.jsx("div",{className:"seller-receptions-loading",children:n.jsx("div",{className:"loader"})}):n.jsxs("div",{className:"seller-receptions-page",children:[n.jsx(tt,{title:"",actions:n.jsxs("div",{className:"receptions-actions",children:[n.jsx("button",{className:"btn btn-secondary",onClick:()=>g(!0),children:" "}),n.jsx("button",{className:"btn btn-primary",onClick:()=>f(!0),children:" "})]})}),n.jsx(ms,{isOpen:h,onClose:()=>g(!1),title:" ",size:"sm",footer:n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>g(!1),children:""}),n.jsx("button",{type:"submit",form:"form-add-flower",className:"btn btn-primary",children:""})]}),children:n.jsxs("form",{id:"form-add-flower",onSubmit:jt,children:[n.jsx(ae,{label:"",required:!0,children:n.jsx("input",{type:"text",value:m,onChange:I=>_(I.target.value),className:"form-input",required:!0})}),n.jsx(ae,{label:"    ()",hint:" 7",children:n.jsx("input",{type:"number",min:1,value:j,onChange:I=>S(I.target.value),className:"form-input",placeholder:" 7"})})]})}),n.jsx(ms,{isOpen:N,onClose:()=>f(!1),title:" ",size:"sm",footer:n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>f(!1),children:""}),n.jsx("button",{type:"submit",form:"form-add-reception",className:"btn btn-primary",children:""})]}),children:n.jsxs("form",{id:"form-add-reception",onSubmit:X,children:[n.jsx(ae,{label:"",required:!0,children:n.jsx("input",{type:"text",value:p,onChange:I=>v(I.target.value),className:"form-input",required:!0})}),n.jsx(ae,{label:" ",children:n.jsx("input",{type:"date",value:x,onChange:I=>C(I.target.value),className:"form-input"})}),n.jsx(ae,{label:"",hint:"",children:n.jsx("input",{type:"text",value:M,onChange:I=>O(I.target.value),className:"form-input",placeholder:""})}),n.jsx(ae,{label:" ",hint:"",children:n.jsx("input",{type:"text",value:E,onChange:I=>W(I.target.value),className:"form-input",placeholder:""})})]})}),n.jsx(ms,{isOpen:z,onClose:()=>A(!1),title:" ",size:"sm",footer:n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>A(!1),children:""}),n.jsx("button",{type:"submit",form:"form-add-item",className:"btn btn-primary",children:""})]}),children:n.jsxs("form",{id:"form-add-item",onSubmit:Le,children:[n.jsx(ae,{label:"",required:!0,children:n.jsxs("select",{value:D.flower_id,onChange:I=>P(se=>({...se,flower_id:Number(I.target.value)})),className:"form-input",required:!0,children:[n.jsx("option",{value:0,children:"--  --"}),s.map(I=>n.jsx("option",{value:I.id,children:I.name},I.id))]})}),n.jsxs("div",{className:"form-row-2",children:[n.jsx(ae,{label:"- ()",children:n.jsx("input",{type:"number",min:1,value:D.quantity_initial,onChange:I=>P(se=>({...se,quantity_initial:I.target.value})),className:"form-input"})}),n.jsx(ae,{label:" ",children:n.jsx("input",{type:"date",value:D.arrival_date,onChange:I=>P(se=>({...se,arrival_date:I.target.value})),className:"form-input"})})]}),n.jsxs("div",{className:"form-row-2",children:[n.jsx(ae,{label:"  ()",children:n.jsx("input",{type:"number",min:1,value:D.shelf_life_days,onChange:I=>P(se=>({...se,shelf_life_days:I.target.value})),className:"form-input"})}),n.jsx(ae,{label:"  ",required:!0,children:n.jsx("input",{type:"number",min:0,step:"0.01",value:D.price_per_unit,onChange:I=>P(se=>({...se,price_per_unit:I.target.value})),className:"form-input",required:!0})})]})]})}),n.jsx(ms,{isOpen:!!w,onClose:()=>T(null),title:w?`: ${w.flower_name}`:"",size:"sm",footer:n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>T(null),children:""}),n.jsx("button",{type:"submit",form:"form-write-off",className:"btn btn-primary",disabled:ve,children:ve?"...":""})]}),children:w&&n.jsxs("form",{id:"form-write-off",onSubmit:ye,children:[n.jsxs("p",{className:"writeoff-summary",children:[": ",w.remaining_quantity," .  ",w.price_per_unit," /"]}),n.jsx(ae,{label:"",required:!0,children:n.jsx("input",{type:"number",min:1,max:w.remaining_quantity,value:B.quantity,onChange:I=>q(se=>({...se,quantity:I.target.value})),className:"form-input",required:!0,autoFocus:!0})}),n.jsx(ae,{label:"",children:n.jsx("select",{value:B.reason,onChange:I=>q(se=>({...se,reason:I.target.value})),className:"form-input",children:TN.map(I=>n.jsx("option",{value:I.value,children:I.label},I.value))})}),n.jsx(ae,{label:"",hint:"",children:n.jsx("input",{type:"text",value:B.comment,onChange:I=>q(se=>({...se,comment:I.target.value})),className:"form-input",placeholder:""})}),B.quantity&&!isNaN(parseInt(B.quantity))&&n.jsxs("p",{className:"writeoff-loss",children:[": ",(parseInt(B.quantity)*w.price_per_unit).toFixed(0)," "]})]})}),n.jsxs("div",{className:"card shop-section",children:[n.jsx("h3",{className:"section-title",children:" "}),n.jsx("p",{className:"section-hint",children:"       ."}),s.length===0?n.jsx(Nt,{title:" ",message:"  ,   ."}):n.jsx("ul",{className:"flowers-list",children:s.map(I=>n.jsxs("li",{className:"flower-item",children:[n.jsx("span",{children:I.name}),I.default_shelf_life_days!=null&&n.jsxs("span",{className:"flower-shelf",children:["(",I.default_shelf_life_days," .)"]}),n.jsx("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:()=>K(I.id),children:""})]},I.id))})]}),n.jsxs("div",{className:"card shop-section",children:[n.jsx("h3",{className:"section-title",children:""}),n.jsx("p",{className:"section-hint",children:" ,     ."}),a.length===0?n.jsx(Nt,{title:" ",message:"  ,  ."}):n.jsx("div",{className:"receptions-list",children:a.map(I=>n.jsxs("button",{type:"button",className:`reception-tab ${(l==null?void 0:l.id)===I.id?"active":""} ${I.is_closed?"reception-closed":""}`,onClick:()=>Ce(I.id),children:[I.name," ",I.reception_date?`  ${I.reception_date}`:""," ",I.is_closed?" ()":""]},I.id))}),l&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"reception-header",children:[n.jsx("strong",{children:l.name}),l.reception_date&&n.jsx("span",{className:"reception-date",children:l.reception_date}),l.is_closed&&n.jsx("span",{className:"reception-status-badge",children:""}),l.supplier&&n.jsxs("span",{className:"reception-meta",children:[": ",l.supplier]}),l.invoice_number&&n.jsxs("span",{className:"reception-meta",children:[": ",l.invoice_number]}),n.jsx("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:me,children:l.is_closed?" ":" "}),!l.is_closed&&n.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:()=>A(!0),children:" "})]}),n.jsxs("div",{className:"reception-items-wrap",children:[n.jsxs("table",{className:"reception-items-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:""}),n.jsx("th",{children:"- ()"}),n.jsx("th",{children:" "}),n.jsx("th",{children:"  ()"}),n.jsx("th",{children:"  "}),n.jsx("th",{children:" "}),n.jsx("th",{children:" "}),n.jsx("th",{children:"  / "}),n.jsx("th",{})]})}),n.jsx("tbody",{children:l.items.map(I=>n.jsxs("tr",{className:I.days_left!=null&&I.days_left<=2?"row-expiring":"",children:[n.jsx("td",{children:I.flower_name}),n.jsx("td",{children:I.quantity_initial}),n.jsx("td",{children:I.arrival_date??"---"}),n.jsx("td",{children:G===I.id?n.jsx("input",{type:"number",min:1,value:V.shelf_life_days,onChange:se=>Y(Me=>({...Me,shelf_life_days:se.target.value})),className:"form-input input-sm input-table-cell"}):I.shelf_life_days}),n.jsx("td",{children:G===I.id?n.jsx("input",{type:"number",min:0,step:"0.01",value:V.price_per_unit,onChange:se=>Y(Me=>({...Me,price_per_unit:se.target.value})),className:"form-input input-sm input-table-cell input-table-cell--wide"}):`${I.price_per_unit} `}),n.jsx("td",{children:G===I.id?n.jsx("input",{type:"number",min:0,value:V.remaining_quantity,onChange:se=>Y(Me=>({...Me,remaining_quantity:se.target.value})),className:"form-input input-sm input-table-cell"}):I.remaining_quantity}),n.jsx("td",{children:I.days_left!=null?I.days_left:"---"}),n.jsxs("td",{children:[I.sold_quantity," / ",I.sold_amount.toFixed(0)," "]}),n.jsx("td",{className:"actions-cell",children:G===I.id?n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",className:"btn btn-sm btn-primary",onClick:Ne,disabled:ne,children:ne?"...":""}),n.jsx("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:()=>H(null),children:""})]}):n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:()=>fe(I),children:""}),I.remaining_quantity>0&&n.jsx("button",{type:"button",className:"btn btn-sm btn-warning",onClick:()=>{T(I),q({quantity:"",reason:"wilted",comment:""})},children:""}),n.jsx("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:()=>U(I.id),children:""})]})})]},I.id))})]}),l.items.length===0&&n.jsx(Nt,{title:" ",message:"  ,  ."})]})]})]})]})}const LN=[{key:"global",label:""},{key:"reception",label:" "}];function RN(){const e=yt(),t=ns(),[s,r]=u.useState("global"),[a,i]=u.useState([]),[l,o]=u.useState(null),[c,d]=u.useState([]),[h,g]=u.useState({}),[m,_]=u.useState(!0),[j,S]=u.useState(null),[N,f]=u.useState(!1),[p,v]=u.useState([]),[x,C]=u.useState({}),[M,O]=u.useState(null),E=async()=>{try{const P=await Mf();i(P||[])}catch{i([])}},W=async P=>{try{const w=await N_(P);d(w.items||[]);const T={};(w.items||[]).forEach(B=>{T[B.id]=String(B.remaining_quantity)}),g(T),S(null)}catch{d([]),g({})}},z=async()=>{try{const P=await Df();v(P||[]);const w={};(P||[]).forEach(T=>{w[T.flower_id]=String(T.total_remaining)}),C(w),O(null)}catch{v([]),C({})}};u.useEffect(()=>{(async()=>{_(!0),await E(),s==="global"&&await z(),_(!1)})()},[]),u.useEffect(()=>{s==="global"&&z()},[s]),u.useEffect(()=>{l?W(l):(d([]),g({}),S(null))},[l]);const A=(P,w)=>{g(T=>({...T,[P]:w}))},G=()=>c.map(P=>({reception_item_id:P.id,actual_quantity:parseInt(h[P.id]??"",10)||0})),H=async()=>{if(l)try{const P=await w_(l,G());S(P)}catch(P){e.error(P instanceof Error?P.message:"")}},V=async()=>{if(!(!l||!j)&&await t({message:"        . ?"})){f(!0);try{await S_(l,G()),S(null),await W(l)}catch(P){e.error(P instanceof Error?P.message:"")}finally{f(!1)}}},Y=(P,w)=>{C(T=>({...T,[P]:w}))},ne=()=>p.map(P=>({flower_id:P.flower_id,actual_quantity:parseInt(x[P.flower_id]??"",10)||0})),J=async()=>{try{const P=await k_(ne());O(P)}catch(P){e.error(P instanceof Error?P.message:"")}},D=async()=>{if(M&&await t({message:"      . ?"})){f(!0);try{await C_(ne()),O(null),await z()}catch(P){e.error(P instanceof Error?P.message:"")}finally{f(!1)}}};return m?n.jsx("div",{className:"seller-inventory-loading",children:n.jsx("div",{className:"loader"})}):n.jsxs("div",{className:"seller-inventory-page",children:[n.jsx(tt,{title:""}),n.jsx(on,{tabs:LN,activeTab:s,onChange:P=>r(P)}),s==="reception"&&n.jsxs("div",{className:"inventory-section",children:[n.jsx("p",{className:"section-hint",children:"       ."}),n.jsxs("div",{className:"inventory-select-wrap",children:[n.jsx("label",{className:"inventory-select-label",children:""}),n.jsxs("select",{value:l??"",onChange:P=>o(P.target.value?Number(P.target.value):null),className:"form-input",children:[n.jsx("option",{value:"",children:"--  --"}),a.map(P=>n.jsxs("option",{value:P.id,children:[P.name," ",P.reception_date?` (${P.reception_date})`:""]},P.id))]})]}),l&&c.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"card inventory-table-wrap",children:n.jsxs("table",{className:"inventory-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:""}),n.jsx("th",{children:" ()"}),n.jsx("th",{children:""}),n.jsx("th",{children:""}),n.jsx("th",{children:""})]})}),n.jsx("tbody",{children:c.map(P=>{const T=(parseInt(h[P.id]??"",10)||0)-P.remaining_quantity,B=T<0?Math.abs(T)*P.price_per_unit:0;return n.jsxs("tr",{children:[n.jsx("td",{children:P.flower_name}),n.jsx("td",{children:P.remaining_quantity}),n.jsx("td",{children:n.jsx("input",{type:"number",min:0,value:h[P.id]??"",onChange:q=>A(P.id,q.target.value),className:"form-input input-sm"})}),n.jsx("td",{children:T!==0?T:"---"}),n.jsx("td",{children:B>0?B.toFixed(0):"---"})]},P.id)})})]})}),n.jsx("button",{type:"button",className:"btn btn-primary",onClick:H,children:""}),j&&n.jsxs("div",{className:"card check-result",children:[n.jsx("h3",{className:"check-result-title",children:" "}),n.jsxs("p",{className:"total-loss",children:[" : ",n.jsxs("strong",{children:[j.total_loss.toFixed(0)," "]})]}),n.jsxs("table",{className:"inventory-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:""}),n.jsx("th",{children:""}),n.jsx("th",{children:""}),n.jsx("th",{children:""}),n.jsx("th",{children:""})]})}),n.jsx("tbody",{children:j.lines.map(P=>n.jsxs("tr",{children:[n.jsx("td",{children:P.flower_name}),n.jsx("td",{children:P.system_quantity}),n.jsx("td",{children:P.actual_quantity}),n.jsx("td",{children:P.difference}),n.jsx("td",{children:P.loss_amount>0?P.loss_amount.toFixed(0):"---"})]},P.reception_item_id))})]}),n.jsx("p",{className:"section-hint",children:"           ."}),n.jsx("button",{type:"button",className:"btn btn-primary",onClick:V,disabled:N,children:N?"...":" "})]})]}),l&&c.length===0&&n.jsx(Nt,{title:" ",message:"      ."})]}),s==="global"&&n.jsxs("div",{className:"inventory-section",children:[n.jsx("p",{className:"section-hint",children:"       ,   .   ."}),p.length===0?n.jsx(Nt,{title:" ",message:"    ."}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"card inventory-table-wrap",children:n.jsxs("table",{className:"inventory-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:""}),n.jsx("th",{children:" ()"}),n.jsx("th",{children:". "}),n.jsx("th",{children:""}),n.jsx("th",{children:""}),n.jsx("th",{children:""})]})}),n.jsx("tbody",{children:p.map(P=>{const T=(parseInt(x[P.flower_id]??"",10)||0)-P.total_remaining,B=T<0?Math.abs(T)*P.avg_price:0;return n.jsxs("tr",{children:[n.jsx("td",{children:P.flower_name}),n.jsx("td",{children:P.total_remaining}),n.jsx("td",{children:P.avg_price.toFixed(0)}),n.jsx("td",{children:n.jsx("input",{type:"number",min:0,value:x[P.flower_id]??"",onChange:q=>Y(P.flower_id,q.target.value),className:"form-input input-sm"})}),n.jsx("td",{children:T!==0?T:"---"}),n.jsx("td",{children:B>0?B.toFixed(0):"---"})]},P.flower_id)})})]})}),n.jsx("button",{type:"button",className:"btn btn-primary",onClick:J,children:""}),M&&n.jsxs("div",{className:"card check-result",children:[n.jsx("h3",{className:"check-result-title",children:" "}),n.jsxs("p",{className:"total-loss",children:[" : ",n.jsxs("strong",{children:[M.total_loss.toFixed(0)," "]})]}),n.jsxs("table",{className:"inventory-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:""}),n.jsx("th",{children:""}),n.jsx("th",{children:""}),n.jsx("th",{children:""}),n.jsx("th",{children:""})]})}),n.jsx("tbody",{children:M.lines.map(P=>n.jsxs("tr",{children:[n.jsx("td",{children:P.flower_name}),n.jsx("td",{children:P.system_quantity}),n.jsx("td",{children:P.actual_quantity}),n.jsx("td",{children:P.difference}),n.jsx("td",{children:P.loss_amount>0?P.loss_amount.toFixed(0):"---"})]},P.flower_id))})]}),n.jsx("p",{className:"section-hint",children:"     .       ."}),n.jsx("button",{type:"button",className:"btn btn-primary",onClick:D,disabled:N,children:N?"...":" "})]})]})]})]})}const ON={wilted:"",broken:"",defect:"",other:""},MN=new Intl.NumberFormat("ru-RU",{minimumFractionDigits:0,maximumFractionDigits:2});function Xa(e){return`${MN.format(e)} `}function DN(){return new Date().toISOString().slice(0,10)}function $N(e){const t=new Date;return t.setDate(t.getDate()-e),t.toISOString().slice(0,10)}function IN(){const[e,t]=u.useState(null),[s,r]=u.useState(!0),[a,i]=u.useState("30d"),[l,o]=u.useState(""),[c,d]=u.useState(""),h=u.useCallback(async(j,S)=>{r(!0);try{const N=await __(j,S);t(N)}catch{t(null)}finally{r(!1)}},[]);u.useEffect(()=>{if(a==="custom")return;const j=DN(),N=$N({"7d":6,"30d":29,"90d":89}[a]??29);o(N),d(j),h(N,j)},[a,h]);const g=()=>{l&&c&&(i("custom"),h(l,c))},m=e?Object.entries(e.by_reason):[],_=(e==null?void 0:e.total_loss)??0;return n.jsxs("div",{className:"stats-page",children:[n.jsxs("div",{className:"card seller-stats-card",children:[n.jsxs("div",{className:"seller-stats-header",children:[n.jsx("div",{children:n.jsx("h2",{children:"  "})}),n.jsxs("div",{className:"seller-stats-controls",children:[n.jsxs("div",{className:"range-buttons",children:[["7d","30d","90d"].map(j=>n.jsx("button",{type:"button",className:`btn btn-sm ${a===j?"btn-primary":"btn-secondary"}`,onClick:()=>i(j),children:j==="7d"?"7 ":j==="30d"?"":"3 "},j)),n.jsx("button",{type:"button",className:`btn btn-sm ${a==="custom"?"btn-primary":"btn-secondary"}`,onClick:()=>i("custom"),children:" "})]}),a==="custom"&&n.jsxs("div",{className:"range-custom",children:[n.jsx("input",{type:"date",className:"form-input form-input-sm",value:l,onChange:j=>o(j.target.value),max:c||void 0}),n.jsx("span",{className:"range-sep",children:""}),n.jsx("input",{type:"date",className:"form-input form-input-sm",value:c,onChange:j=>d(j.target.value),min:l||void 0}),n.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:g,children:""})]})]})]}),s?n.jsx("div",{className:"seller-chart-loading"}):e?n.jsxs("div",{className:"seller-stats-summary",children:[n.jsxs("div",{className:"summary-item",children:[n.jsx("span",{className:"summary-label",children:" "}),n.jsx("span",{className:"summary-value",children:e.total_count})]}),n.jsxs("div",{className:"summary-item",children:[n.jsx("span",{className:"summary-label",children:" ()"}),n.jsx("span",{className:"summary-value",children:e.total_quantity})]}),n.jsxs("div",{className:"summary-item accent",children:[n.jsx("span",{className:"summary-label",children:" "}),n.jsx("span",{className:"summary-value accent",children:Xa(e.total_loss)})]})]}):n.jsx("p",{className:"empty-text",children:" "})]}),m.length>0&&n.jsxs("div",{className:"card seller-breakdown-card",children:[n.jsx("h3",{children:" "}),n.jsx("div",{className:"seller-breakdown-grid",children:m.map(([j,S])=>n.jsxs("div",{className:"seller-breakdown-item",children:[n.jsx("span",{className:"summary-label",children:ON[j]||j}),n.jsx("span",{className:"summary-value",children:Xa(S.loss_amount)}),n.jsxs("span",{className:"seller-breakdown-sub",children:[S.quantity," . (",_>0?Math.round(S.loss_amount/_*100):0,"%)"]})]},j))})]}),e&&e.by_flower.length>0&&n.jsxs("div",{className:"card seller-stats-top",children:[n.jsx("h3",{children:" "}),n.jsx("div",{className:"table-wrap",children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:""}),n.jsx("th",{children:" ()"}),n.jsx("th",{children:" "})]})}),n.jsx("tbody",{children:e.by_flower.map(j=>n.jsxs("tr",{children:[n.jsx("td",{children:j.flower_name}),n.jsx("td",{children:j.quantity}),n.jsx("td",{children:Xa(j.loss_amount)})]},j.flower_name))})]})})]}),e&&e.daily.length>0&&n.jsxs("div",{className:"card seller-stats-top",children:[n.jsx("h3",{children:" "}),n.jsx("div",{className:"table-wrap",children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:""}),n.jsx("th",{children:" ()"}),n.jsx("th",{children:" "})]})}),n.jsx("tbody",{children:e.daily.filter(j=>j.quantity>0||j.loss_amount>0).map(j=>n.jsxs("tr",{children:[n.jsx("td",{children:j.date}),n.jsx("td",{children:j.quantity}),n.jsx("td",{children:Xa(j.loss_amount)})]},j.date))})]})})]})]})}const zN=[{key:"receptions",label:""},{key:"inventory",label:""},{key:"writeoffs",label:""}];function FN(){const[e,t]=Ta("receptions");return n.jsxs("div",{children:[n.jsx(tt,{title:"",subtitle:",   "}),n.jsx(on,{tabs:zN,activeTab:e,onChange:t}),e==="receptions"&&n.jsx(AN,{}),e==="inventory"&&n.jsx(RN,{}),e==="writeoffs"&&n.jsx(IN,{})]})}function Za(e){if(!e)return"";try{return new Date(e).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return e}}const WN={VIP:"warning",:"success",:"info",:"danger",:"neutral",:"neutral"},UN={pending:"",accepted:"",assembling:"",in_transit:" ",done:"",completed:"",rejected:""};function Qf(){var Cs;const e=yt(),t=ns(),{id:s}=Jh(),r=ts(),[a,i]=u.useState([]),[l,o]=u.useState(null),[c,d]=u.useState(!0),[h,g]=u.useState(""),[m,_]=u.useState(!1),[j,S]=u.useState(""),[N,f]=u.useState(!1),[p,v]=u.useState([]),[x,C]=u.useState(""),[M,O]=u.useState(""),[E,W]=u.useState([]),[z,A]=u.useState(""),[G,H]=u.useState(""),[V,Y]=u.useState([]),[ne,J]=u.useState(""),[D,P]=u.useState(!1),[w,T]=u.useState([]),[B,q]=u.useState({title:"",event_date:"",remind_days_before:"3",notes:""}),[ve,ze]=u.useState(!1),[we,be]=u.useState(null),[Ce,jt]=u.useState({}),[K,X]=u.useState(""),me=u.useCallback(async()=>{try{const[L,te]=await Promise.all([t_(),e_()]);i(L||[]),Y(te||[]);const Ee={};(L||[]).forEach(Fe=>{Fe.segment&&(Ee[Fe.segment]=(Ee[Fe.segment]||0)+1)}),jt(Ee)}catch{i([])}finally{d(!1)}},[]),Le=u.useCallback(async L=>{d(!0);try{const[te,Ee]=await Promise.all([s_(L),a_(L)]);o(te),v(Ee||[]),O(te.notes||""),W(Array.isArray(te.tags)?te.tags:[]),A(""),H(te.birthday||""),T(te.events||[])}catch{o(null),v([])}finally{d(!1)}},[]);u.useEffect(()=>{if(s){const L=parseInt(s,10);isNaN(L)?d(!1):Le(L)}else me()},[s,me,Le]);const U=async L=>{L.preventDefault();const te=parseFloat(h.replace(",","."));if(isNaN(te)||te<=0||!l){e.warning("   0");return}_(!0);try{const Ee=await r_(l.id,te);g(""),o(Fe=>Fe?{...Fe,points_balance:Ee.new_balance,transactions:[{id:0,amount:Ee.amount,points_accrued:Ee.points_accrued,order_id:null,created_at:new Date().toISOString()},...Fe.transactions]}:null)}catch(Ee){e.error(Ee instanceof Error?Ee.message:"")}finally{_(!1)}},fe=async L=>{L.preventDefault();const te=parseFloat(j.replace(",","."));if(isNaN(te)||te<=0||!l){e.warning("   ");return}f(!0);try{const Ee=await i_(l.id,te);S(""),o(Fe=>Fe?{...Fe,points_balance:Ee.new_balance,transactions:[{id:0,amount:0,points_accrued:-Ee.points_deducted,order_id:null,created_at:new Date().toISOString()},...Fe.transactions]}:null)}catch(Ee){e.error(Ee instanceof Error?Ee.message:"")}finally{f(!1)}},Ne=async()=>{if(l){P(!0);try{const L=await l_(l.id,{notes:M,tags:E,birthday:G||null});o(te=>te?{...te,notes:L.notes,tags:Array.isArray(L.tags)?L.tags:[],birthday:L.birthday}:null)}catch(L){e.error(L instanceof Error?L.message:"")}finally{P(!1)}}},ye=async L=>{if(L.preventDefault(),!l||!B.title.trim()||!B.event_date){e.warning("   ");return}ze(!0);try{const te=await Of(l.id,{title:B.title.trim(),event_date:B.event_date,remind_days_before:parseInt(B.remind_days_before)||3,notes:B.notes.trim()||null});T(Ee=>[...Ee,te]),q({title:"",event_date:"",remind_days_before:"3",notes:""})}catch(te){e.error(te instanceof Error?te.message:"")}finally{ze(!1)}},I=async L=>{if(L.preventDefault(),!(!l||!we)){ze(!0);try{const te=await o_(l.id,we.id,{title:B.title.trim()||void 0,event_date:B.event_date||void 0,remind_days_before:parseInt(B.remind_days_before)||void 0,notes:B.notes.trim()||null});T(Ee=>Ee.map(Fe=>Fe.id===te.id?te:Fe)),be(null),q({title:"",event_date:"",remind_days_before:"3",notes:""})}catch(te){e.error(te instanceof Error?te.message:"")}finally{ze(!1)}}},se=async L=>{if(!(!l||!await t({message:"  ?"})))try{await c_(l.id,L),T(te=>te.filter(Ee=>Ee.id!==L))}catch(te){e.error(te instanceof Error?te.message:"")}},Me=L=>{be(L),q({title:L.title,event_date:L.event_date||"",remind_days_before:String(L.remind_days_before),notes:L.notes||""})},We=a.filter(L=>{if(x.trim()){const te=x.trim().toLowerCase();if(!(L.fio&&L.fio.toLowerCase().includes(te)||L.username&&L.username.toLowerCase().includes(te)||L.phone&&L.phone.includes(x.trim())||L.first_name&&L.first_name.toLowerCase().includes(te)||L.last_name&&L.last_name.toLowerCase().includes(te)||L.loyalty_card_number&&L.loyalty_card_number.toLowerCase().includes(te)))return!1}return!(ne&&!(L.tags||[]).includes(ne)||K&&L.segment!==K)}),Kt=async()=>{try{const L=await d_(),te=URL.createObjectURL(L),Ee=document.createElement("a");Ee.href=te,Ee.download=`customers_${new Date().toISOString().slice(0,10)}.csv`,Ee.click(),URL.revokeObjectURL(te)}catch(L){e.error(L instanceof Error?L.message:" ")}};return s?c?n.jsx("div",{className:"customers-page customers-detail",children:n.jsx("div",{className:"customers-loading",children:"..."})}):l?n.jsxs("div",{className:"customers-page customers-detail",children:[n.jsx(tt,{title:`${l.last_name||""} ${l.first_name||""}`.trim()||"",subtitle:l.card_number,breadcrumbs:[{label:"",to:"/customers"},{label:l.card_number||`#${l.id}`}]}),n.jsxs(hn,{children:[n.jsx(je,{label:"",value:l.phone}),n.jsx(je,{label:"",value:`${l.points_balance} `,accent:!0}),((Cs=l.tier)==null?void 0:Cs.name)&&n.jsxs("div",{className:"customer-tier-row",children:[n.jsx(sn,{variant:"warning",children:l.tier.name}),n.jsxs("span",{className:"customer-tier-percent",children:["(",l.tier.points_percent,"% )"]}),l.tier.next_tier&&l.tier.amount_to_next!=null&&n.jsxs("span",{className:"customer-tier-next",children:[" ",l.tier.next_tier,"  ",l.tier.amount_to_next.toLocaleString("ru-RU")," "]})]}),l.birthday&&n.jsx(je,{label:" ",value:new Date(l.birthday+"T00:00:00").toLocaleDateString("ru-RU",{day:"numeric",month:"long"})}),l.total_purchases!=null&&l.total_purchases>0&&n.jsx(je,{label:" ",value:`${l.total_purchases.toLocaleString("ru")} `}),l.last_order_at&&n.jsx(je,{label:" ",value:Za(l.last_order_at)}),l.completed_orders_count!=null&&l.completed_orders_count>0&&n.jsx(je,{label:" ",value:l.completed_orders_count})]}),n.jsxs(hn,{className:"customer-detail-section",children:[n.jsx("h3",{children:"  "}),n.jsxs("div",{className:"customer-notes-form",children:[n.jsx(ae,{label:"",children:n.jsx("textarea",{value:M,onChange:L=>O(L.target.value),placeholder:"   (VIP,   ..)",rows:3})}),n.jsxs(ae,{label:"",children:[n.jsx("div",{className:"customer-tags-list",children:E.map((L,te)=>n.jsxs("span",{className:"customer-tag",children:[L,n.jsx("button",{type:"button",className:"customer-tag-remove",onClick:()=>W(E.filter((Ee,Fe)=>Fe!==te)),children:"x"})]},te))}),n.jsxs("div",{className:"customer-tag-input-row",children:[n.jsx("input",{type:"text",value:z,onChange:L=>A(L.target.value),onKeyDown:L=>{if(L.key==="Enter"&&z.trim()){L.preventDefault();const te=z.trim();E.includes(te)||W([...E,te]),A("")}},placeholder:"   Enter",list:"tag-suggestions"}),n.jsx("datalist",{id:"tag-suggestions",children:V.filter(L=>!E.includes(L)).map(L=>n.jsx("option",{value:L},L))}),n.jsx("button",{type:"button",className:"customer-tag-add-btn",onClick:()=>{const L=z.trim();L&&!E.includes(L)&&W([...E,L]),A("")},children:"+"})]})]}),n.jsx(ae,{label:" ",className:"customer-birthday-input",children:n.jsx("input",{type:"date",value:G,onChange:L=>H(L.target.value)})}),n.jsx("button",{type:"button",className:"customer-notes-save",onClick:Ne,disabled:D,children:D?"...":""})]})]}),n.jsxs(hn,{className:"customer-detail-section",children:[n.jsx("h3",{children:" "}),w.length>0&&n.jsx("div",{className:"customer-events-list",children:w.map(L=>n.jsxs("div",{className:"customer-event-item",children:[n.jsxs("div",{className:"customer-event-info",children:[n.jsx("strong",{children:L.title}),L.event_date&&n.jsxs(n.Fragment,{children:["  ",new Date(L.event_date+"T00:00:00").toLocaleDateString("ru-RU",{day:"numeric",month:"long"})]}),L.notes&&n.jsxs("span",{className:"customer-event-notes",children:[" (",L.notes,")"]}),n.jsxs("span",{className:"customer-event-remind",children:["    ",L.remind_days_before," ."]})]}),n.jsxs("div",{className:"customer-event-actions",children:[n.jsx("button",{type:"button",className:"customer-event-btn",onClick:()=>Me(L),children:"."}),n.jsx("button",{type:"button",className:"customer-event-btn customer-event-btn--danger",onClick:()=>se(L.id),children:""})]})]},L.id))}),n.jsxs("form",{onSubmit:we?I:ye,className:"customer-event-form",children:[n.jsxs("div",{className:"customer-event-form-row",children:[n.jsx("input",{type:"text",placeholder:" ( , ...)",value:B.title,onChange:L=>q(te=>({...te,title:L.target.value}))}),n.jsx("input",{type:"date",value:B.event_date,onChange:L=>q(te=>({...te,event_date:L.target.value}))}),n.jsx("input",{type:"number",min:"0",max:"90",placeholder:"",title:"   ",value:B.remind_days_before,onChange:L=>q(te=>({...te,remind_days_before:L.target.value}))})]}),n.jsxs("div",{className:"customer-event-form-row",children:[n.jsx("input",{type:"text",placeholder:" ()",value:B.notes,onChange:L=>q(te=>({...te,notes:L.target.value}))}),n.jsx("button",{type:"submit",className:"customer-event-submit",disabled:ve,children:ve?"...":we?"":""}),we&&n.jsx("button",{type:"button",className:"customer-event-cancel",onClick:()=>{be(null),q({title:"",event_date:"",remind_days_before:"3",notes:""})},children:""})]})]})]}),n.jsxs("div",{className:"record-sale",children:[n.jsx("h3",{children:" "}),n.jsxs("form",{onSubmit:U,children:[n.jsx("input",{type:"text",inputMode:"decimal",placeholder:", ",value:h,onChange:L=>g(L.target.value)}),n.jsx("button",{type:"submit",disabled:m,children:m?"...":" "})]})]}),n.jsxs("div",{className:"deduct-points",children:[n.jsx("h3",{children:" "}),n.jsxs("form",{onSubmit:fe,children:[n.jsx("input",{type:"text",inputMode:"decimal",placeholder:"",value:j,onChange:L=>S(L.target.value)}),n.jsx("button",{type:"submit",disabled:N,children:N?"...":""})]})]}),p.length>0&&n.jsxs("div",{className:"customer-orders-list",children:[n.jsx("h3",{children:""}),n.jsx("ul",{children:p.map(L=>n.jsx("li",{children:n.jsxs(Xe,{to:`/orders/${L.id}`,children:[" #",L.id,"  ",L.total_price,"   ",UN[L.status]||L.status,"  ",Za(L.created_at??null)]})},L.id))})]}),n.jsxs("div",{className:"transactions-list",children:[n.jsx("h3",{children:" "}),l.transactions.length===0?n.jsx(Nt,{title:"  ",message:"     "}):l.transactions.map(L=>n.jsxs("div",{className:"transaction-item",children:[n.jsx("span",{className:"date",children:Za(L.created_at)}),n.jsx("span",{className:"amount",children:L.amount>0?`${L.amount} `:""}),n.jsxs("span",{className:"points",children:[L.points_accrued>=0?`+${L.points_accrued}`:L.points_accrued," ",L.order_id!=null&&n.jsxs(n.Fragment,{children:["  ",n.jsxs(Xe,{to:`/orders/${L.order_id}`,children:[" #",L.order_id]})]})]})]},L.id))]})]}):n.jsxs("div",{className:"customers-page customers-detail",children:[n.jsx(tt,{title:"  ",breadcrumbs:[{label:"",to:"/customers"},{label:" "}]}),n.jsx(Nt,{title:"  ",message:"   "})]}):n.jsxs("div",{className:"customers-page",children:[n.jsxs("div",{className:"customers-stats-grid",children:[n.jsx(Vt,{label:"",value:a.length}),n.jsx(Vt,{label:" ",value:a.filter(L=>L.has_loyalty).length}),n.jsx(Vt,{label:" ",value:a.filter(L=>!L.has_loyalty).length})]}),n.jsxs("div",{className:"customers-search-and-export",children:[n.jsx(Nf,{value:x,onChange:C,placeholder:"  , @username  "}),V.length>0&&n.jsxs("select",{value:ne,onChange:L=>J(L.target.value),children:[n.jsx("option",{value:"",children:" "}),V.map(L=>n.jsx("option",{value:L,children:L},L))]}),n.jsxs("select",{value:K,onChange:L=>X(L.target.value),children:[n.jsx("option",{value:"",children:" "}),Object.keys(Ce).map(L=>n.jsxs("option",{value:L,children:[L," (",Ce[L],")"]},L))]}),n.jsx("button",{type:"button",className:"customers-export-btn",onClick:Kt,children:" CSV"})]}),Object.keys(Ce).length>0&&n.jsx("div",{className:"segment-filter-row",children:Object.entries(Ce).map(([L,te])=>n.jsxs("button",{type:"button",className:`segment-filter-btn ${K===L?"segment-filter-btn--active":""}`,onClick:()=>X(K===L?"":L),children:[L,": ",te]},L))}),c?n.jsx("div",{className:"customers-loading",children:"..."}):n.jsx("div",{className:"customers-list",children:We.length===0?n.jsx(Nt,{title:a.length===0?" ":"  ",message:a.length===0?"    .        .":"   "}):We.map((L,te)=>{const Ee=L.fio||(L.first_name||L.last_name?`${L.last_name||""} ${L.first_name||""}`.trim():null)||(L.username?`@${L.username}`:null)||(L.buyer_id?`ID ${L.buyer_id}`:` #${te+1}`),Fe=L.has_loyalty&&L.loyalty_customer_id;return n.jsxs("div",{className:`customer-row ${Fe?"customer-row--clickable":""}`,onClick:()=>Fe&&r(`/customers/${L.loyalty_customer_id}`),children:[n.jsxs("div",{className:"customer-row-main",children:[n.jsxs("div",{className:"name",children:[Ee,L.username&&L.fio&&n.jsxs("span",{className:"customer-username",children:["@",L.username]}),L.segment&&n.jsx(sn,{variant:WN[L.segment]||"neutral",size:"sm",children:L.segment}),Array.isArray(L.tags)&&L.tags.length>0&&L.tags.map((dt,R)=>n.jsx("span",{className:"customer-list-tag",children:dt},R))]}),n.jsxs("div",{className:"meta",children:[L.phone||"",L.loyalty_card_number&&n.jsxs(n.Fragment,{children:["  ",L.loyalty_card_number]}),L.subscribed_at&&n.jsxs(n.Fragment,{children:["  ",Za(L.subscribed_at)]})]})]}),n.jsx("div",{className:"customer-row-right",children:L.has_loyalty?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"points",children:[L.loyalty_points," ."]}),Fe&&n.jsx(Xe,{to:`/customers/${L.loyalty_customer_id}`,className:"loyalty-link",onClick:dt=>dt.stopPropagation(),children:""})]}):n.jsx("span",{className:"customer-no-card",children:" "})})]},L.buyer_id||`sc-${L.loyalty_customer_id||te}`)})})]})}function BN(e){if(!e)return"";try{return new Date(e).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"})}catch{return e}}function qN(e){if(!e)return"";const t=e.replace(/\D/g,"");return t.length===11&&t.startsWith("7")?`+7 ${t.slice(1,4)} ${t.slice(4,7)} ${t.slice(7,9)} ${t.slice(9)}`:e}function VN(){const[e,t]=u.useState([]),[s,r]=u.useState(0),[a,i]=u.useState(!0),[l,o]=u.useState("");u.useEffect(()=>{(async()=>{try{const g=await A_();t(g.subscribers||[]),r(g.total)}catch{t([]),r(0)}finally{i(!1)}})()},[]);const c=e.filter(h=>h.has_loyalty).length,d=l.trim()?e.filter(h=>{const g=l.trim().toLowerCase();return h.fio&&h.fio.toLowerCase().includes(g)||h.username&&h.username.toLowerCase().includes(g)||h.phone&&h.phone.includes(g)}):e;return a?n.jsxs("div",{className:"subscribers-page",children:[n.jsx(tt,{title:""}),n.jsx("div",{className:"subscribers-loading",children:"..."})]}):n.jsxs("div",{className:"subscribers-page",children:[n.jsx(tt,{title:"",subtitle:s>0?`: ${s}`:void 0}),n.jsxs("div",{className:"subscribers-stats",children:[n.jsx(Vt,{label:"",value:s}),n.jsx(Vt,{label:"  ",value:c}),n.jsx(Vt,{label:" ",value:s-c})]}),e.length>0&&n.jsx("div",{className:"subscribers-search",children:n.jsx(Nf,{placeholder:"  , @username  ",value:l,onChange:o})}),d.length===0?n.jsx(Nt,{title:e.length===0?" ":"  ",message:e.length===0?"       .":void 0}):n.jsx("div",{className:"subscribers-list",children:d.map(h=>n.jsxs("div",{className:"subscriber-row",children:[n.jsxs("div",{className:"subscriber-user-info",children:[n.jsx("div",{className:"subscriber-name",children:h.fio||h.username||`ID ${h.buyer_id}`}),h.username&&n.jsxs("div",{className:"subscriber-username",children:["@",h.username]})]}),n.jsx("div",{className:"subscriber-phone",children:qN(h.phone)}),n.jsx("div",{className:"subscriber-date",children:BN(h.subscribed_at)}),n.jsx("div",{className:"subscriber-loyalty-info",children:h.has_loyalty?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"subscriber-loyalty-card",children:h.loyalty_card_number}),n.jsxs("span",{className:"subscriber-loyalty-points",children:[h.loyalty_points," ."]}),h.loyalty_customer_id&&n.jsx(Xe,{to:`/customers/${h.loyalty_customer_id}`,className:"subscriber-loyalty-link",children:""})]}):n.jsx("span",{className:"subscriber-no-card",children:" "})})]},h.buyer_id))})]})}function HN({tiers:e}){const t=[...e].filter(r=>r.name&&r.min_total>0).sort((r,a)=>r.min_total-a.min_total);if(!t.length)return null;const s=t[t.length-1].min_total;return n.jsx("div",{className:"tier-preview",children:n.jsxs("div",{className:"tier-preview-bar",children:[n.jsx("div",{className:"tier-preview-track"}),t.map((r,a)=>{const i=s>0?r.min_total/(s*1.2)*100:0;return n.jsxs("div",{className:"tier-preview-marker",style:{left:`${Math.min(i,92)}%`},children:[n.jsx("div",{className:"tier-preview-dot"}),n.jsxs("div",{className:"tier-preview-label",children:[n.jsx("strong",{children:r.name}),n.jsxs("span",{children:[" ",r.min_total.toLocaleString("ru")," "]}),n.jsxs("span",{children:[r.points_percent,"%"]})]})]},a)})]})})}function QN(){const e=yt(),[t,s]=u.useState(!0),[r,a]=u.useState(""),[i,l]=u.useState("100"),[o,c]=u.useState("1"),[d,h]=u.useState(""),[g,m]=u.useState([]),[_,j]=u.useState(!1);u.useEffect(()=>{Xb().then(N=>{a(String(N.points_percent??"")),l(String(N.max_points_discount_percent??100)),c(String(N.points_to_ruble_rate??1)),m(N.tiers_config||[]),h(N.points_expire_days?String(N.points_expire_days):"")}).catch(()=>{}).finally(()=>s(!1))},[]);const S=async()=>{const N=parseFloat(r.replace(",","."));if(isNaN(N)||N<0||N>100){e.warning(" :   0  100");return}const f=parseInt(i,10);if(isNaN(f)||f<0||f>100){e.warning(". %  :   0  100");return}const p=parseFloat(o.replace(",","."));if(isNaN(p)||p<=0){e.warning(" :   0");return}j(!0);try{const v=d?parseInt(d,10):0,x=await Zb({points_percent:N,max_points_discount_percent:f,points_to_ruble_rate:p,tiers_config:g.length>0?g:null,points_expire_days:v>0?v:null});a(String(x.points_percent)),l(String(x.max_points_discount_percent)),c(String(x.points_to_ruble_rate)),m(x.tiers_config||[]),h(x.points_expire_days?String(x.points_expire_days):""),e.success(" ")}catch(v){e.error(v instanceof Error?v.message:"")}finally{j(!1)}};return t?n.jsx("div",{className:"loyalty-settings-tab",children:n.jsx("div",{className:"loyalty-loading",children:"..."})}):n.jsxs("div",{className:"loyalty-settings-tab",children:[n.jsxs(hn,{className:"loyalty-help-card",children:[n.jsx("h3",{children:"   "}),n.jsxs("p",{children:["          .          (1  = ",o||"1"," ).         ."]})]}),n.jsxs(hn,{children:[n.jsx("h2",{className:"loyalty-section-title",children:" "}),n.jsx("div",{className:"loyalty-fields",children:n.jsxs("div",{className:"loyalty-fields-grid",children:[n.jsx(ae,{label:"  (%   )",children:n.jsx("input",{type:"text",inputMode:"decimal",value:r,onChange:N=>a(N.target.value),placeholder:"0"})}),n.jsx(ae,{label:". % ,  ",children:n.jsx("input",{type:"text",inputMode:"numeric",value:i,onChange:N=>l(N.target.value),placeholder:"100"})}),n.jsx(ae,{label:": 1  = X ",children:n.jsx("input",{type:"text",inputMode:"decimal",value:o,onChange:N=>c(N.target.value),placeholder:"1"})}),n.jsx(ae,{label:"   (, 0 = )",children:n.jsx("input",{type:"text",inputMode:"numeric",value:d,onChange:N=>h(N.target.value),placeholder:"0 ()"})})]})})]}),n.jsxs(hn,{children:[n.jsx("h2",{className:"loyalty-section-title",children:" "}),n.jsx("p",{className:"loyalty-tiers-hint",children:"     %        ."}),n.jsx(HN,{tiers:g}),n.jsx("div",{className:"loyalty-tiers-list",children:g.map((N,f)=>n.jsxs("div",{className:"loyalty-tier-row",children:[n.jsx("input",{type:"text",placeholder:"",value:N.name,onChange:p=>{const v=[...g];v[f]={...v[f],name:p.target.value},m(v)}}),n.jsx("input",{type:"text",inputMode:"numeric",placeholder:"  ",value:N.min_total,onChange:p=>{const v=[...g];v[f]={...v[f],min_total:Number(p.target.value)||0},m(v)}}),n.jsx("input",{type:"text",inputMode:"decimal",placeholder:"% ",value:N.points_percent,onChange:p=>{const v=[...g];v[f]={...v[f],points_percent:Number(p.target.value)||0},m(v)}}),n.jsx("button",{type:"button",className:"loyalty-tier-remove",onClick:()=>m(g.filter((p,v)=>v!==f)),children:"x"})]},f))}),n.jsx("button",{type:"button",className:"loyalty-tier-add",onClick:()=>m([...g,{name:"",min_total:0,points_percent:0}]),children:"+  "})]}),n.jsx("button",{type:"button",className:"loyalty-save-btn",onClick:S,disabled:_,children:_?"...":" "})]})}function GN(e){const t=e.replace(/\D/g,"");if(t.length===0)return"";let s=t;return s.startsWith("8")?s="7"+s.slice(1):s.startsWith("7")||(s="7"+s),s=s.slice(0,11),s.length<=1?"+7":s.length<=4?`+7 ${s.slice(1)}`:s.length<=7?`+7 ${s.slice(1,4)} ${s.slice(4)}`:s.length<=9?`+7 ${s.slice(1,4)} ${s.slice(4,7)} ${s.slice(7)}`:`+7 ${s.slice(1,4)} ${s.slice(4,7)} ${s.slice(7,9)} ${s.slice(9,11)}`}function YN(e){const t=e.replace(/\D/g,"");return t.startsWith("8")?"7"+t.slice(1,11):t.startsWith("7")?t.slice(0,11):("7"+t).slice(0,11)}const KN=[" "," "," "," "];let JN=1;function XN(e=""){return{key:JN++,title:e,event_date:"",remind_days_before:"3",notes:""}}function ZN(){const e=yt(),t=ts(),[s,r]=u.useState(""),[a,i]=u.useState(""),[l,o]=u.useState(""),[c,d]=u.useState(""),[h,g]=u.useState([]),[m,_]=u.useState(!1),[j,S]=u.useState(""),N=(x,C)=>{g(M=>M.map(O=>O.key===x?{...O,...C}:O))},f=x=>{g(C=>C.filter(M=>M.key!==x))},p=(x="")=>{g(C=>[...C,XN(x)])},v=async x=>{x.preventDefault();const C=YN(s);if(C.length<11){e.warning("    +7 000 000 00 00");return}const M=h.filter(z=>z.title.trim()||z.event_date);for(const z of M){if(!z.title.trim()){e.warning("    ");return}if(!z.event_date){e.warning(`   ${z.title.trim()}`);return}}_(!0),S(" ");let O=null;try{O=(await n_({phone:C,first_name:a.trim(),last_name:l.trim(),birthday:c||null})).id}catch(z){const A=z instanceof Error?z.message:"";typeof A=="string"&&(A.includes(" ")||A.includes("409"))?e.warning("      ."):e.error(A),_(!1),S("");return}let E=0;if(M.length>0)for(let z=0;z<M.length;z++){const A=M[z];S(`  (${z+1}/${M.length})`);try{await Of(O,{title:A.title.trim(),event_date:A.event_date,remind_days_before:parseInt(A.remind_days_before)||3,notes:A.notes.trim()||null})}catch{E++}}_(!1),S("");const W=M.length-E;E>0?e.warning(` ,  ${E}  ${M.length}    .       .`):W>0?e.success(`   ${ew(W)} `):e.success(" "),t(`/customers/${O}`)};return n.jsx("div",{className:"add-customer-tab",children:n.jsxs("form",{onSubmit:v,children:[n.jsxs(hn,{children:[n.jsx("h2",{className:"add-customer-section-title",children:"  "}),n.jsxs("div",{className:"add-customer-fields-grid",children:[n.jsx(ae,{label:" *",children:n.jsx("input",{type:"tel",inputMode:"numeric",autoComplete:"tel",value:s,onChange:x=>r(GN(x.target.value)),placeholder:"+7 000 000 00 00",maxLength:16})}),n.jsx(ae,{label:"",children:n.jsx("input",{type:"text",value:a,onChange:x=>i(x.target.value),placeholder:""})}),n.jsx(ae,{label:"",children:n.jsx("input",{type:"text",value:l,onChange:x=>o(x.target.value),placeholder:""})}),n.jsxs(ae,{label:" ",children:[n.jsx("input",{type:"date",value:c,onChange:x=>d(x.target.value)}),n.jsx("span",{className:"add-customer-hint",children:"   "})]})]})]}),n.jsxs(hn,{children:[n.jsx("h2",{className:"add-customer-section-title",children:" "}),n.jsx("p",{className:"add-customer-hint",style:{marginBottom:"var(--space-4)"},children:"         "}),h.length>0?n.jsx("div",{className:"add-customer-events-list",children:h.map(x=>n.jsxs("div",{className:"add-customer-event-row",children:[n.jsxs("div",{className:"add-customer-event-row-fields",children:[n.jsx(ae,{label:"",children:n.jsx("input",{type:"text",placeholder:" , ...",value:x.title,onChange:C=>N(x.key,{title:C.target.value})})}),n.jsx(ae,{label:"",children:n.jsx("input",{type:"date",value:x.event_date,onChange:C=>N(x.key,{event_date:C.target.value})})}),n.jsx(ae,{label:"  (.)",children:n.jsx("input",{type:"number",min:0,max:90,value:x.remind_days_before,onChange:C=>N(x.key,{remind_days_before:C.target.value})})}),n.jsx(ae,{label:"",children:n.jsx("input",{type:"text",placeholder:"",value:x.notes,onChange:C=>N(x.key,{notes:C.target.value})})})]}),n.jsx("button",{type:"button",className:"add-customer-event-remove",onClick:()=>f(x.key),title:" ",children:""})]},x.key))}):n.jsx("div",{className:"add-customer-events-empty",children:"  .      ."}),n.jsxs("div",{className:"add-customer-events-actions",children:[n.jsx("button",{type:"button",className:"add-customer-event-add-btn",onClick:()=>p(),children:"+  "}),n.jsx("div",{className:"add-customer-presets",children:KN.map(x=>n.jsx("button",{type:"button",className:"add-customer-preset-chip",onClick:()=>p(x),children:x},x))})]})]}),n.jsx("button",{type:"submit",className:"add-customer-submit",disabled:m,children:m?j||"":" "})]})})}function ew(e){const t=Math.abs(e)%100,s=t%10;return t>10&&t<20?`${e} `:s>1&&s<5?`${e} `:s===1?`${e} `:`${e} `}const tw=[{key:"crm",label:""},{key:"add",label:"+ "},{key:"subscribers",label:""},{key:"loyalty",label:" "}];function nw(){const[e,t]=Ta("crm");return n.jsxs("div",{children:[n.jsx(tt,{title:"",subtitle:"CRM,   "}),n.jsx(on,{tabs:tw,activeTab:e,onChange:t}),e==="crm"&&n.jsx(Qf,{}),e==="add"&&n.jsx(ZN,{}),e==="subscribers"&&n.jsx(VN,{}),e==="loyalty"&&n.jsx(QN,{})]})}const sw={pending:"",accepted:" ",assembling:"",in_transit:" ",done:"",completed:"",rejected:""},Dr=new Intl.DateTimeFormat("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}),rw=new Intl.NumberFormat("ru-RU",{minimumFractionDigits:0,maximumFractionDigits:0}),aw=new Intl.NumberFormat("ru-RU",{minimumFractionDigits:0,maximumFractionDigits:2}),iw={delivery:{orders:0,revenue:0},pickup:{orders:0,revenue:0},other:{orders:0,revenue:0},unknown:{orders:0,revenue:0}},lw=[{key:"sales",label:""},{key:"customers",label:""},{key:"preorders",label:""}],ow=[{key:"1d",label:"1 "},{key:"7d",label:"7 "},{key:"30d",label:""},{key:"custom",label:" "}];function Xt(e,t=!1){return`${(t?aw:rw).format(e)} `}function $r(e){const[t,s,r]=e.split("-").map(Number);return new Date(t,(s||1)-1,r||1)}function cw(e,t){return!e&&!t?null:e&&t&&e===t?Dr.format($r(e)):e&&t?`${Dr.format($r(e))}  ${Dr.format($r(t))}`:e?` ${Dr.format($r(e))}`:` ${Dr.format($r(t))}`}function uw(){var Y,ne,J,D,P,w;const e=yt(),[t,s]=u.useState(null),[r,a]=u.useState(null),[i,l]=u.useState(null),[o,c]=u.useState(!0),[d,h]=u.useState(!1),[g,m]=u.useState(!1),[_,j]=u.useState(null),[S,N]=u.useState("30d"),[f,p]=u.useState(""),[v,x]=u.useState(""),[C,M]=u.useState("sales"),O=u.useCallback(async T=>{var B,q;c(!0),h(!0),m(!0),j(null);try{const[ve,ze,we]=await Promise.all([mc(T),Fb(T).catch(be=>(console.warn("Customer stats load failed:",be),null)),O_(T).catch(be=>(console.warn("Preorder analytics load failed:",be),null))]);s(ve),a(ze),l(we),(B=ve.filters)!=null&&B.date_from&&p(ve.filters.date_from),(q=ve.filters)!=null&&q.date_to&&x(ve.filters.date_to)}catch{s(null),a(null),l(null),j("   ")}finally{c(!1),h(!1),m(!1)}},[]);u.useEffect(()=>{S!=="custom"&&O({period:S})},[S,O]);const E=T=>{N(T)},W=()=>{f&&v&&(N("custom"),O({date_from:f,date_to:v}))},z=async()=>{try{const B=await Wb(S==="custom"?{date_from:f,date_to:v}:{period:S}),q=URL.createObjectURL(B),ve=document.createElement("a");ve.href=q,ve.download=`stats_${new Date().toISOString().slice(0,10)}.csv`,ve.click(),URL.revokeObjectURL(q)}catch(T){e.error(T instanceof Error?T.message:" ")}},A=u.useMemo(()=>(t==null?void 0:t.delivery_breakdown)??iw,[t]),G=(t==null?void 0:t.daily_sales)??[],H=t!=null&&t.filters?cw(t.filters.date_from,t.filters.date_to):null,V=Object.entries((t==null?void 0:t.orders_by_status)||{}).map(([T,B])=>n.jsxs("tr",{children:[n.jsx("td",{children:sw[T]||T}),n.jsx("td",{children:B})]},T));return o&&!t?n.jsx("div",{className:"stats-loading",children:n.jsx("div",{className:"loader"})}):n.jsxs("div",{className:"stats-page",children:[n.jsx(tt,{title:"",actions:n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:z,children:" CSV"})}),n.jsx(on,{tabs:lw,activeTab:C,onChange:T=>M(T)}),n.jsxs("div",{className:"card seller-stats-card",children:[n.jsxs("div",{className:"seller-stats-header",children:[n.jsxs("div",{children:[n.jsx("h2",{children:" "}),H&&n.jsx("p",{className:"seller-stats-subtitle",children:H})]}),n.jsxs("div",{className:"seller-stats-controls",children:[n.jsx(on,{tabs:ow,activeTab:S,onChange:T=>E(T),size:"small"}),S==="custom"&&n.jsxs("div",{className:"range-custom",children:[n.jsx("input",{type:"date",className:"form-input form-input-sm",value:f,onChange:T=>p(T.target.value),max:v||void 0}),n.jsx("span",{className:"range-sep",children:""}),n.jsx("input",{type:"date",className:"form-input form-input-sm",value:v,onChange:T=>x(T.target.value),min:f||void 0}),n.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:W,children:""})]})]})]}),C==="sales"&&n.jsxs("div",{className:"seller-stats-main",children:[n.jsx("div",{className:"seller-stats-chart card",children:o?n.jsx("div",{className:"seller-chart-loading"}):n.jsx(gl,{data:G})}),n.jsxs("div",{className:"seller-stats-summary",children:[n.jsxs("div",{className:"summary-item",children:[n.jsx("span",{className:"summary-label",children:" "}),n.jsx("span",{className:"summary-value",children:(t==null?void 0:t.total_completed_orders)??0})]}),n.jsxs("div",{className:"summary-item",children:[n.jsx("span",{className:"summary-label",children:" "}),n.jsx("span",{className:"summary-value",children:Xt((t==null?void 0:t.total_revenue)??0,!0)})]}),n.jsxs("div",{className:"summary-item",children:[n.jsx("span",{className:"summary-label",children:" "}),n.jsx("span",{className:"summary-value",children:Xt((t==null?void 0:t.average_check)??0,!0)})]}),(t==null?void 0:t.previous_period_revenue)!=null&&(t==null?void 0:t.previous_period_revenue)>0&&n.jsxs("div",{className:"summary-item",children:[n.jsx("span",{className:"summary-label",children:"      "}),n.jsx("span",{className:"summary-value",children:(()=>{const T=t.previous_period_revenue??0,B=t.total_revenue??0,q=T?Math.round((B-T)/T*100):0;return q>=0?`+${q}%`:`${q}%`})()})]}),n.jsxs("div",{className:"summary-item",children:[n.jsxs("span",{className:"summary-label",children:["  (",(t==null?void 0:t.commission_rate)??18,"%)"]}),n.jsx("span",{className:"summary-value",children:Xt((t==null?void 0:t.commission_18)??0,!0)})]}),n.jsxs("div",{className:"summary-item accent",children:[n.jsx("span",{className:"summary-label",children:" "}),n.jsx("span",{className:"summary-value accent",children:Xt((t==null?void 0:t.net_revenue)??0,!0)})]})]})]}),C==="customers"&&n.jsx("div",{className:"seller-stats-summary seller-stats-tab-content",children:d?n.jsx("div",{className:"seller-chart-loading"}):r?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"summary-item",children:[n.jsx("span",{className:"summary-label",children:"  "}),n.jsx("span",{className:"summary-value",children:r.total_customers})]}),n.jsxs("div",{className:"summary-item",children:[n.jsx("span",{className:"summary-label",children:" "}),n.jsx("span",{className:"summary-value",children:r.new_customers})]}),n.jsxs("div",{className:"summary-item",children:[n.jsx("span",{className:"summary-label",children:""}),n.jsx("span",{className:"summary-value",children:r.returning_customers})]}),n.jsxs("div",{className:"summary-item",children:[n.jsx("span",{className:"summary-label",children:" "}),n.jsx("span",{className:"summary-value",children:r.repeat_orders})]}),n.jsxs("div",{className:"summary-item",children:[n.jsx("span",{className:"summary-label",children:"Retention rate"}),n.jsxs("span",{className:"summary-value",children:[r.retention_rate,"%"]})]}),n.jsxs("div",{className:"summary-item accent",children:[n.jsx("span",{className:"summary-label",children:" LTV"}),n.jsx("span",{className:"summary-value accent",children:Xt(r.avg_ltv,!0)})]})]}):n.jsx(Nt,{title:" "})}),C==="preorders"&&n.jsx("div",{className:"seller-stats-summary seller-stats-tab-content",children:g?n.jsx("div",{className:"seller-chart-loading"}):i?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"summary-item",children:[n.jsx("span",{className:"summary-label",children:" "}),n.jsx("span",{className:"summary-value",children:i.total_preorders})]}),n.jsxs("div",{className:"summary-item",children:[n.jsx("span",{className:"summary-label",children:""}),n.jsx("span",{className:"summary-value",children:i.completed_preorders})]}),n.jsxs("div",{className:"summary-item",children:[n.jsx("span",{className:"summary-label",children:""}),n.jsx("span",{className:"summary-value",children:i.cancelled_preorders})]}),n.jsxs("div",{className:"summary-item",children:[n.jsx("span",{className:"summary-label",children:"% "}),n.jsxs("span",{className:"summary-value",children:[i.completion_rate.toFixed(1),"%"]})]}),n.jsxs("div",{className:"summary-item",children:[n.jsx("span",{className:"summary-label",children:"% "}),n.jsxs("span",{className:"summary-value",children:[i.cancellation_rate.toFixed(1),"%"]})]}),n.jsxs("div",{className:"summary-item accent",children:[n.jsx("span",{className:"summary-label",children:" "}),n.jsx("span",{className:"summary-value accent",children:Xt(i.total_revenue,!0)})]}),n.jsxs("div",{className:"summary-item",children:[n.jsx("span",{className:"summary-label",children:"   (  )"}),n.jsx("span",{className:"summary-value",children:i.avg_lead_days.toFixed(1)})]})]}):n.jsx(Nt,{title:"   ",message:"        "})})]}),_&&n.jsx("div",{className:"card",children:n.jsx(Nt,{title:_})}),C==="sales"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"card seller-breakdown-card",children:[n.jsx("h3",{children:"   "}),n.jsxs("div",{className:"seller-breakdown-grid",children:[n.jsxs("div",{className:"seller-breakdown-item",children:[n.jsx("span",{className:"summary-label",children:""}),n.jsx("span",{className:"summary-value",children:Xt(A.delivery.revenue,!0)}),n.jsxs("span",{className:"seller-breakdown-sub",children:[A.delivery.orders," "]})]}),n.jsxs("div",{className:"seller-breakdown-item",children:[n.jsx("span",{className:"summary-label",children:""}),n.jsx("span",{className:"summary-value",children:Xt(A.pickup.revenue,!0)}),n.jsxs("span",{className:"seller-breakdown-sub",children:[A.pickup.orders," "]})]}),(A.other.revenue>0||A.other.orders>0)&&n.jsxs("div",{className:"seller-breakdown-item",children:[n.jsx("span",{className:"summary-label",children:""}),n.jsx("span",{className:"summary-value",children:Xt(A.other.revenue,!0)}),n.jsxs("span",{className:"seller-breakdown-sub",children:[A.other.orders," "]})]}),(A.unknown.revenue>0||A.unknown.orders>0)&&n.jsxs("div",{className:"seller-breakdown-item",children:[n.jsx("span",{className:"summary-label",children:" "}),n.jsx("span",{className:"summary-value",children:Xt(A.unknown.revenue,!0)}),n.jsxs("span",{className:"seller-breakdown-sub",children:[A.unknown.orders," "]})]})]})]}),V.length>0&&n.jsxs("div",{className:"card",children:[n.jsx("h3",{children:"  "}),n.jsx("div",{className:"table-wrap",children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:""}),n.jsx("th",{children:""})]})}),n.jsx("tbody",{children:V})]})})]}),(((Y=t==null?void 0:t.top_products)==null?void 0:Y.length)??0)>0&&n.jsxs("div",{className:"card seller-stats-top",children:[n.jsx("h3",{children:"  ( )"}),n.jsx("div",{className:"table-wrap",children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:""}),n.jsx("th",{children:" ()"}),n.jsx("th",{children:" "})]})}),n.jsx("tbody",{children:(ne=t==null?void 0:t.top_products)==null?void 0:ne.map(T=>n.jsxs("tr",{children:[n.jsx("td",{children:T.product_name}),n.jsx("td",{children:T.quantity_sold}),n.jsx("td",{children:T.order_count})]},T.product_id))})]})})]}),(((J=t==null?void 0:t.top_bouquets)==null?void 0:J.length)??0)>0&&n.jsxs("div",{className:"card seller-stats-top",children:[n.jsx("h3",{children:"  ( )"}),n.jsx("div",{className:"table-wrap",children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:""}),n.jsx("th",{children:" ()"})]})}),n.jsx("tbody",{children:(D=t==null?void 0:t.top_bouquets)==null?void 0:D.map(T=>n.jsxs("tr",{children:[n.jsx("td",{children:T.bouquet_name}),n.jsx("td",{children:T.quantity_sold})]},T.bouquet_id))})]})})]})]}),C==="preorders"&&i&&(((P=i.top_products)==null?void 0:P.length)??0)>0&&n.jsxs("div",{className:"card seller-stats-top",children:[n.jsx("h3",{children:"    ( )"}),n.jsx("div",{className:"table-wrap",children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:""}),n.jsx("th",{children:""})]})}),n.jsx("tbody",{children:i.top_products.map((T,B)=>n.jsxs("tr",{children:[n.jsx("td",{children:T.product_name}),n.jsx("td",{children:T.count})]},B))})]})})]}),C==="customers"&&r&&(((w=r.top_customers)==null?void 0:w.length)??0)>0&&n.jsxs("div",{className:"card seller-stats-top",children:[n.jsx("h3",{children:"  ( )"}),n.jsx("div",{className:"table-wrap",children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:""}),n.jsx("th",{children:""}),n.jsx("th",{children:""})]})}),n.jsx("tbody",{children:r.top_customers.map(T=>n.jsxs("tr",{children:[n.jsxs("td",{children:[T.name,T.phone?` (${T.phone})`:""]}),n.jsx("td",{children:T.orders_count}),n.jsx("td",{children:Xt(T.total_spent,!0)})]},T.buyer_id))})]})})]})]})}function dw(){return n.jsx(uw,{})}function Gf(e){const[t,s]=u.useState(!1),[r,a]=u.useState(e),[i,l]=u.useState(!1);u.useEffect(()=>{t||a(e)},[e,t]);const o=u.useCallback(()=>{a(e),s(!0)},[e]),c=u.useCallback(()=>{a(e),s(!1)},[e]),d=u.useCallback((h,g)=>{a(m=>({...m,[h]:g}))},[]);return{isEditing:t,draft:r,saving:i,setSaving:l,startEditing:o,cancelEditing:c,updateField:d,setIsEditing:s}}const pw={:" ",:" ","  ":"  "},mw=[{value:"",label:" "},{value:"",label:" "},{value:"",label:" "},{value:"  ",label:"  "}];function hw({me:e,reload:t}){const s=yt(),r=Gf({shopName:e.shop_name||"",description:e.description||"",deliveryType:e.delivery_type||"",deliveryPrice:String(e.delivery_price??""),addressName:e.address_name||"",mapUrl:e.map_url||""}),[a,i]=u.useState(!1),[l,o]=u.useState(!1),c=u.useRef(null),d=async()=>{r.setSaving(!0);try{await Qi({shop_name:r.draft.shopName.trim()||void 0,description:r.draft.description.trim()||void 0,delivery_type:r.draft.deliveryType.trim()||void 0,delivery_price:r.draft.deliveryPrice?parseFloat(r.draft.deliveryPrice):void 0,address_name:r.draft.addressName.trim()||void 0,map_url:r.draft.mapUrl.trim()||void 0}),await t(),r.setIsEditing(!1),s.success(" ")}catch(m){s.error(m instanceof Error?m.message:"")}finally{r.setSaving(!1)}},h=async m=>{var j;const _=(j=m.target.files)==null?void 0:j[0];if(_){i(!0);try{await qb(_),await t(),m.target.value="",s.success(" ")}catch(S){s.error(S instanceof Error?S.message:"  ")}finally{i(!1)}}},g=async()=>{o(!0);try{await Qi({banner_url:null}),await t(),s.success(" ")}catch(m){s.error(m instanceof Error?m.message:"")}finally{o(!1)}};return n.jsxs("div",{className:"settings-shop",children:[n.jsxs("div",{className:"shop-card",children:[n.jsxs("div",{className:"shop-card__header",children:[n.jsxs("div",{className:"shop-card__header-left",children:[n.jsx("div",{className:"shop-card__icon-badge",children:n.jsx(Nn,{size:18})}),n.jsxs("div",{children:[n.jsx("h3",{className:"shop-card__title",children:" "}),n.jsx("p",{className:"shop-card__subtitle",children:"   "})]})]}),!r.isEditing&&n.jsxs("button",{className:"shop-card__edit-btn",onClick:r.startEditing,children:[n.jsx(_s,{size:14}),n.jsx("span",{children:""})]})]}),r.isEditing?n.jsxs("div",{className:"shop-form",children:[n.jsx(ae,{label:" ",children:n.jsx("input",{type:"text",value:r.draft.shopName,onChange:m=>r.updateField("shopName",m.target.value),placeholder:":  ",className:"form-input"})}),n.jsx(ae,{label:"",children:n.jsx("textarea",{value:r.draft.description,onChange:m=>r.updateField("description",m.target.value),placeholder:"   ",className:"form-input",rows:3})}),n.jsxs("div",{className:"shop-form__row-2col",children:[n.jsx(ae,{label:" ",children:n.jsx("select",{value:r.draft.deliveryType,onChange:m=>r.updateField("deliveryType",m.target.value),className:"form-input",children:mw.map(m=>n.jsx("option",{value:m.value,children:m.label},m.value))})}),n.jsx(ae,{label:"  ()",children:n.jsx("input",{type:"number",min:"0",step:"0.01",value:r.draft.deliveryPrice,onChange:m=>r.updateField("deliveryPrice",m.target.value),placeholder:"0",className:"form-input"})})]}),n.jsxs("div",{className:"shop-form__row-2col",children:[n.jsx(ae,{label:" ",children:n.jsx("input",{type:"text",value:r.draft.addressName,onChange:m=>r.updateField("addressName",m.target.value),placeholder:": . , . 1",className:"form-input"})}),n.jsx(ae,{label:"  ",children:n.jsx("input",{type:"text",value:r.draft.mapUrl,onChange:m=>r.updateField("mapUrl",m.target.value),placeholder:"https://yandex.ru/maps/...",className:"form-input"})})]}),n.jsxs("div",{className:"shop-form__actions",children:[n.jsx("button",{className:"btn btn-primary",onClick:d,disabled:r.saving,children:r.saving?"...":""}),n.jsx("button",{className:"btn btn-ghost",onClick:r.cancelEditing,children:""})]})]}):n.jsx("div",{className:"shop-view",children:n.jsxs("div",{className:"shop-view__grid",children:[n.jsxs("div",{className:"shop-view__item shop-view__item--wide",children:[n.jsx("span",{className:"shop-view__label",children:""}),n.jsx("span",{className:"shop-view__value shop-view__value--primary",children:e.shop_name||""})]}),n.jsxs("div",{className:"shop-view__item shop-view__item--wide",children:[n.jsx("span",{className:"shop-view__label",children:""}),n.jsx("span",{className:"shop-view__value",children:e.description||""})]}),n.jsxs("div",{className:"shop-view__item",children:[n.jsxs("div",{className:"shop-view__label-row",children:[n.jsx(fl,{size:14,className:"shop-view__label-icon"}),n.jsx("span",{className:"shop-view__label",children:""})]}),n.jsx("span",{className:"shop-view__value",children:pw[e.delivery_type||""]||e.delivery_type||""})]}),n.jsxs("div",{className:"shop-view__item",children:[n.jsx("span",{className:"shop-view__label",children:" "}),n.jsx("span",{className:"shop-view__value",children:e.delivery_price!=null?n.jsxs("span",{className:"shop-view__price",children:[e.delivery_price," "]}):""})]}),n.jsxs("div",{className:"shop-view__item",children:[n.jsxs("div",{className:"shop-view__label-row",children:[n.jsx(Nu,{size:14,className:"shop-view__label-icon"}),n.jsx("span",{className:"shop-view__label",children:""})]}),n.jsx("span",{className:"shop-view__value",children:e.address_name||""})]}),n.jsxs("div",{className:"shop-view__item",children:[n.jsx("span",{className:"shop-view__label",children:""}),n.jsx("span",{className:"shop-view__value",children:e.map_url?n.jsxs("a",{href:e.map_url,target:"_blank",rel:"noopener noreferrer",className:"shop-view__link",children:[n.jsx(vf,{size:13}),"  "]}):""})]})]})})]}),n.jsxs("div",{className:"shop-card",children:[n.jsx("div",{className:"shop-card__header",children:n.jsxs("div",{className:"shop-card__header-left",children:[n.jsx("div",{className:"shop-card__icon-badge shop-card__icon-badge--teal",children:n.jsx(_u,{size:18})}),n.jsxs("div",{children:[n.jsx("h3",{className:"shop-card__title",children:" "}),n.jsx("p",{className:"shop-card__subtitle",children:" : 1200 x 400 px (3:1)"})]})]})}),e.banner_url?n.jsxs("div",{className:"shop-banner",children:[n.jsx("div",{className:"shop-banner__preview",children:n.jsx("img",{src:Bb(e.banner_url)??"",alt:" "})}),n.jsxs("div",{className:"shop-banner__actions",children:[n.jsxs("button",{type:"button",className:"btn btn-primary btn-sm",disabled:a,onClick:()=>{var m;return(m=c.current)==null?void 0:m.click()},children:[n.jsx(ip,{size:14}),a?"...":""]}),n.jsxs("button",{type:"button",className:"btn btn-ghost btn-sm shop-banner__remove-btn",disabled:l,onClick:g,children:[n.jsx(ur,{size:14}),l?"...":""]})]})]}):n.jsxs("div",{className:"shop-banner__dropzone",onClick:()=>{var m;return(m=c.current)==null?void 0:m.click()},children:[n.jsx(ip,{size:24,className:"shop-banner__dropzone-icon"}),n.jsx("span",{className:"shop-banner__dropzone-text",children:a?"...":",   "}),n.jsx("span",{className:"shop-banner__dropzone-hint",children:"JPG, PNG, WebP  GIF"})]}),n.jsx("input",{ref:c,type:"file",accept:"image/jpeg,image/png,image/webp,image/gif",onChange:h,className:"shop-banner__file-input"})]}),n.jsxs("div",{className:"shop-card",children:[n.jsx("div",{className:"shop-card__header",children:n.jsxs("div",{className:"shop-card__header-left",children:[n.jsx("div",{className:"shop-card__icon-badge shop-card__icon-badge--amber",children:n.jsx(f0,{size:18})}),n.jsxs("div",{children:[n.jsx("h3",{className:"shop-card__title",children:"  "}),n.jsx("p",{className:"shop-card__subtitle",children:"       "})]})]})}),e.shop_link?n.jsxs("div",{className:"shop-link",children:[n.jsx("code",{className:"shop-link__url",children:e.shop_link}),n.jsxs("button",{className:"shop-link__copy-btn",onClick:()=>{navigator.clipboard.writeText(e.shop_link),s.success(" ")},children:[n.jsx(Vr,{size:14}),""]})]}):n.jsx("p",{className:"shop-card__muted",children:"  .   ."})]})]})}function fw({me:e,reload:t}){const s=yt(),r=Gf({hashtags:e.hashtags||""}),a=async()=>{r.setSaving(!0);try{await Qi({hashtags:r.draft.hashtags.trim()||""}),await t(),r.setIsEditing(!1),s.success(" ")}catch(i){s.error(i instanceof Error?i.message:"")}finally{r.setSaving(!1)}};return n.jsx("div",{className:"settings-hashtags",children:n.jsxs("div",{className:"card settings-hashtags-section",children:[n.jsxs("div",{className:"settings-hashtags-header",children:[n.jsxs("div",{className:"settings-hashtags-header-left",children:[n.jsx(M0,{size:20,className:"settings-hashtags-icon"}),n.jsx("h3",{children:"  "})]}),!r.isEditing&&n.jsxs("button",{className:"btn btn-ghost btn-sm",onClick:r.startEditing,children:[n.jsx(_s,{size:14}),""]})]}),n.jsx("p",{className:"settings-hashtags-hint",children:" ,        ."}),r.isEditing?n.jsxs("div",{className:"settings-hashtags-form",children:[n.jsx(ae,{label:"",hint:" :   101 ,  25, ",children:n.jsx("input",{type:"text",value:r.draft.hashtags,onChange:i=>r.updateField("hashtags",i.target.value),placeholder:"  101 ,  25, ",className:"form-input"})}),n.jsxs("div",{className:"settings-hashtags-actions",children:[n.jsx("button",{className:"btn btn-primary",onClick:a,disabled:r.saving,children:r.saving?"...":""}),n.jsx("button",{className:"btn btn-ghost",onClick:r.cancelEditing,children:""})]})]}):n.jsx("div",{className:"settings-hashtags-view",children:e.hashtags?n.jsx("div",{className:"settings-hashtags-tags",children:e.hashtags.split(",").map(i=>i.trim()).filter(Boolean).map(i=>n.jsx("span",{className:"settings-hashtags-chip",children:i},i))}):n.jsx("p",{className:"settings-hashtags-empty",children:"  "})})]})})}const Cp=[{value:0,label:""},{value:1,label:""},{value:2,label:""},{value:3,label:""},{value:4,label:""},{value:5,label:""},{value:6,label:""}];function vw({me:e,reload:t}){const s=yt(),r=ns(),[a,i]=u.useState(!1),[l,o]=u.useState(String(e.max_orders??"")),[c,d]=u.useState(!1),[h,g]=u.useState(e.default_daily_limit?String(e.default_daily_limit):""),[m,_]=u.useState(!1),[j,S]=u.useState(!1),[N,f]=u.useState(!1),[p,v]=u.useState(!!(e.weekly_schedule&&Object.keys(e.weekly_schedule).length>0)),[x,C]=u.useState(()=>{const D=e.weekly_schedule;if(D&&typeof D=="object"){const P={};for(const[w,T]of Object.entries(D))P[w]=String(T);return P}return{}}),[M,O]=u.useState(!1),E=()=>{o(String(e.max_orders??"")),g(e.default_daily_limit?String(e.default_daily_limit):""),i(!0)},W=()=>i(!1),z=()=>{const D=e.weekly_schedule,P=D&&typeof D=="object"&&Object.keys(D).length>0;if(v(!!P),P){const w={};for(const[T,B]of Object.entries(D))w[T]=String(B);C(w)}else C({});f(!0)},A=()=>f(!1),G=async()=>{const D=h.trim(),P=D===""?0:parseInt(D,10);if(isNaN(P)||P<0||P>100){s.warning("   0  100 (0   = )");return}_(!0);try{await Yb(P),await t(),s.success("  ")}catch(w){s.error(w instanceof Error?w.message:"")}finally{_(!1)}},H=async()=>{const D=parseInt(l,10);if(isNaN(D)||D<1||D>100){s.warning("   1  100");return}d(!0);try{await Gb(D),await t(),s.success("   ")}catch(P){s.error(P instanceof Error?P.message:"")}finally{d(!1)}},V=async()=>{if(await r({message:"   ?       6:00 ()."})){S(!0);try{await Kb(),await t(),s.success("   ")}catch(D){s.error(D instanceof Error?D.message:"")}finally{S(!1)}}},Y=async()=>{if(!p){O(!0);try{await hp({}),await t(),f(!1),s.success(" ")}catch(P){s.error(P instanceof Error?P.message:"")}finally{O(!1)}return}const D={};for(const[P,w]of Object.entries(x)){const T=parseInt(w,10);!isNaN(T)&&T>0&&(D[P]=T)}if(Object.keys(D).length===0){s.warning("      ");return}O(!0);try{await hp(D),await t(),f(!1),s.success(" ")}catch(P){s.error(P instanceof Error?P.message:"")}finally{O(!1)}},ne=e.weekly_schedule&&typeof e.weekly_schedule=="object"&&Object.keys(e.weekly_schedule).length>0,J=e.subscription_plan?`${e.subscription_plan==="free"?"Free":e.subscription_plan==="pro"?"Pro":"Premium"} (. ${e.plan_limit_cap??"?"} /)`:void 0;return n.jsxs("div",{className:"settings-limits",children:[n.jsxs("div",{className:"card settings-limits-section",children:[n.jsxs("div",{className:"settings-limits-header",children:[n.jsxs("div",{className:"settings-limits-header-left",children:[n.jsx(wu,{size:20,className:"settings-limits-icon"}),n.jsx("h3",{children:" "})]}),!a&&n.jsxs("button",{className:"btn btn-ghost btn-sm",onClick:E,children:[n.jsx(_s,{size:14}),""]})]}),a?n.jsxs("div",{className:"settings-limits-form",children:[n.jsx(ae,{label:"  ",hint:"   .   0 = .",children:n.jsxs("div",{className:"settings-limits-input-row",children:[n.jsx("input",{type:"number",min:0,max:100,value:h,onChange:D=>g(D.target.value),placeholder:" ",className:"form-input settings-limits-input-narrow"}),n.jsx("button",{className:"btn btn-primary",onClick:G,disabled:m,children:m?"...":""})]})}),n.jsx(ae,{label:"   ()",hint:"  .   6:00 ().",children:n.jsxs("div",{className:"settings-limits-input-row",children:[n.jsx("input",{type:"number",min:1,max:100,value:l,onChange:D=>o(D.target.value),className:"form-input settings-limits-input-sm"}),n.jsx("button",{className:"btn btn-primary",onClick:H,disabled:c,children:c?"...":"  "})]})}),e.limit_set_for_today&&n.jsxs("p",{className:"settings-limits-status",children:["  : ",e.orders_used_today??0," / ",e.max_orders??0]}),J&&n.jsxs("p",{className:"settings-limits-plan",children:[": ",n.jsx("strong",{children:J})]}),n.jsxs("div",{className:"settings-limits-divider",children:[n.jsx("button",{className:"btn btn-danger",onClick:V,disabled:j,children:j?"...":"  "}),n.jsx("p",{className:"settings-limits-hint-sm",children:"     6:00 ()  ."})]}),n.jsx("button",{className:"btn btn-ghost",onClick:W,children:""})]}):n.jsxs("div",{className:"settings-limits-view",children:[n.jsx(je,{label:" ",value:e.default_daily_limit?`${e.default_daily_limit} /`:" "}),n.jsx(je,{label:" ",value:e.limit_set_for_today?`${e.orders_used_today??0} / ${e.max_orders??0}`:" "}),J&&n.jsx(je,{label:"",value:J})]})]}),n.jsxs("div",{className:"card settings-limits-section",children:[n.jsxs("div",{className:"settings-limits-header",children:[n.jsxs("div",{className:"settings-limits-header-left",children:[n.jsx(Ij,{size:20,className:"settings-limits-icon"}),n.jsx("h3",{children:"   "})]}),!N&&n.jsxs("button",{className:"btn btn-ghost btn-sm",onClick:z,children:[n.jsx(_s,{size:14}),""]})]}),n.jsx("p",{className:"settings-limits-hint",children:"     . :   >  >  ."}),N?n.jsxs("div",{className:"settings-limits-form",children:[n.jsx(_a,{checked:p,onChange:v,label:" "}),p&&n.jsx("div",{className:"settings-limits-schedule-grid",children:Cp.map(D=>n.jsxs("div",{className:"settings-limits-day-row",children:[n.jsx("span",{className:"settings-limits-day-label",children:D.label}),n.jsx("input",{type:"number",min:0,max:100,value:x[String(D.value)]??"",onChange:P=>C(w=>({...w,[String(D.value)]:P.target.value})),placeholder:"",className:"form-input settings-limits-input-sm"})]},D.value))}),n.jsxs("div",{className:"settings-limits-actions",children:[n.jsx("button",{className:"btn btn-primary",onClick:Y,disabled:M,children:M?"...":" "}),n.jsx("button",{className:"btn btn-ghost",onClick:A,children:""})]})]}):n.jsxs("div",{className:"settings-limits-view",children:[n.jsx(je,{label:"",value:ne?"":""}),ne&&Cp.map(D=>{var w;const P=(w=e.weekly_schedule)==null?void 0:w[String(D.value)];return P?n.jsx(je,{label:D.label,value:`${P} `},D.value):null})]})]})]})}const xi=[{value:0,label:"",short:""},{value:1,label:"",short:""},{value:2,label:"",short:""},{value:3,label:"",short:""},{value:4,label:"",short:""},{value:5,label:"",short:""},{value:6,label:"",short:""}];function Ep(e){const t={};for(const s of xi){const r=String(s.value),a=e==null?void 0:e[r];a===null?t[r]={open:"09:00",close:"18:00",isWorking:!1}:a&&typeof a=="object"?t[r]={open:a.open,close:a.close,isWorking:!0}:t[r]={open:"09:00",close:"18:00",isWorking:!0}}return t}function gw({me:e,reload:t}){const s=yt(),[r,a]=u.useState(!1),[i,l]=u.useState(!!(e.working_hours&&Object.keys(e.working_hours).length>0)),[o,c]=u.useState(()=>Ep(e.working_hours)),[d,h]=u.useState(!1),g=()=>{const N=e.working_hours,f=N&&typeof N=="object"&&Object.keys(N).length>0;l(!!f),c(Ep(N)),a(!0)},m=()=>a(!1),_=async()=>{if(!i){h(!0);try{await fp(null),await t(),a(!1),s.success("  ")}catch(f){s.error(f instanceof Error?f.message:"")}finally{h(!1)}return}const N={};for(const f of xi){const p=String(f.value),v=o[p];if(!v.isWorking)N[p]=null;else{if(v.open>=v.close){s.warning(`${f.label}:      `);return}N[p]={open:v.open,close:v.close}}}h(!0);try{await fp(N),await t(),a(!1),s.success("  ")}catch(f){s.error(f instanceof Error?f.message:"")}finally{h(!1)}},j=(N,f,p)=>{c(v=>({...v,[N]:{...v[N],[f]:p}}))},S=e.working_hours&&typeof e.working_hours=="object"&&Object.keys(e.working_hours).length>0;return n.jsx("div",{className:"settings-hours",children:n.jsxs("div",{className:"card settings-hours-section",children:[n.jsxs("div",{className:"settings-hours-header",children:[n.jsxs("div",{className:"settings-hours-header-left",children:[n.jsx(cc,{size:20,className:"settings-hours-icon"}),n.jsx("h3",{children:"  "})]}),!r&&n.jsxs("button",{className:"btn btn-ghost btn-sm",onClick:g,children:[n.jsx(_s,{size:14}),""]})]}),n.jsx("p",{className:"settings-hours-hint",children:"      .          ."}),r?n.jsxs("div",{className:"settings-hours-form",children:[n.jsx(_a,{checked:i,onChange:l,label:"  "}),i&&n.jsx("div",{className:"settings-hours-schedule-grid",children:xi.map(N=>{const f=String(N.value),p=o[f];return n.jsxs("div",{className:"settings-hours-day-row",children:[n.jsx("span",{className:"settings-hours-day-label",children:N.label}),n.jsx("div",{className:"settings-hours-day-toggle",children:n.jsx(_a,{checked:p.isWorking,onChange:v=>j(f,"isWorking",v),label:""})}),p.isWorking?n.jsxs("div",{className:"settings-hours-time-inputs",children:[n.jsx("input",{type:"time",value:p.open,onChange:v=>j(f,"open",v.target.value)}),n.jsx("span",{className:"settings-hours-time-sep",children:""}),n.jsx("input",{type:"time",value:p.close,onChange:v=>j(f,"close",v.target.value)})]}):n.jsx("span",{className:"settings-hours-day-off-label",children:""})]},N.value)})}),n.jsxs("div",{className:"settings-hours-actions",children:[n.jsx("button",{className:"btn btn-primary",onClick:_,disabled:d,children:d?"...":""}),n.jsx("button",{className:"btn btn-ghost",onClick:m,children:""})]})]}):n.jsxs("div",{className:"settings-hours-view",children:[n.jsx(je,{label:"",value:S?"":""}),S&&xi.map(N=>{var p;const f=(p=e.working_hours)==null?void 0:p[String(N.value)];return f===void 0?null:f===null?n.jsx(je,{label:N.label,value:""},N.value):n.jsx(je,{label:N.label,value:`${f.open}  ${f.close}`},N.value)})]})]})})}const Pp=[{value:0,label:""},{value:1,label:""},{value:2,label:""},{value:3,label:""},{value:4,label:""},{value:5,label:""},{value:6,label:""}],xw={weekly:" ",interval_days:" N ",custom_dates:" "};function yw({me:e,reload:t}){var w;const s=yt(),[r,a]=u.useState(!1),[i,l]=u.useState(e.preorder_enabled??!1),[o,c]=u.useState(e.preorder_schedule_type||"weekly"),[d,h]=u.useState(e.preorder_weekday??0),[g,m]=u.useState(e.preorder_interval_days??10),[_,j]=u.useState(e.preorder_base_date??""),[S,N]=u.useState(e.preorder_custom_dates??[]),[f,p]=u.useState(""),[v,x]=u.useState(e.preorder_min_lead_days??2),[C,M]=u.useState(e.preorder_max_per_date!=null?String(e.preorder_max_per_date):""),[O,E]=u.useState(e.preorder_discount_percent?String(e.preorder_discount_percent):""),[W,z]=u.useState(e.preorder_discount_min_days??7),[A,G]=u.useState(!1),H=()=>{l(e.preorder_enabled??!1),c(e.preorder_schedule_type||"weekly"),h(e.preorder_weekday??0),m(e.preorder_interval_days??10),j(e.preorder_base_date??""),N(e.preorder_custom_dates??[]),p(""),x(e.preorder_min_lead_days??2),M(e.preorder_max_per_date!=null?String(e.preorder_max_per_date):""),E(e.preorder_discount_percent?String(e.preorder_discount_percent):""),z(e.preorder_discount_min_days??7),a(!0)},V=()=>a(!1),Y=()=>{f&&!S.includes(f)&&(N([...S,f].sort()),p(""))},ne=T=>{N(S.filter(B=>B!==T))},J=async()=>{if(i){if(o==="interval_days"&&(!_||g<1)){s.warning("      ");return}if(o==="custom_dates"&&S.length===0){s.warning("    ");return}}G(!0);try{const T=C?parseInt(C,10):null,B=O?parseFloat(O):0;await Qi({preorder_enabled:i,preorder_schedule_type:i?o:void 0,preorder_weekday:i&&o==="weekly"?d:void 0,preorder_interval_days:i&&o==="interval_days"?g:void 0,preorder_base_date:i&&o==="interval_days"&&_?_:null,preorder_custom_dates:i&&o==="custom_dates"&&S.length>0?S:null,preorder_min_lead_days:i?v:void 0,preorder_max_per_date:i?T:null,preorder_discount_percent:i?B:void 0,preorder_discount_min_days:i&&B>0?W:void 0}),await t(),a(!1),s.success("  ")}catch(T){s.error(T instanceof Error?T.message:"")}finally{G(!1)}},D=xw[e.preorder_schedule_type||""]||e.preorder_schedule_type||"",P=(w=Pp.find(T=>T.value===e.preorder_weekday))==null?void 0:w.label;return n.jsx("div",{className:"settings-preorders",children:n.jsxs("div",{className:"card settings-preorders-section",children:[n.jsxs("div",{className:"settings-preorders-header",children:[n.jsxs("div",{className:"settings-preorders-header-left",children:[n.jsx(Dj,{size:20,className:"settings-preorders-icon"}),n.jsx("h3",{children:""})]}),!r&&n.jsxs("button",{className:"btn btn-ghost btn-sm",onClick:H,children:[n.jsx(_s,{size:14}),""]})]}),n.jsx("p",{className:"settings-preorders-hint",children:"     ."}),r?n.jsxs("div",{className:"settings-preorders-form",children:[n.jsx(_a,{checked:i,onChange:l,label:" "}),i&&n.jsxs(n.Fragment,{children:[n.jsx(ae,{label:" ",children:n.jsxs("div",{className:"settings-preorders-radio-group",children:[n.jsxs("label",{className:"settings-preorders-radio",children:[n.jsx("input",{type:"radio",name:"preorderSchedule",checked:o==="weekly",onChange:()=>c("weekly")}),"  ( )"]}),n.jsxs("label",{className:"settings-preorders-radio",children:[n.jsx("input",{type:"radio",name:"preorderSchedule",checked:o==="interval_days",onChange:()=>c("interval_days")})," N "]}),n.jsxs("label",{className:"settings-preorders-radio",children:[n.jsx("input",{type:"radio",name:"preorderSchedule",checked:o==="custom_dates",onChange:()=>c("custom_dates")}),"   "]})]})}),o==="weekly"&&n.jsx(ae,{label:" ",children:n.jsx("select",{value:d,onChange:T=>h(Number(T.target.value)),className:"form-input settings-preorders-input-md",children:Pp.map(T=>n.jsx("option",{value:T.value,children:T.label},T.value))})}),o==="interval_days"&&n.jsxs("div",{className:"settings-preorders-row",children:[n.jsx(ae,{label:" ()",children:n.jsx("input",{type:"number",min:1,max:365,value:g,onChange:T=>m(Number(T.target.value)||10),className:"form-input settings-preorders-input-sm"})}),n.jsx(ae,{label:" ",children:n.jsx("input",{type:"date",value:_,onChange:T=>j(T.target.value),className:"form-input"})})]}),o==="custom_dates"&&n.jsxs("div",{className:"settings-preorders-dates-block",children:[n.jsx(ae,{label:"  ",children:n.jsxs("div",{className:"settings-preorders-date-add",children:[n.jsx("input",{type:"date",value:f,onChange:T=>p(T.target.value),className:"form-input"}),n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:Y,disabled:!f,children:""})]})}),S.length>0&&n.jsx("div",{className:"settings-preorders-chips",children:S.map(T=>n.jsxs("div",{className:"settings-preorders-chip",children:[n.jsx("span",{children:new Date(T).toLocaleDateString("ru-RU")}),n.jsx("button",{type:"button",onClick:()=>ne(T),className:"settings-preorders-chip-remove","aria-label":"",children:""})]},T))})]}),n.jsxs("div",{className:"settings-preorders-extra",children:[n.jsx("span",{className:"settings-preorders-extra-title",children:" "}),n.jsxs("div",{className:"settings-preorders-row",children:[n.jsx(ae,{label:"   ",hint:", 2 =   2 ",children:n.jsx("input",{type:"number",min:0,max:30,value:v,onChange:T=>x(Number(T.target.value)||0),className:"form-input settings-preorders-input-sm"})}),n.jsx(ae,{label:"   ",hint:" = ",children:n.jsx("input",{type:"number",min:0,value:C,onChange:T=>M(T.target.value),placeholder:" ",className:"form-input settings-preorders-input-narrow"})})]}),n.jsxs("div",{className:"settings-preorders-row",children:[n.jsx(ae,{label:"    (%)",hint:", 10 =  10%",children:n.jsx("input",{type:"number",min:0,max:50,step:.5,value:O,onChange:T=>E(T.target.value),placeholder:"0",className:"form-input settings-preorders-input-sm"})}),parseFloat(O)>0&&n.jsx(ae,{label:"   ",hint:`  ${W}+ `,children:n.jsx("input",{type:"number",min:1,max:90,value:W,onChange:T=>z(Number(T.target.value)||7),className:"form-input settings-preorders-input-sm"})})]})]}),e.preorder_available_dates&&e.preorder_available_dates.length>0&&n.jsxs("p",{className:"settings-preorders-dates-hint",children:["  : ",e.preorder_available_dates.slice(0,4).join(", ")]})]}),n.jsxs("div",{className:"settings-preorders-actions",children:[n.jsx("button",{className:"btn btn-primary",onClick:J,disabled:A,children:A?"...":""}),n.jsx("button",{className:"btn btn-ghost",onClick:V,children:""})]})]}):n.jsxs("div",{className:"settings-preorders-view",children:[n.jsx(je,{label:"",value:e.preorder_enabled?"":""}),e.preorder_enabled&&n.jsxs(n.Fragment,{children:[n.jsx(je,{label:" ",value:D}),e.preorder_schedule_type==="weekly"&&P&&n.jsx(je,{label:" ",value:P}),e.preorder_schedule_type==="interval_days"&&n.jsxs(n.Fragment,{children:[n.jsx(je,{label:"",value:`${e.preorder_interval_days??""} `}),n.jsx(je,{label:" ",value:e.preorder_base_date||""})]}),e.preorder_schedule_type==="custom_dates"&&e.preorder_custom_dates&&n.jsx(je,{label:" ",value:e.preorder_custom_dates.map(T=>new Date(T).toLocaleDateString("ru-RU")).join(", ")}),n.jsx(je,{label:".   ",value:e.preorder_min_lead_days??0}),n.jsx(je,{label:"  ",value:e.preorder_max_per_date!=null?e.preorder_max_per_date:" "}),(e.preorder_discount_percent??0)>0&&n.jsxs(n.Fragment,{children:[n.jsx(je,{label:"",value:`${e.preorder_discount_percent}%`,accent:!0}),n.jsx(je,{label:"   ",value:`${e.preorder_discount_min_days??7}+`})]}),e.preorder_available_dates&&e.preorder_available_dates.length>0&&n.jsx(je,{label:" ",value:e.preorder_available_dates.slice(0,4).join(", "),muted:!0})]})]})]})})}function jw({me:e}){return n.jsxs("div",{className:"account-section-content",children:[n.jsx(je,{label:"Telegram ID",value:n.jsx("code",{className:"account-code",children:e.seller_id})}),n.jsx(je,{label:"",value:e.fio||""}),n.jsx(je,{label:"",value:e.phone||""})]})}const bw={pickup:"",delivery:"",both:"",:"",:"","  ":"  "},_w=[{id:1,name:""},{id:2,name:""},{id:3,name:""},{id:4,name:""},{id:5,name:""},{id:6,name:""},{id:7,name:""},{id:8,name:""},{id:9,name:""},{id:10,name:""},{id:11,name:""},{id:12,name:""}];function Nw({me:e}){var s;const t=((s=_w.find(r=>r.id===e.district_id))==null?void 0:s.name)??"";return n.jsxs("div",{className:"account-section-content",children:[n.jsx(je,{label:"",value:e.shop_name||""}),n.jsx(je,{label:"",value:e.description||""}),n.jsx(je,{label:"",value:t}),n.jsx(je,{label:" ",value:bw[e.delivery_type||""]||e.delivery_type||""}),n.jsx(je,{label:" ",value:e.delivery_price!=null?`${e.delivery_price} `:""}),n.jsx(je,{label:" ()",value:e.map_url?n.jsx("a",{href:e.map_url,target:"_blank",rel:"noopener noreferrer",className:"account-link",children:"  "}):""}),n.jsx(je,{label:"  ",value:e.shop_link?n.jsx("code",{className:"account-code",children:e.shop_link}):""})]})}function ww(e){if(!e)return"";try{return new Date(e).toLocaleDateString("ru")}catch{return e}}function Sw({me:e}){const t=e.subscription_plan?`${e.subscription_plan==="free"?"Free":e.subscription_plan==="pro"?"Pro":"Premium"} (. ${e.plan_limit_cap??"?"} /)`:void 0;return n.jsxs("div",{className:"account-section-content",children:[n.jsx(je,{label:" ",value:e.default_daily_limit?`${e.default_daily_limit} /`:" "}),n.jsx(je,{label:" ",value:e.limit_set_for_today?`${e.orders_used_today??0} / ${e.max_orders??0}`:" "}),n.jsx(je,{label:" ",value:e.active_orders??0}),n.jsx(je,{label:" ",value:e.pending_requests??0}),n.jsx(je,{label:"  ",value:ww(e.placement_expired_at)}),t&&n.jsx(je,{label:"",value:t})]})}function kw(){const[e,t]=u.useState(""),[s,r]=u.useState(""),[a,i]=u.useState(""),[l,o]=u.useState(""),[c,d]=u.useState(""),[h,g]=u.useState(""),[m,_]=u.useState(""),[j,S]=u.useState(!1),[N,f]=u.useState(!1),[p,v]=u.useState(!1),[x,C]=u.useState(!1),M=async O=>{if(O.preventDefault(),g(""),_(""),l!==c){g("     ");return}if(a.trim().length<3){g("      3 ");return}if(l.length<4){g("      4 ");return}S(!0);try{await Jb({old_login:e,old_password:s,new_login:a.trim(),new_password:l}),_("    .     ."),t(""),r(""),i(""),o(""),d("")}catch(E){g(E instanceof Error?E.message:"")}finally{S(!1)}};return n.jsxs("div",{className:"account-security",children:[n.jsx("p",{className:"account-security-hint",children:"       -.    ."}),n.jsxs("form",{onSubmit:M,className:"account-security-form",children:[n.jsx("h4",{className:"account-security-subtitle",children:" "}),n.jsx(ae,{label:" ",children:n.jsx("input",{type:"text",className:"form-input",value:e,onChange:O=>t(O.target.value),required:!0,autoComplete:"username"})}),n.jsx(ae,{label:" ",children:n.jsxs("div",{className:"account-security-password",children:[n.jsx("input",{type:N?"text":"password",className:"form-input",value:s,onChange:O=>r(O.target.value),required:!0,autoComplete:"current-password"}),n.jsx("button",{type:"button",className:"account-security-toggle",onClick:()=>f(!N),"aria-label":N?" ":" ",children:N?n.jsx(er,{size:16}):n.jsx(vs,{size:16})})]})}),n.jsx("h4",{className:"account-security-subtitle account-security-subtitle--spaced",children:" "}),n.jsx(ae,{label:" ",children:n.jsx("input",{type:"text",className:"form-input",value:a,onChange:O=>i(O.target.value),required:!0,minLength:3,autoComplete:"new-username"})}),n.jsx(ae,{label:" ",children:n.jsxs("div",{className:"account-security-password",children:[n.jsx("input",{type:p?"text":"password",className:"form-input",value:l,onChange:O=>o(O.target.value),required:!0,minLength:4,autoComplete:"new-password"}),n.jsx("button",{type:"button",className:"account-security-toggle",onClick:()=>v(!p),"aria-label":p?" ":" ",children:p?n.jsx(er,{size:16}):n.jsx(vs,{size:16})})]})}),n.jsx(ae,{label:"  ",children:n.jsxs("div",{className:"account-security-password",children:[n.jsx("input",{type:x?"text":"password",className:"form-input",value:c,onChange:O=>d(O.target.value),required:!0,minLength:4,autoComplete:"new-password"}),n.jsx("button",{type:"button",className:"account-security-toggle",onClick:()=>C(!x),"aria-label":x?" ":" ",children:x?n.jsx(er,{size:16}):n.jsx(vs,{size:16})})]})}),h&&n.jsx("div",{className:"account-security-error",children:h}),m&&n.jsx("div",{className:"account-security-success",children:m}),n.jsx("button",{type:"submit",className:"btn btn-primary",disabled:j,children:j?"...":""})]})]})}const Tp=[{key:"personal",icon:Su,title:" ",description:"Telegram ID, , "},{key:"shop",icon:Nn,title:"",description:", , , "},{key:"limits",icon:hl,title:"  ",description:",  , "},{key:"security",icon:Vi,title:" ",description:"    -"}];function Cw({me:e}){const[t,s]=u.useState(null),r=Tp.find(a=>a.key===t);return n.jsxs("div",{className:"settings-account",children:[n.jsx("div",{className:"settings-account-cards",children:Tp.map(a=>{const i=a.icon;return n.jsxs("button",{className:"settings-account-card",onClick:()=>s(a.key),children:[n.jsx("div",{className:"settings-account-card-icon",children:n.jsx(i,{size:20})}),n.jsxs("div",{className:"settings-account-card-body",children:[n.jsx("span",{className:"settings-account-card-title",children:a.title}),n.jsx("span",{className:"settings-account-card-desc",children:a.description})]}),n.jsx(xr,{size:16,className:"settings-account-card-arrow"})]},a.key)})}),n.jsxs(J0,{isOpen:t!==null,onClose:()=>s(null),title:(r==null?void 0:r.title)??"",children:[t==="personal"&&n.jsx(jw,{me:e}),t==="shop"&&n.jsx(Nw,{me:e}),t==="limits"&&n.jsx(Sw,{me:e}),t==="security"&&n.jsx(kw,{})]})]})}const Ew=[{key:"shop",label:""},{key:"hashtags",label:""},{key:"limits",label:""},{key:"hours",label:" "},{key:"preorders",label:""},{key:"account",label:""}];function Pw(){const[e,t]=Ta("shop"),[s,r]=u.useState(null),[a,i]=u.useState(!0),l=u.useCallback(async()=>{try{const o=await Cu();r(o)}catch{r(null)}},[]);return u.useEffect(()=>{i(!0),l().finally(()=>i(!1))},[l]),a?n.jsxs("div",{children:[n.jsx(tt,{title:"",subtitle:", , ,  ,   "}),n.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"3rem"},children:n.jsx("div",{className:"loader"})})]}):s?n.jsxs("div",{children:[n.jsx(tt,{title:"",subtitle:", , ,  ,   "}),n.jsx(on,{tabs:Ew,activeTab:e,onChange:t}),e==="shop"&&n.jsx(hw,{me:s,reload:l}),e==="hashtags"&&n.jsx(fw,{me:s,reload:l}),e==="limits"&&n.jsx(vw,{me:s,reload:l}),e==="hours"&&n.jsx(gw,{me:s,reload:l}),e==="preorders"&&n.jsx(yw,{me:s,reload:l}),e==="account"&&n.jsx(Cw,{me:s})]}):n.jsxs("div",{children:[n.jsx(tt,{title:"",subtitle:", , ,  ,   "}),n.jsx("div",{className:"card",children:n.jsx("p",{className:"empty-text",children:"   .   ."})})]})}function Tw({children:e}){const{isAuthenticated:t}=ml(),s=typeof sessionStorage<"u"&&!!sessionStorage.getItem("admin_token"),r=typeof sessionStorage<"u"&&!!sessionStorage.getItem("seller_token");return!s&&!r&&!t?n.jsx(Et,{to:"/login",replace:!0}):n.jsx(n.Fragment,{children:e})}function Aw(){const{role:e,telegramAuthLoading:t,telegramAuthError:s}=ml(),r=e==="admin",a=e==="seller";return ib(),t?n.jsxs("div",{className:"tg-auth-loading",children:[n.jsx("div",{className:"tg-auth-loading__spinner"}),n.jsx("p",{children:"..."})]}):Yn()&&s&&!e?n.jsx("div",{className:"tg-auth-loading",children:n.jsx("p",{className:"tg-auth-loading__error",children:s})}):n.jsxs(By,{children:[n.jsx(De,{path:"/login",element:n.jsx(nb,{})}),n.jsxs(De,{path:"/",element:n.jsx(Tw,{children:n.jsx(tb,{})}),children:[n.jsx(De,{index:!0,element:a?n.jsx(z_,{}):n.jsx(cb,{})}),r&&n.jsxs(n.Fragment,{children:[n.jsx(De,{path:"orders",element:n.jsx(Tb,{})}),n.jsx(De,{path:"sellers",element:n.jsx(hb,{})}),n.jsx(De,{path:"customers",element:n.jsx(Ab,{})}),n.jsx(De,{path:"finance",element:n.jsx(Lb,{})}),n.jsx(De,{path:"analytics",element:n.jsx(Eb,{})}),n.jsx(De,{path:"stats",element:n.jsx(Et,{to:"/analytics",replace:!0})}),n.jsx(De,{path:"stats/sellers",element:n.jsx(Et,{to:"/analytics?tab=sellers",replace:!0})})]}),a&&n.jsxs(n.Fragment,{children:[n.jsx(De,{path:"orders",element:n.jsx(V_,{})}),n.jsx(De,{path:"orders/:orderId",element:n.jsx(Q_,{})}),n.jsx(De,{path:"catalog",element:n.jsx(PN,{})}),n.jsx(De,{path:"stock",element:n.jsx(FN,{})}),n.jsx(De,{path:"customers",element:n.jsx(nw,{})}),n.jsx(De,{path:"customers/:id",element:n.jsx(Qf,{})}),n.jsx(De,{path:"analytics",element:n.jsx(dw,{})}),n.jsx(De,{path:"settings",element:n.jsx(Pw,{})}),n.jsx(De,{path:"shop",element:n.jsx(Et,{to:"/settings?tab=shop",replace:!0})}),n.jsx(De,{path:"showcase",element:n.jsx(Et,{to:"/catalog?tab=showcase",replace:!0})}),n.jsx(De,{path:"receptions",element:n.jsx(Et,{to:"/stock?tab=receptions",replace:!0})}),n.jsx(De,{path:"bouquets",element:n.jsx(Et,{to:"/catalog?tab=bouquets",replace:!0})}),n.jsx(De,{path:"inventory",element:n.jsx(Et,{to:"/stock?tab=inventory",replace:!0})}),n.jsx(De,{path:"stats",element:n.jsx(Et,{to:"/analytics",replace:!0})}),n.jsx(De,{path:"waste-report",element:n.jsx(Et,{to:"/stock?tab=writeoffs",replace:!0})}),n.jsx(De,{path:"profile",element:n.jsx(Et,{to:"/settings?tab=account",replace:!0})}),n.jsx(De,{path:"security",element:n.jsx(Et,{to:"/settings?tab=account",replace:!0})}),n.jsx(De,{path:"subscribers",element:n.jsx(Et,{to:"/customers?tab=subscribers",replace:!0})})]})]}),n.jsx(De,{path:"*",element:n.jsx(Et,{to:"/",replace:!0})})]})}function Lw(){return n.jsx(Ej,{children:n.jsx(G0,{children:n.jsx(K0,{children:n.jsx(Xy,{children:n.jsx(Aw,{})})})})})}async function Rw(){try{const e=await fetch("/config.json"),t=e.ok?await e.json():null;if(t!=null&&t.apiUrl&&String(t.apiUrl).trim()){const s=String(t.apiUrl).trim().replace(/\/$/,"");lj(s),Rb(s)}}catch{}qh(document.getElementById("root")).render(n.jsx(u.StrictMode,{children:n.jsx(Lw,{})}))}Rw();
