# ‚úÖ –ü—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ deploy.sh –≤—Ä—É—á–Ω—É—é

## –ü—Ä–æ–±–ª–µ–º–∞
Git –Ω–µ –º–æ–∂–µ—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç—å —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö/–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏.

## –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ deploy.sh –∫–∞–∫ –æ–±—ã—á–Ω–æ

–í–∞—à `deploy.sh` –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç! –ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –µ–≥–æ –≤—Ä—É—á–Ω—É—é –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:

```bash
./deploy.sh "–æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
```

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ Git –∑–∞–ø—Ä–æ—Å–∏—Ç username –∏ password –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ), –∞ –ø–æ—Ç–æ–º —Å–æ—Ö—Ä–∞–Ω–∏—Ç –≤ keychain.

---

## üöÄ –ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å (–†–ï–ö–û–ú–ï–ù–î–£–Æ):

### –í–∞—Ä–∏–∞–Ω—Ç 1: –û–±—ã—á–Ω—ã–π git push (—Å–∞–º–æ–µ –ø—Ä–æ—Å—Ç–æ–µ)

```bash
# 1. –í–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add .
git commit -m "feat: –æ–ø–∏—Å–∞–Ω–∏–µ"

# 2. Push –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ (Git –ø–æ–ø—Ä–æ—Å–∏—Ç —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ–¥–∏–Ω —Ä–∞–∑)
git push

# 3. –ó–∞—Ç–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—Ä—É—á–Ω—É—é
ssh yandex-cloud
cd ~/shopflowbot
git pull
docker compose -f docker-compose.prod.yml build backend bot
docker compose -f docker-compose.prod.yml up -d
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –í–∞—à deploy.sh (–≤—Å—ë –≤ –æ–¥–Ω–æ–º)

```bash
# –ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
./deploy.sh "feat: –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è"

# –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –≤–≤–µ–¥—ë—Ç–µ username –∏ password
# –î–∞–ª—å—à–µ –æ–Ω–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ macOS Keychain
```

---

## üîß –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Git credential helper (–æ–¥–∏–Ω —Ä–∞–∑)

–ß—Ç–æ–±—ã Git —Å–æ—Ö—Ä–∞–Ω–∏–ª –ø–∞—Ä–æ–ª—å –≤ macOS Keychain:

```bash
git config --global credential.helper osxkeychain
```

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –ø–µ—Ä–≤–æ–º `git push` –≤–≤–µ–¥–∏—Ç–µ:
- **Username**: `nazarovr2895-dot`
- **Password**: –≤–∞—à Personal Access Token (–ù–ï –ø–∞—Ä–æ–ª—å –æ—Ç GitHub!)

Git —Å–æ—Ö—Ä–∞–Ω–∏—Ç —ç—Ç–æ –≤ Keychain –∏ –±–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å.

---

## üìù –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å Personal Access Token

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://github.com/settings/tokens
2. **Generate new token (classic)**
3. **Note**: ShopFlowBot
4. **Expiration**: 90 days
5. **Scopes**: –æ—Ç–º–µ—Ç—å—Ç–µ `repo` (–ù–ï –Ω—É–∂–µ–Ω workflow scope!)
6. **Generate token**
7. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω** (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑!)
8. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –∫–∞–∫ –ø–∞—Ä–æ–ª—å –ø—Ä–∏ `git push`

---

## ‚úÖ –ò—Ç–æ–≥–æ: –í–∞—à –ø—Ä–æ—Å—Ç–æ–π workflow

```bash
# –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞:

# –°–ø–æ—Å–æ–± 1: –†–∞–∑–¥–µ–ª—å–Ω–æ (–±–æ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è)
git add .
git commit -m "feat: –æ–ø–∏—Å–∞–Ω–∏–µ"
git push
ssh yandex-cloud "cd ~/shopflowbot && git pull && docker compose -f docker-compose.prod.yml build backend && docker compose -f docker-compose.prod.yml up -d"

# –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ deploy.sh (–≤—Å—ë –≤ –æ–¥–Ω–æ–º)
./deploy.sh "feat: –æ–ø–∏—Å–∞–Ω–∏–µ"
```

---

## üí° –ü—Ä–æ GitHub Actions

GitHub Actions - —ç—Ç–æ —Ö–æ—Ä–æ—à–æ, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç:
- Token —Å `workflow` scope
- –ù–∞—Å—Ç—Ä–æ–π–∫—É —Å–µ–∫—Ä–µ—Ç–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π–∫—É SSH –∫–ª—é—á–µ–π

**–í–∞—à deploy.sh —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ –ë–ï–ó –≤—Å–µ–≥–æ —ç—Ç–æ–≥–æ!**

–ï—Å–ª–∏ –≤ –±—É–¥—É—â–µ–º –∑–∞—Ö–æ—Ç–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é - –Ω–∞—Å—Ç—Ä–æ–∏—Ç–µ. –ê –ø–æ–∫–∞ deploy.sh –æ—Ç–ª–∏—á–Ω–æ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è.

---

## üéØ –°–µ–π—á–∞—Å —Å–¥–µ–ª–∞–π—Ç–µ:

```bash
# 1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å credential helper
git config --global credential.helper osxkeychain

# 2. –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω –Ω–∞ GitHub (—Å–º. –≤—ã—à–µ)

# 3. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å push
git push
# –í–≤–µ–¥–∏—Ç–µ username –∏ —Ç–æ–∫–µ–Ω (–≤–º–µ—Å—Ç–æ –ø–∞—Ä–æ–ª—è)

# 4. –í—Å—ë! –¢–µ–ø–µ—Ä—å deploy.sh –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
./deploy.sh "test"
```

---

**–í—ã–≤–æ–¥**: –í–∞—à `deploy.sh` - —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ–µ –∏ —Ä–∞–±–æ—á–µ–µ —Ä–µ—à–µ–Ω–∏–µ. –ù–µ –Ω—É–∂–Ω–æ —É—Å–ª–æ–∂–Ω—è—Ç—å! üöÄ
